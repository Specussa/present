import{aw as A,aL as G,aQ as ne,aR as ue,a0 as oe,d as se,r as re}from"./vendor-@element-plus-C9-2Gvnb.js";import{d as ie,e as a,m as ve,U as de,al as ce,o as s,c as P,a as o,R as E,J as g,I as i,u as v,M as H,P as fe}from"./vendor-@vue-C8B30xDB.js";import{_ as _e}from"./LogoSVG-D7wkjCd8.js";const me=["poster"],pe=["src"],ye={key:0,class:"video__border"},ke={key:1,class:"video__title"},Le={class:"video__controls"},he=ie({__name:"VideoPlayer",props:{poster:{},src:{},title:{}},setup(Ee){const e=a(null),y=a(null),V=a(null),C=a(null),F=a(null),x=a(null),u=a(null),b=a(null),r=a(null),w=a(null),d=a(null),_=a(null);let M=!1;const m=a(!1),D=a(!1),B=a(!1),c=a(!1);function S(){var t,n;e.value&&(e.value.ended?(e.value.currentTime=0,e.value.play(),c.value=!1,(t=y.value)==null||t.classList.add("video__overlay_hidden"),m.value=!0):e.value.paused?(e.value.play(),(n=y.value)==null||n.classList.add("video__overlay_hidden"),m.value=!0):(e.value.pause(),m.value=!1))}function K(){e.value&&(e.value.muted=!e.value.muted,D.value=e.value.muted)}function O(){w.value&&(document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),B.value=!1):(w.value.requestFullscreen().catch(t=>{console.log(`Ошибка при включении полноэкранного режима: ${t.message}`)}),B.value=!0))}function Y(){if(!e.value||!b.value||!r.value)return;const t=e.value.currentTime/e.value.duration*100;b.value.style.width=`${t}%`;const n=Math.floor(e.value.currentTime/60),l=Math.floor(e.value.currentTime%60),p=Math.floor(e.value.duration/60),f=Math.floor(e.value.duration%60);r.value.textContent=`${n}:${l.toString().padStart(2,"0")} / ${p}:${f.toString().padStart(2,"0")}`}function T(){e.value&&c.value&&e.value.currentTime<e.value.duration&&(c.value=!1,m.value=!1)}function N(t){if(!e.value||!u.value)return;const n=t.offsetX/u.value.offsetWidth*e.value.duration;e.value.currentTime=n,T()}function k(t){if(!u.value||!e.value||!d.value||!_.value)return;const n=u.value.getBoundingClientRect(),l=t.clientX-n.left,f=l/u.value.offsetWidth*e.value.duration,L=Math.floor(f/60),h=Math.floor(f%60);_.value.style.left=`${l}px`,d.value.style.left=`${l}px`,d.value.textContent=`${L}:${h.toString().padStart(2,"0")}`,_.value.style.opacity="1",d.value.style.opacity="1"}function $(){!d.value||!_.value||(_.value.style.opacity="0",d.value.style.opacity="0")}function Z(){var t;m.value=!1,c.value=!0,(t=y.value)==null||t.classList.remove("video__overlay_hidden")}function ee(){!e.value||!r.value||e.value.addEventListener("loadedmetadata",function(){r.value&&(r.value.textContent=`0:00 / ${Math.floor(e.value.duration/60)}:${Math.floor(e.value.duration%60).toString().padStart(2,"0")}`)})}function te(){var t,n,l,p,f,L,h,R,X,I,U,W,q,J,Q,j,z;(t=V.value)==null||t.addEventListener("click",S),(n=C.value)==null||n.addEventListener("click",S),(l=F.value)==null||l.addEventListener("click",K),(p=x.value)==null||p.addEventListener("click",O),(f=e.value)==null||f.addEventListener("timeupdate",Y),(L=e.value)==null||L.addEventListener("click",S),(h=e.value)==null||h.addEventListener("ended",Z),(R=u.value)==null||R.addEventListener("click",N),(X=u.value)==null||X.addEventListener("mousemove",k),(I=u.value)==null||I.addEventListener("mouseenter",k),(U=u.value)==null||U.addEventListener("mouseleave",$),(W=u.value)==null||W.addEventListener("mousemove",ae=>M&&N(ae)),(q=u.value)==null||q.addEventListener("mousedown",()=>M=!0),(J=u.value)==null||J.addEventListener("mouseup",()=>M=!1),(Q=e.value)==null||Q.addEventListener("seeked",T),(j=r.value)==null||j.addEventListener("mouseenter",k),(z=r.value)==null||z.addEventListener("mouseleave",$)}function le(){var t,n,l;(t=e.value)==null||t.removeEventListener("seeked",T),(n=r.value)==null||n.removeEventListener("mouseenter",k),(l=r.value)==null||l.removeEventListener("mouseleave",$)}return ve(()=>{te(),ee()}),de(()=>{le()}),(t,n)=>{const l=ce("el-icon");return s(),P("div",{ref_key:"player",ref:w,class:"video"},[o("video",{ref_key:"video",ref:e,class:"video__element",poster:t.poster},[o("source",{src:t.src,type:"video/mp4"},null,8,pe)],8,me),o("div",{ref_key:"overlay",ref:y,class:"video__overlay"},[o("button",{ref_key:"playButton",ref:V,class:"video__button_big"},[E(l,null,{default:g(()=>[c.value?(s(),i(v(A),{key:0})):(s(),i(v(G),{key:1}))]),_:1})],512)],512),t.title?(s(),P("div",ye)):H("",!0),t.title?(s(),P("div",ke,fe(t.title),1)):H("",!0),o("div",Le,[o("button",{ref_key:"playPauseButton",ref:C,class:"video__button video__button_toggle"},[E(l,null,{default:g(()=>[m.value&&!c.value?(s(),i(v(ne),{key:0})):c.value?(s(),i(v(A),{key:1})):(s(),i(v(G),{key:2}))]),_:1})],512),o("div",{ref_key:"progress",ref:u,class:"video__progress"},[o("div",{ref_key:"progressFilled",ref:b,class:"video__progress_filled"},null,512),o("div",{ref_key:"previewLine",ref:_,class:"video__preview_line"},null,512),o("div",{ref_key:"previewTime",ref:d,class:"video__preview_time"},null,512)],512),o("div",{ref_key:"timeDisplay",ref:r,class:"video__time"},"0:00 / 0:00",512),o("button",{ref_key:"muteButton",ref:F,class:"video__button video__button_volume"},[E(l,null,{default:g(()=>[D.value?(s(),i(v(ue),{key:0})):(s(),i(v(oe),{key:1}))]),_:1})],512),o("button",{ref_key:"fullscreenButton",ref:x,class:"video__button video__button_fullscreen"},[E(l,null,{default:g(()=>[B.value?(s(),i(v(se),{key:0})):(s(),i(v(re),{key:1}))]),_:1})],512)])],512)}}}),Me=_e(he,[["__scopeId","data-v-b25dce03"]]);export{Me as V};
