import{a as n}from"./vendor-axios-BimPEqV4.js";const i=(e,t)=>{localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t)},l=async(e,t,o)=>{let a={method:e,maxBodyLength:1/0,url:t,headers:{"Content-Type":"application/json"},withCredentials:!0,data:o};return await n.request(a)},u=async(e,t,o)=>{let a={method:e,maxBodyLength:1/0,url:t,headers:{"Content-Type":"application/json",Authorization:`${localStorage.getItem("access_token")}`,"Accept-Language":`${localStorage.getItem("user-locale")}`},withCredentials:!0,data:o};return await n.request(a)},g=async(e,t,o)=>{let a=await s(),r={method:e,maxBodyLength:1/0,url:t,headers:{"Content-Type":"multipart/form-data",Accept:"application/json","X-CSRFToken":a,Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Accept-Language":`${localStorage.getItem("user-locale")}`},withCredentials:!0,data:o};return await n.request(r)},s=async()=>{var e;try{if(!(await fetch("/api/csrf/",{method:"GET",credentials:"include"})).ok)throw new Error("Не удалось получить CSRF-токен");const o=(e=document.cookie.split("; ").find(a=>a.startsWith("csrftoken=")))==null?void 0:e.split("=")[1];if(!o)throw new Error("CSRF-токен не найден в cookie");return o}catch(t){return console.error("Ошибка при получении CSRF-токена:",t),null}};export{u as B,g as F,i as a,l as s};
