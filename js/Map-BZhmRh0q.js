import{d as ia,b as g,e as p,f as Le,m as Ge,U as ua,c as T,R as t,a,u as e,E as Q,Q as q,a4 as X,M as K,I as k,D as C,al as B,o as _,J as s,K as M,S as P,O as Ee,P as c,n as Na,W as I,L as Z}from"./vendor-@vue-C8B30xDB.js";import{B as $e}from"./api-Cj-Fovd5.js";import{U as Da,V as La,W as Va,X as Sa,Y as Ma,Z as Pa,k as Ra,i as Fe,B as Ea,A as $a,P as Fa,M as Ne,_ as Ke,n as re,a as De,$ as He,c as We,t as ta,a0 as oa,a1 as Ie,a2 as Ia,a3 as Ga,O as Aa,a4 as za,a5 as sa}from"./vendor-@element-plus-C9-2Gvnb.js";import{H as Oa,L as Xe}from"./Header-WnhCMtNz.js";import{O as Ua}from"./OpenLayers-CWAna9WI.js";import{F as qa}from"./Footer-DfKqaMUm.js";import{P as Ba}from"./Preloader-DNQakiCF.js";import{E as ge}from"./vendor-element-plus-BvtR3Aid.js";import{u as je}from"./vendor-vue-i18n-BPaetY6Z.js";import{_ as ra}from"./LogoSVG-D7wkjCd8.js";import{F as Ka,E as Ha,K as Wa}from"./krpdSVG-DRsH7Pog.js";import"./vendor-axios-BimPEqV4.js";import"./vendor-vue-router-B2fctcAq.js";import"./index-BkswGIfA.js";import"./vendor-geotiff-CNG5SH6k.js";import"./vendor-xml-utils-DQPdAQjV.js";import"./vendor-dayjs-B_aAqRSu.js";import"./vendor-@petamoriken-D_Z9L4hp.js";import"./vendor-quick-lru-D3vInPgE.js";import"./vendor-pako-CPws4d4z.js";import"./vendor-lerc-BuCIBY1L.js";import"./vendor-zstddec-zw5PE4Vj.js";import"./vendor-web-worker-2oq5GE5I.js";import"./vendor-vue-tel-input-DE59jGiG.js";import"./vendor-@intlify-CQT3u4ju.js";import"./vendor-lodash-es-Cq1PUQc0.js";import"./vendor-@vueuse-CxB6DJuU.js";import"./vendor-@popperjs-D9SI2xQl.js";import"./vendor-@ctrl-r5W6hzzQ.js";import"./vendor-async-validator-DKvM95Vc.js";import"./vendor-memoize-one-BdPwpGay.js";import"./vendor-normalize-wheel-es-B6fDCfyv.js";import"./vendor-@floating-ui-DF51-gJp.js";import"./vendor-vue3-openlayers-B0Azkxjb.js";import"./vendor-ol-contextmenu-DrfnG4qK.js";import"./vendor-ol-ext-CmFRP7G9.js";import"./vendor-ol-fjt3zaQW.js";import"./vendor-rbush-Cid17CXj.js";import"./vendor-quickselect-OUYS7i6-.js";import"./MapFaq-ROIYlRLB.js";import"./VideoPlayer-Dv1wUycj.js";import"./GoBack-6mSNKCGn.js";const Xa={class:"voice"},ja={class:"voice__controls"},Ja={class:"voice__controls_left"},Qa={key:0,class:"voice__membrane"},Ya={class:"voice__waves"},Za={class:"voice__controls_right"},el=ia({__name:"VoicePlayer",props:{externalText:{}},emits:["toggleHelp","send"],setup(Je,{emit:o}){const{locale:Ae}=je(),{t:w}=je(),ee=Je,f={micDenied:g(()=>w("voice.microphoneDenied")),micNotFound:g(()=>w("voice.microphoneNotFound")),browserNoMic:g(()=>w("voice.browserNoMicrophone")),micError:g(()=>w("voice.microphoneError")),browserNoMedia:g(()=>w("voice.browserNoMedia")),allowMic:g(()=>w("voice.allowMicrophone")),micConnected:g(()=>w("voice.microphoneConnected")),browserNoSpeech:g(()=>w("voice.browserNoSpeech")),speechNotSupported:g(()=>w("voice.speechNotSupported")),recognitionInterrupted:g(()=>w("voice.recognitionInterrupted")),speechNotDetected:g(()=>w("voice.speechNotDetected")),recordingStarted:g(()=>w("voice.recordingStarted")),recordingStopped:g(()=>w("voice.recordingStopped")),startRecordError:g(()=>w("voice.startRecordingError")),stopRecordError:g(()=>w("voice.stopRecordingError")),networkIssues:g(()=>w("voice.networkIssues")),error:g(()=>w("voice.error")),textCleared:g(()=>w("voice.textCleared")),messagePlaceholder:g(()=>w("voice.messagePlaceholder"))},R=p(""),y=p(!1),S=p(!1),z=p(!1),E=p(!1),ce=p(!1),L=p(null),de=p(""),ae=p(null),j=p(null),_e=p(null),ne=p(0),we=p(!1),ve=p(null);Le(()=>ee.externalText,m=>{m!=null&&(R.value=m,de.value=m)},{immediate:!0});const Ve=async m=>{try{ve.value=m,ae.value=new AudioContext,j.value=ae.value.createAnalyser();const b=ae.value.createMediaStreamSource(m);j.value.fftSize=256,j.value.smoothingTimeConstant=.8,b.connect(j.value),le()}catch(b){console.error("Error initializing audio analyzer:",b)}},le=()=>{we.value=!0;const m=()=>{if(!j.value||!we.value)return;const b=new Uint8Array(j.value.frequencyBinCount);j.value.getByteFrequencyData(b);let O=0;for(let G=0;G<b.length;G++)O+=b[G];const N=O/b.length;ne.value=Math.min(N/100,1),_e.value=requestAnimationFrame(m)};m()},ye=()=>{we.value=!1,ne.value=0,_e.value&&(cancelAnimationFrame(_e.value),_e.value=null),ve.value&&(ve.value.getTracks().forEach(m=>m.stop()),ve.value=null),ae.value&&(ae.value.close(),ae.value=null),j.value=null},H=()=>{const m=window.SpeechRecognition||window.webkitSpeechRecognition;return z.value=!!m,!!m},x=m=>{ge.error(m)},J=m=>{ge.info(m)},pe=m=>{ge.success(m)},ie=async()=>{var m;if(!((m=navigator.mediaDevices)!=null&&m.getUserMedia))return x(f.browserNoMedia.value),!1;ce.value=!0;try{const b=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1});return await Ve(b),E.value=!1,Se(),pe(f.micConnected.value),!0}catch(b){return E.value=!0,b instanceof Error?b.name==="NotAllowedError"?x(f.micDenied.value):b.name==="NotFoundError"?x(f.micNotFound.value):b.name==="NotSupportedError"?x(f.browserNoMic.value):x(f.micError.value):x(f.micError.value),!1}finally{ce.value=!1}},Se=()=>{if(!H()){x(f.browserNoSpeech.value);return}const m=window.SpeechRecognition||window.webkitSpeechRecognition;if(!m){x(f.speechNotSupported.value);return}L.value=new m,L.value.continuous=!0,L.value.interimResults=!0,L.value.lang=Ae.value,L.value.onstart=()=>{y.value=!0,J(f.recordingStarted.value)},L.value.onresult=b=>{let O="";for(let N=b.resultIndex;N<b.results.length;N++){const G=b.results[N],te=G[0].transcript;G.isFinal?de.value+=te+" ":O+=te}R.value=de.value+O},L.value.onerror=b=>{switch(b.error){case"not-allowed":case"service-not-allowed":E.value=!0,x(f.micDenied.value);break;case"audio-capture":x(f.micNotFound.value);break;case"aborted":x(f.recognitionInterrupted.value);break;case"network":x(f.networkIssues.value);break;case"no-speech":J(f.speechNotDetected.value);break;default:x(`${f.error.value}: ${b.error}`)}ue()},L.value.onend=()=>{y.value&&!S.value&&L.value?setTimeout(()=>{if(y.value&&L.value)try{L.value.start()}catch{ue()}},100):(y.value=!1,J(f.recordingStopped.value))}},me=async()=>{z.value&&(E.value&&!await ie()||(y.value?ue():ke()))},ke=()=>{if(L.value)try{L.value.start(),J(f.recordingStarted.value)}catch(m){m instanceof Error&&(m.message.includes("permission")||m.name==="NotAllowedError")?(E.value=!0,ye(),x(f.allowMic.value)):x(f.startRecordError.value)}},ue=()=>{if(L.value)try{L.value.stop(),y.value=!1,S.value=!1,ye()}catch{x(f.stopRecordError.value)}},be=()=>{R.value="",de.value="",J(f.textCleared.value)},Me=async()=>{var m;try{if(!((m=navigator.mediaDevices)!=null&&m.enumerateDevices)){E.value=!0;return}const O=(await navigator.mediaDevices.enumerateDevices()).some(N=>N.kind==="audioinput"&&N.label!=="");E.value=!O}catch{E.value=!0}};Ge(async()=>{await Me(),Se()}),ua(()=>{ye()});const Qe=o,ze=()=>{Qe("toggleHelp")};return(m,b)=>{const O=B("el-input"),N=B("el-button");return _(),T("div",Xa,[t(O,{modelValue:R.value,"onUpdate:modelValue":b[0]||(b[0]=G=>R.value=G),type:"textarea",placeholder:f.messagePlaceholder.value,rows:6,resize:"none",class:"voice__textarea"},null,8,["modelValue","placeholder"]),a("div",ja,[a("div",Ja,[t(N,{type:"success",onClick:b[1]||(b[1]=G=>m.$emit("send",R.value)),class:"voice__btn voice__btn_help",disabled:!R.value,icon:e(Da),circle:""},null,8,["disabled","icon"]),t(N,{type:"primary",onClick:ze,class:"voice__btn voice__btn_send",icon:e(La),circle:""},null,8,["icon"])]),y.value&&!E.value?(_(),T("div",Qa,[a("div",{class:"voice__visualizer",style:Q({transform:`scale(${.8+ne.value*.4})`,opacity:.7+ne.value*.3})},[a("div",Ya,[(_(),T(q,null,X(3,G=>a("div",{key:G,class:"voice__wave",style:Q({animationDelay:`${G*.2}s`,transform:`scale(${1+ne.value*G*.3})`})},null,4)),64))])],4)])):K("",!0),a("div",Za,[E.value&&z.value?(_(),k(N,{key:0,type:"warning",onClick:ie,class:"voice__btn voice__btn_permission",icon:e(Va),circle:""},null,8,["icon"])):K("",!0),!E.value&&z.value&&y.value?(_(),k(N,{key:1,type:"primary",onClick:me,class:C(["voice__btn",{voice__btn_recording:y.value,voice__btn_disabled:!z.value}]),disabled:!z.value,icon:e(Sa),circle:""},null,8,["class","disabled","icon"])):K("",!0),!E.value&&z.value?(_(),k(N,{key:2,type:"danger",onClick:me,class:C(["voice__btn",{voice__btn_recording:y.value,voice__btn_disabled:!z.value}]),disabled:!z.value,icon:e(Ma),circle:""},null,8,["class","disabled","icon"])):K("",!0),t(N,{type:"danger",onClick:be,class:"voice__btn voice__btn_clear",disabled:!R.value,icon:e(Pa),circle:""},null,8,["disabled","icon"])])])])}}}),na=ra(el,[["__scopeId","data-v-360f4995"]]),al={key:1,class:"map"},ll={class:"map__container container"},tl={class:"map__block"},ol={class:"map__flex list_flex"},sl={key:0,class:"map__left list_left"},nl={class:"map__left_tables list_scroll"},il={class:"map__top"},ul={class:"map__top_flex"},rl={class:"segmented__group",role:"radiogroup"},cl=["onClick","aria-checked"],dl={class:"segmented__label"},_l={class:"map__shadow"},vl={class:"el-table_title"},pl={class:"el-table_count text_four"},ml={class:"el-table_arrow"},bl={class:"table_empty"},fl={key:0,class:"map__bottom"},hl={class:"el-table_bottom_left"},gl={class:"el-table_search"},wl={class:"segmented__group segmented__group_info",role:"radiogroup"},yl=["onClick","aria-checked"],kl={class:"segmented__label"},Cl={class:"map__information"},Tl={class:"map__tab"},xl={class:"info-label"},Nl={class:"info-value"},Dl={class:"map__tab"},Ll={class:"info-label"},Vl={class:"info-value"},Sl={class:"map__tab"},Ml={class:"info-label"},Pl={class:"info-value"},Rl={class:"map__tab"},El={class:"info-label"},$l={class:"info-value"},Fl={class:"map__tab"},Il={class:"info-label"},Gl={class:"info-value"},Al={class:"map__tab"},zl={class:"info-label"},Ol={class:"info-value"},Ul={class:"segmented__group segmented__group_message",role:"radiogroup"},ql=["onClick","aria-checked"],Bl={class:"segmented__label"},Kl={class:"map__shadow"},Hl={class:"table_empty"},Wl={class:"map__bottom"},Xl={class:"el-table_bottom_left"},jl={class:"el-table_search"},Jl={class:"segmented__group segmented__group_notification",role:"radiogroup"},Ql=["onClick","aria-checked"],Yl={class:"segmented__label"},Zl={class:"map__shadow"},et={class:"table_empty"},at={class:"map__bottom"},lt={class:"el-table_bottom_left"},tt={class:"el-table_search"},ot={class:"map__right list_map"},st={key:0,class:"list_select"},nt={class:"el-select_title"},it={class:"el-table_count text_four"},ut={class:"el-select_option"},rt={class:"el-select_empty"},ct={class:"map__openlayers"},dt={key:1,class:"map__tables"},_t={key:0,class:"segmented__group",role:"radiogroup"},vt=["onClick","aria-checked"],pt={class:"segmented__label"},mt={class:"segmented__group segmented__group_info",role:"radiogroup"},bt=["onClick","aria-checked"],ft={class:"segmented__label"},ht={class:"map__information"},gt={class:"map__tab"},wt={class:"info-label"},yt={class:"info-value"},kt={class:"map__tab"},Ct={class:"info-label"},Tt={class:"info-value"},xt={class:"map__tab"},Nt={class:"info-label"},Dt={class:"info-value"},Lt={class:"map__tab"},Vt={class:"info-label"},St={class:"info-value"},Mt={class:"map__tab"},Pt={class:"info-label"},Rt={class:"info-value"},Et={class:"map__tab"},$t={class:"info-label"},Ft={class:"info-value"},It={class:"segmented__group segmented__group_message",role:"radiogroup"},Gt=["onClick","aria-checked"],At={class:"segmented__label"},zt={class:"map__shadow"},Ot={class:"table_empty"},Ut={class:"map__bottom"},qt={class:"el-table_bottom_left"},Bt={class:"el-table_search"},Kt={class:"segmented__group segmented__group_notification",role:"radiogroup"},Ht=["onClick","aria-checked"],Wt={class:"segmented__label"},Xt={class:"map__shadow"},jt={class:"table_empty"},Jt={class:"map__bottom"},Qt={class:"el-table_bottom_left"},Yt={class:"el-table_search"},Zt={class:"map_add__scroll popup__scroll_buttons"},eo={class:"map_add__block popup__block"},ao={class:"map_add__head popup__head"},lo={class:"transfer__option text_three transfer__option_three_four"},to={class:"transfer__switch"},oo={class:"transfer__footer text_three transfer__footer_three"},so={class:"transfer__footer text_three transfer__footer_four"},no={class:"popup__buttons"},io={class:"map_disband__scroll popup__scroll_buttons"},uo={class:"map_disband__block popup__block"},ro={class:"map_disband__head popup__head"},co={class:"popup__buttons"},_o={class:"map_delete__scroll popup__scroll_buttons"},vo={class:"map_delete__block popup__block"},po={class:"map_delete__head popup__head"},mo={class:"popup__buttons"},bo={class:"map_voice__scroll popup__scroll_buttons"},fo={class:"map_voice__block popup__block"},ho={class:"map_voice__head popup__head"},go={key:0,class:"map_voice__preview"},wo={class:"map_voice__preview_text"},yo={class:"map_voice__form"},ko={class:"map_voice__flex"},Co={class:"map_voice__flex"},To={key:0,class:"map_voice__flex"},xo={class:"map_voice__label text_two"},No={class:"popup__buttons"},Do=ia({__name:"Map",setup(Je){const{t:o}=je(),Ae=p(!1),w=p("info"),ee=p("locomotive"),f=p("all"),R=p("all"),y=p({info:!0,message:!1,notification:!1}),S=p({locomotive:!0,information:!1,location:!1,fuel:!1,energy:!1,krpd:!1}),z=[{iconComponent:Ia,value:"info",label:"Info"},{iconComponent:Ke,value:"message",label:"Message"},{iconComponent:Ga,value:"notification",label:"Notification"}],E=[{iconComponent:Xe,value:"locomotive",label:"Locomotive"},{iconComponent:Aa,value:"information",label:"Information"},{iconComponent:za,value:"location",label:"Location"},{iconComponent:Ka,value:"fuel",label:"Fuel"},{iconComponent:Ha,value:"energy",label:"Energy"},{iconComponent:Wa,value:"krpd",label:"Krpd"}],ce=[{iconComponent:sa,value:"all",label:"all"},{iconComponent:Xe,value:"selected",label:"selected"}],L=[{iconComponent:sa,value:"all",label:"all"},{iconComponent:Xe,value:"selected",label:"selected"}],de=g(()=>{const i=z.findIndex(r=>r.value===w.value);return{width:`${100/z.length}%`,transform:`translateX(${i*100}%)`}}),ae=g(()=>{const i=E.findIndex(r=>r.value===ee.value);return{width:`${100/E.length}%`,transform:`translateX(${i*100}%)`}}),j=g(()=>{const i=ce.findIndex(r=>r.value===f.value);return{width:`${100/ce.length}%`,transform:`translateX(${i*100}%)`}}),_e=g(()=>{const i=L.findIndex(r=>r.value===R.value);return{width:`${100/L.length}%`,transform:`translateX(${i*100}%)`}}),ne=(i,n)=>{n.preventDefault(),n.stopPropagation(),w.value=i},we=(i,n)=>{n.preventDefault(),n.stopPropagation(),ee.value=i},ve=(i,n)=>{n.preventDefault(),n.stopPropagation(),f.value=i},Ve=(i,n)=>{n.preventDefault(),n.stopPropagation(),R.value=i};Le(w,i=>{Object.keys(y.value).forEach(n=>{y.value[n]=!1}),y.value[i]=!0}),Le(ee,i=>{Object.keys(S.value).forEach(n=>{S.value[n]=!1}),S.value[i]=!0});const le=p(window.innerWidth),ye=()=>{le.value=window.innerWidth};Ge(()=>{window.addEventListener("resize",ye)}),ua(()=>{window.removeEventListener("resize",ye)});const H=p(!1),x=p(!1),J=p(!1),pe=p(!1),ie=p(!1),Se=()=>{x.value=!1,J.value=!1,pe.value=!1,ie.value=!1,H.value=!1,document.documentElement.classList.remove("noscroll")},me=()=>{x.value=!x.value,H.value=!H.value,x.value?document.documentElement.classList.add("noscroll"):document.documentElement.classList.remove("noscroll")},ke=()=>{J.value=!J.value,H.value=!H.value,J.value?document.documentElement.classList.add("noscroll"):document.documentElement.classList.remove("noscroll")},ue=()=>{pe.value=!pe.value,H.value=!H.value,pe.value?document.documentElement.classList.add("noscroll"):document.documentElement.classList.remove("noscroll")},be=()=>{ie.value=!ie.value,H.value=!H.value,ie.value?document.documentElement.classList.add("noscroll"):document.documentElement.classList.remove("noscroll")},Me=p([]),ze=p((()=>{const i=[],n=["0001","0002","0003","0004","0005"],r=["Серия А","Серия Б","Серия В","Серия Г","Серия Д"],d=["Сцепка 1","Сцепка 2","Сцепка 3","Сцепка 4","Сцепка 5"];return n.forEach((v,h)=>{i.push({label:v,key:h,initial:r[h],number:v,series:r[h],coupling:d[h],nudge:!1})}),i})()),m=(i,n)=>{var d,v,h,F;const r=i.toLowerCase();return((d=n.number)==null?void 0:d.toLowerCase().includes(r))||((v=n.series)==null?void 0:v.toLowerCase().includes(r))||((h=n.initial)==null?void 0:h.toLowerCase().includes(r))||((F=n.label)==null?void 0:F.toLowerCase().includes(r))},b=p(""),O=g(()=>{let i=Ce;return b.value&&(i=i.filter(n=>{var r,d,v;return((r=n.type)==null?void 0:r.toLowerCase().includes(b.value.toLowerCase()))||((d=n.number)==null?void 0:d.toLowerCase().includes(b.value.toLowerCase()))||((v=n.status)==null?void 0:v.toLowerCase().includes(b.value.toLowerCase()))})),i}),N=p(""),G=g(()=>{if(f.value==="selected"&&!D.value)return[];let i=ga.value;if(f.value==="selected"&&D.value&&(i=i.filter(n=>{var r;return n.number===((r=D.value)==null?void 0:r.number)})),N.value){const n=N.value.toLowerCase();i=i.filter(r=>{var d,v,h,F;return((d=r.dateTime)==null?void 0:d.toLowerCase().includes(n))||((v=r.series)==null?void 0:v.toLowerCase().includes(n))||((h=r.number)==null?void 0:h.toLowerCase().includes(n))||((F=r.notification.tooltip)==null?void 0:F.toLowerCase().includes(n))})}return i}),te=p(""),Ye=g(()=>{if(R.value==="selected"&&!D.value)return[];let i=wa.value;if(R.value==="selected"&&D.value&&(i=i.filter(n=>{var r;return n.number===((r=D.value)==null?void 0:r.number)})),te.value){const n=te.value.toLowerCase();i=i.filter(r=>{var d,v,h,F,Re,se;return((d=r.messageText)==null?void 0:d.toLowerCase().includes(n))||((v=r.created)==null?void 0:v.toLowerCase().includes(n))||((h=r.delivered)==null?void 0:h.toLowerCase().includes(n))||((F=r.read)==null?void 0:F.toLowerCase().includes(n))||((Re=r.series)==null?void 0:Re.toLowerCase().includes(n))||((se=r.number)==null?void 0:se.toLowerCase().includes(n))})}return i}),fe=p(null),D=p(),he=p(""),Te=p(!0),U=p(null),$=({rowIndex:i})=>i%2===1?"bg_gray":"",ca=i=>{var n;((n=D.value)==null?void 0:n.id)===i.id?U.value&&U.value.moveToLocomotive&&U.value.moveToLocomotive(i):(D.value=i,fe.value&&fe.value.setCurrentRow(i))},da=i=>{var n;(i==null?void 0:i.id)!==((n=D.value)==null?void 0:n.id)&&(D.value=i)},_a=i=>{if(i&&i.id){const n=Ce.find(r=>r.id===i.id);n&&(D.value=n,he.value=n.id.toString(),U.value&&U.value.moveToLocomotive&&U.value.moveToLocomotive(n),le.value>=1280&&fe.value&&fe.value.setCurrentRow(n))}else D.value=void 0,he.value="",le.value>=1280&&fe.value&&fe.value.setCurrentRow()},va=()=>{Te.value=!Te.value},pa=i=>{var r;if(!i){D.value=void 0;return}const n=Ce.find(d=>{var v;return((v=d.id)==null?void 0:v.toString())===i});if(n){if(n.id===((r=D.value)==null?void 0:r.id)){U.value&&U.value.moveToLocomotive&&U.value.moveToLocomotive(n);return}D.value=n,U.value&&U.value.moveToLocomotive&&U.value.moveToLocomotive(n)}},ma=i=>{b.value=i};Le(he,i=>{if(i){const n=Ce.find(r=>{var d;return((d=r.id)==null?void 0:d.toString())===i});n&&(D.value=n)}else D.value=void 0}),Le(D,i=>{i&&i.id?he.value=i.id.toString():he.value=""});const u=g(()=>D.value?Ce.find(n=>{var r;return n.id===((r=D.value)==null?void 0:r.id)})||{}:{}),Ze=i=>({warning:He,info:Fe,error:We,success:De})[i]||Fe,xe=p("permissive"),oe=p("Название станции"),A=p(""),Y=p(!0),Pe=p(""),W=p("follow_to_station"),Oe=g(()=>xe.value?ka[xe.value]||[]:[]),ba=()=>{Ue()},fa=()=>{Oe.value.length>0&&(W.value=Oe.value[0].value,Ue())},Ue=()=>{switch(W.value){case"follow_to_station":oe.value="Название станции",Y.value=!0;break;case"pass_red_signal":oe.value="Номер светофора",Y.value=!0;break;case"enter_station":oe.value="Номер пути",Y.value=!0;break;case"stop_at_signal":oe.value="Номер светофора",Y.value=!0;break;case"dont_depart":Y.value=!1,A.value="";break;case"speed_limit_40":oe.value="Название перегона",Y.value=!0;break;case"track_works":oe.value="Номер пути",Y.value=!0;break;case"check_brakes":Y.value=!1,A.value="";break;default:oe.value="Название станции",Y.value=!0}},ea=()=>W.value==="follow_to_station"&&A.value?`Следовать до станции ${A.value} по главному пути`:W.value==="pass_red_signal"&&A.value?`Проехать запрещающий сигнал ${A.value} с уменьшенной скоростью`:W.value==="enter_station"&&A.value?`Въезд на станцию разрешаю по пути ${A.value}`:W.value==="stop_at_signal"&&A.value?`Остановиться у сигнала ${A.value}, ожидать указаний`:W.value==="dont_depart"?"Не отправляться со станции до получения разрешения":W.value==="speed_limit_40"&&A.value?`Ограничение скорости: не более 40 км/ч на перегоне ${A.value}`:W.value==="track_works"&&A.value?`Работы на пути ${A.value}, снизить скорость до 25 км/ч`:W.value==="check_brakes"?"Проверить работоспособность тормозов":"",ha=async()=>{const i=ea();i&&(Pe.value="",await Na(),Pe.value=i,be())},aa=g(()=>ea());Ge(()=>{Ue()});const la=i=>{console.log("Отправка голосового сообщения:",i)},Ce=[{id:1,type:"0001",number:"0001",status:"Эксплуатация",series:"Серия А",tabNumber:"12345",workType:"Эксплуатация",weight:"120 т",carNumber:"15",axisNumber:"6",cargoType:"Уголь",carCount:"50",cargoMass:"3000 т",bortDate:"2024-01-15",bortTime:"14:30:25",speed:"80 км/ч",stopTime:"5 мин",pressure:"8.5 бар",LSlight:"Зеленый",latitude:"53.1950",longitude:"45.0183",geozone:"Пензенская",rfid:"RFID-12345",path:"Путь №3",fuelVolume:"5000 л",fuelTemp:"+20°C",fuelDensity:"0.85 г/см³",fuelMass:"4250 кг",instantPowerActive:"1500 кВт",instantPowerReactive:"300 кВар",instantPowerFull:"1530 кВА",voltage:"3000 В",current:"500 А",voltageTG:"2800 В",currentTG:"480 А",powerTG:"1344 кВт",oilPressure:"4.2 бар",oilTemp:"75°C",waterTemp:"85°C",pressureNV:"7.8 бар",frequency:"50 Гц",positionKM:"125.3 км"},{id:2,type:"0002",number:"0002",status:"В ремонте",series:"Серия Б",tabNumber:"23456",workType:"Ремонт",weight:"115 т",carNumber:"12",axisNumber:"6",cargoType:"Руда",carCount:"40",cargoMass:"2800 т",bortDate:"2024-01-14",bortTime:"10:15:30",speed:"0 км/ч",stopTime:"120 мин",pressure:"7.8 бар",LSlight:"Красный",latitude:"53.2000",longitude:"45.0250",geozone:"Пензенская",rfid:"RFID-23456",path:"Путь №1",fuelVolume:"4500 л",fuelTemp:"+18°C",fuelDensity:"0.86 г/см³",fuelMass:"3870 кг",instantPowerActive:"0 кВт",instantPowerReactive:"0 кВар",instantPowerFull:"0 кВА",voltage:"0 В",current:"0 А",voltageTG:"0 В",currentTG:"0 А",powerTG:"0 кВт",oilPressure:"3.8 бар",oilTemp:"65°C",waterTemp:"70°C",pressureNV:"7.2 бар",frequency:"0 Гц",positionKM:"130.5 км"},{id:3,type:"0003",number:"0003",status:"Резерв",series:"Серия В",tabNumber:"34567",workType:"Резерв",weight:"125 т",carNumber:"18",axisNumber:"6",cargoType:"Нефтепродукты",carCount:"35",cargoMass:"2500 т",bortDate:"2024-01-15",bortTime:"08:45:15",speed:"0 км/ч",stopTime:"60 мин",pressure:"8.0 бар",LSlight:"Желтый",latitude:"53.1900",longitude:"45.0100",geozone:"Пензенская",rfid:"RFID-34567",path:"Путь №5",fuelVolume:"5200 л",fuelTemp:"+22°C",fuelDensity:"0.84 г/см³",fuelMass:"4368 кг",instantPowerActive:"200 кВт",instantPowerReactive:"50 кВар",instantPowerFull:"206 кВА",voltage:"2800 В",current:"70 А",voltageTG:"2700 В",currentTG:"75 А",powerTG:"202 кВт",oilPressure:"4.0 бар",oilTemp:"70°C",waterTemp:"75°C",pressureNV:"7.5 бар",frequency:"48 Гц",positionKM:"128.1 км"},{id:4,type:"0004",number:"0004",status:"Эксплуатация",series:"Серия Г",tabNumber:"45678",workType:"Эксплуатация",weight:"118 т",carNumber:"20",axisNumber:"6",cargoType:"Контейнеры",carCount:"30",cargoMass:"1800 т",bortDate:"2024-01-15",bortTime:"16:20:45",speed:"95 км/ч",stopTime:"2 мин",pressure:"8.8 бар",LSlight:"Зеленый",latitude:"53.1850",longitude:"45.0150",geozone:"Пензенская",rfid:"RFID-45678",path:"Путь №2",fuelVolume:"4800 л",fuelTemp:"+25°C",fuelDensity:"0.83 г/см³",fuelMass:"3984 кг",instantPowerActive:"1800 кВт",instantPowerReactive:"350 кВар",instantPowerFull:"1834 кВА",voltage:"3100 В",current:"580 А",voltageTG:"2950 В",currentTG:"610 А",powerTG:"1800 кВт",oilPressure:"4.5 бар",oilTemp:"80°C",waterTemp:"90°C",pressureNV:"8.2 бар",frequency:"52 Гц",positionKM:"122.7 км"},{id:5,type:"0005",number:"0005",status:"Эксплуатация",series:"Серия Д",tabNumber:"56789",workType:"Эксплуатация",weight:"130 т",carNumber:"25",axisNumber:"8",cargoType:"Лес",carCount:"45",cargoMass:"3200 т",bortDate:"2024-01-15",bortTime:"12:10:20",speed:"75 км/ч",stopTime:"10 мин",pressure:"8.2 бар",LSlight:"Зеленый",latitude:"53.2050",longitude:"45.0300",geozone:"Пензенская",rfid:"RFID-56789",path:"Путь №4",fuelVolume:"5500 л",fuelTemp:"+19°C",fuelDensity:"0.87 г/см³",fuelMass:"4785 кг",instantPowerActive:"1600 кВт",instantPowerReactive:"280 кВар",instantPowerFull:"1624 кВА",voltage:"2900 В",current:"550 А",voltageTG:"2750 В",currentTG:"520 А",powerTG:"1430 кВт",oilPressure:"4.3 бар",oilTemp:"78°C",waterTemp:"88°C",pressureNV:"8.0 бар",frequency:"51 Гц",positionKM:"126.8 км"}],ga=p([{id:1,dateTime:"2024-01-15 14:30:25",series:"Серия А",number:"0001",notification:{icon:"warning",tooltip:"Превышение скорости"}},{id:2,dateTime:"2024-01-15 12:15:10",series:"Серия Б",number:"0002",notification:{icon:"info",tooltip:"Низкий уровень топлива"}},{id:3,dateTime:"2024-01-15 10:05:45",series:"Серия В",number:"0003",notification:{icon:"error",tooltip:"Неисправность двигателя"}},{id:4,dateTime:"2024-01-15 08:20:30",series:"Серия Г",number:"0004",notification:{icon:"success",tooltip:"Система в норме"}}]),wa=p([{id:1,messageText:"Проверка системы",created:"2024-01-15 14:30:25",delivered:"2024-01-15 14:31:00",read:"2024-01-15 14:32:15",series:"Серия А",number:"0001"},{id:2,messageText:"Обновление прошивки",created:"2024-01-15 12:15:10",delivered:"2024-01-15 12:16:05",read:"2024-01-15 12:20:30",series:"Серия Б",number:"0002"},{id:3,messageText:"Техническое обслуживание",created:"2024-01-15 10:05:45",delivered:"2024-01-15 10:06:20",read:"",series:"Серия А",number:"0001"},{id:4,messageText:"Системное уведомление",created:"2024-01-15 08:20:30",delivered:"2024-01-15 08:21:00",read:"2024-01-15 08:25:45",series:"Серия В",number:"0003"}]),ya=[{value:"permissive",label:"Разрешающие команды"},{value:"restrictive",label:"Ограничивающие и запрещающие команды"},{value:"notifications",label:"Оповещения/Предупреждения"}],ka={permissive:[{value:"follow_to_station",label:"Следовать до станции по главному пути"},{value:"pass_red_signal",label:"Проехать запрещающий сигнал с уменьшенной скоростью"},{value:"enter_station",label:"Въезд на станцию разрешаю"}],restrictive:[{value:"stop_at_signal",label:"Остановиться у сигнала, ожидать указаний"},{value:"dont_depart",label:"Не отправляться со станции до получения разрешения"},{value:"speed_limit_40",label:"Ограничение скорости: не более 40 км/ч на перегоне"}],notifications:[{value:"track_works",label:"Работы на пути, снизить скорость до 25 км/ч"},{value:"check_brakes",label:"Проверить работоспособность тормозов"}]},Ca=async()=>{try{const i=await $e("get","/api/devices",{});console.log(i)}catch(i){ge({message:i.message,type:"error"})}try{const i=await $e("post","/api/history",{messageType:"locomotive",params:{locoNo:1,locoType:2,dataPacked:0,dateTimeBeg:"2024-01-15 00:00:00",dateTimeEnd:"2024-01-15 23:59:59",mode:1}});console.log(i)}catch(i){ge({message:i.message,type:"error"})}try{const i=await $e("post","/api/notices",{dateTimeBeg:"2024-01-15 00:00:00",dateTimeEnd:"2024-01-15 23:59:59",locoNo:1,locoType:1,noticeType:1});console.log(i)}catch(i){ge({message:i.message,type:"error"})}try{const i=await $e("post","/api/history-summary",{messageType:"summary",params:{locoNo:1,locoType:2,dataPacked:0,dateTimeBeg:"2024-01-15 00:00:00",dateTimeEnd:"2024-01-15 23:59:59",mode:1}});console.log(i)}catch(i){ge({message:i.message,type:"error"})}};return Ge(()=>{Ca()}),(i,n)=>{const r=B("el-icon"),d=B("el-table-column"),v=B("el-tooltip"),h=B("el-table"),F=B("el-button"),Re=B("el-button-group"),se=B("el-input"),qe=B("el-option"),Be=B("el-select"),Ta=B("el-switch"),xa=B("el-transfer");return _(),T(q,null,[t(Oa),Ae.value?(_(),k(Ba,{key:0})):(_(),T("section",al,[a("div",ll,[a("div",tl,[a("div",ol,[le.value>=1280?(_(),T("div",sl,[a("div",nl,[a("div",il,[a("div",ul,[a("div",rl,[a("div",{class:"segmented__indicator",style:Q(de.value)},null,4),(_(),T(q,null,X(z,l=>a("button",{key:l.value,class:C(["segmented__item",{"is-selected":w.value===l.value}]),onClick:I(V=>ne(l.value,V),["prevent"]),onMousedown:n[0]||(n[0]=I(()=>{},["prevent"])),type:"button",role:"radio","aria-checked":w.value===l.value},[a("div",dl,[(_(),k(Z(l.iconComponent),{class:"segmented__icon text_two"}))])],42,cl)),64))])])]),a("div",_l,[t(h,{ref_key:"oneTableRef",ref:fe,data:O.value,"highlight-current-row":"","row-class-name":$,onCurrentChange:da,onRowClick:ca,style:Q({maxHeight:Te.value?"240px":"25px"}),"max-height":"240",border:""},{empty:s(()=>[a("div",bl,c(e(o)("table.noData")),1)]),default:s(()=>[t(d,{"header-align":"center"},{header:s(()=>[a("span",{class:C(["el-table_top",{active:Te.value}]),onClick:va},[a("span",vl,[Ee(c(e(o)("table.listLoco"))+" - ",1),a("span",pl,c(O.value.length),1)]),a("span",ml,[t(r,null,{default:s(()=>[t(e(Ra))]),_:1})])],2)]),default:s(()=>[t(d,{property:"type",sortable:"",label:e(o)("table.type")},null,8,["label"]),t(d,{property:"number",sortable:"",label:e(o)("table.number")},null,8,["label"]),t(d,{property:"status",label:e(o)("table.status"),width:"75px"},{default:s(l=>[l.row.status?(_(),k(v,{key:0,content:l.row.status,placement:"top"},{default:s(()=>[t(r,{class:"el-table_icon"},{default:s(()=>[t(e(Fe))]),_:1})]),_:2},1032,["content"])):K("",!0)]),_:1},8,["label"])]),_:1})]),_:1},8,["data","style"]),Te.value?(_(),T("div",fl,[a("div",hl,[t(Re,{class:"el-table_buttons"},{default:s(()=>[t(F,{type:"primary",class:"el-table_button",icon:e(Ea),title:e(o)("button.addComposition"),onClick:me},null,8,["icon","title"]),t(F,{type:"primary",class:"el-table_button",icon:e($a),title:e(o)("button.disbandComposition"),onClick:ke},null,8,["icon","title"]),t(F,{type:"danger",class:"el-table_button",icon:e(Fa),title:e(o)("button.deleteComposition"),onClick:ue},null,8,["icon","title"])]),_:1}),a("div",gl,[t(se,{modelValue:b.value,"onUpdate:modelValue":n[1]||(n[1]=l=>b.value=l),placeholder:e(o)("sort.search")},{prepend:s(()=>[t(F,{icon:e(Ne),title:e(o)("sort.search")},null,8,["icon","title"])]),_:1},8,["modelValue","placeholder"])])])])):K("",!0)]),M(a("div",{class:C(["map__left_table",{active:y.value.info}])},[a("div",wl,[a("div",{class:"segmented__indicator",style:Q(ae.value)},null,4),(_(),T(q,null,X(E,l=>a("button",{key:l.value,class:C(["segmented__item",{"is-selected":ee.value===l.value}]),onClick:I(V=>we(l.value,V),["prevent"]),onMousedown:n[2]||(n[2]=I(()=>{},["prevent"])),type:"button",role:"radio","aria-checked":ee.value===l.value},[a("div",kl,[(_(),k(Z(l.iconComponent),{class:"segmented__icon text_two"}))])],42,yl)),64))]),a("div",Cl,[M(a("div",Tl,[t(h,{data:[{label:e(o)("table.series"),value:u.value.series},{label:e(o)("table.number"),value:u.value.number},{label:e(o)("table.tabNumber"),value:u.value.tabNumber},{label:e(o)("table.workType"),value:u.value.workType},{label:e(o)("table.weight"),value:u.value.weight},{label:e(o)("table.carNumber"),value:u.value.carNumber},{label:e(o)("table.axisNumber"),value:u.value.axisNumber},{label:e(o)("table.cargoType"),value:u.value.cargoType},{label:e(o)("table.carCount"),value:u.value.carCount},{label:e(o)("table.cargoMass"),value:u.value.cargoMass}],border:"","show-header":!1,"row-class-name":$},{default:s(()=>[t(d,null,{default:s(l=>[a("span",xl,c(l.row.label),1),a("span",Nl,c(l.row.value),1)]),_:1})]),_:1},8,["data"])],512),[[P,S.value.locomotive]]),M(a("div",Dl,[t(h,{data:[{label:e(o)("table.bortDate"),value:u.value.bortDate},{label:e(o)("table.bortTime"),value:u.value.bortTime},{label:e(o)("table.speed"),value:u.value.speed},{label:e(o)("table.stopTime"),value:u.value.stopTime},{label:e(o)("table.pressure"),value:u.value.pressure},{label:e(o)("table.LSlight"),value:u.value.LSlight}],border:"","show-header":!1,"row-class-name":$},{default:s(()=>[t(d,null,{default:s(l=>[a("span",Ll,c(l.row.label),1),a("span",Vl,c(l.row.value),1)]),_:1})]),_:1},8,["data"])],512),[[P,S.value.information]]),M(a("div",Sl,[t(h,{data:[{label:e(o)("table.latitude"),value:u.value.latitude},{label:e(o)("table.longitude"),value:u.value.longitude},{label:e(o)("table.geozone"),value:u.value.geozone},{label:"RFID",value:u.value.rfid},{label:e(o)("table.path"),value:u.value.path}],border:"","show-header":!1,"row-class-name":$},{default:s(()=>[t(d,null,{default:s(l=>[a("span",Ml,c(l.row.label),1),a("span",Pl,c(l.row.value),1)]),_:1})]),_:1},8,["data"])],512),[[P,S.value.location]]),M(a("div",Rl,[t(h,{data:[{label:e(o)("table.volume"),value:u.value.fuelVolume},{label:e(o)("table.temp"),value:u.value.fuelTemp},{label:e(o)("table.density"),value:u.value.fuelDensity},{label:e(o)("table.mass"),value:u.value.fuelMass}],border:"","show-header":!1,"row-class-name":$},{default:s(()=>[t(d,null,{default:s(l=>[a("span",El,c(l.row.label),1),a("span",$l,c(l.row.value),1)]),_:1})]),_:1},8,["data"])],512),[[P,S.value.fuel]]),M(a("div",Fl,[t(h,{data:[{label:e(o)("table.instantPowerActive"),value:u.value.instantPowerActive},{label:e(o)("table.instantPowerReactive"),value:u.value.instantPowerReactive},{label:e(o)("table.instantPowerFull"),value:u.value.instantPowerFull},{label:e(o)("table.voltage"),value:u.value.voltage},{label:e(o)("table.current"),value:u.value.current}],border:"","show-header":!1,"row-class-name":$},{default:s(()=>[t(d,null,{default:s(l=>[a("span",Il,c(l.row.label),1),a("span",Gl,c(l.row.value),1)]),_:1})]),_:1},8,["data"])],512),[[P,S.value.energy]]),M(a("div",Al,[t(h,{data:[{label:e(o)("table.voltageTG"),value:u.value.voltageTG},{label:e(o)("table.currentTG"),value:u.value.currentTG},{label:e(o)("table.powerTG"),value:u.value.powerTG},{label:e(o)("table.oilPressure"),value:u.value.oilPressure},{label:e(o)("table.oilTemp"),value:u.value.oilTemp},{label:e(o)("table.waterTemp"),value:u.value.waterTemp},{label:e(o)("table.pressureNV"),value:u.value.pressureNV},{label:e(o)("table.frequency"),value:u.value.frequency},{label:e(o)("table.positionKM"),value:u.value.positionKM}],border:"","show-header":!1,"row-class-name":$},{default:s(()=>[t(d,null,{default:s(l=>[a("span",zl,c(l.row.label),1),a("span",Ol,c(l.row.value),1)]),_:1})]),_:1},8,["data"])],512),[[P,S.value.krpd]])])],2),[[P,y.value.info]]),M(a("div",{class:C(["map__left_table",{active:y.value.message}])},[t(na,{onToggleHelp:be,"external-text":Pe.value,onSend:la},null,8,["external-text"]),a("div",Ul,[a("div",{class:"segmented__indicator",style:Q(_e.value)},null,4),(_(),T(q,null,X(L,l=>a("button",{key:l.value,class:C(["segmented__item",{"is-selected":R.value===l.value}]),onClick:I(V=>Ve(l.value,V),["prevent"]),onMousedown:n[3]||(n[3]=I(()=>{},["prevent"])),type:"button",role:"radio","aria-checked":R.value===l.value},[a("div",Bl,[(_(),k(Z(l.iconComponent),{class:"segmented__icon text_two",title:l.label},null,8,["title"]))])],42,ql)),64))]),a("div",Kl,[t(h,{data:Ye.value,border:"","row-class-name":$,"max-height":"400"},{empty:s(()=>[a("div",Hl,c(e(o)("table.noData")),1)]),default:s(()=>[t(d,{prop:"messageText",sortable:"","min-width":"120"},{header:s(()=>[t(v,{content:e(o)("table.message"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(Ke))]),_:1})]),_:1},8,["content"])]),_:1}),t(d,{prop:"created",sortable:"","min-width":"95"},{header:s(()=>[t(v,{content:e(o)("table.created"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(re))]),_:1})]),_:1},8,["content"])]),default:s(l=>[a("span",null,c(l.row.created),1)]),_:1}),t(d,{prop:"delivered",width:"43"},{header:s(()=>[t(v,{content:e(o)("table.delivered"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(re))]),_:1})]),_:1},8,["content"])]),default:s(l=>[l.row.delivered?(_(),k(v,{key:0,content:l.row.delivered,placement:"top"},{default:s(()=>[t(r,{class:"el-table_icon el-success"},{default:s(()=>[t(e(De))]),_:1})]),_:2},1032,["content"])):(_(),k(v,{key:1,content:e(o)("table.notDelivered"),placement:"top"},{default:s(()=>[t(r,{class:"el-table_icon el-warning"},{default:s(()=>[t(e(He))]),_:1})]),_:1},8,["content"]))]),_:1}),t(d,{prop:"read",width:"43"},{header:s(()=>[t(v,{content:e(o)("table.read"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(re))]),_:1})]),_:1},8,["content"])]),default:s(l=>[l.row.read?(_(),k(v,{key:0,content:l.row.read,placement:"top"},{default:s(()=>[t(r,{class:"el-table_icon el-success"},{default:s(()=>[t(e(De))]),_:1})]),_:2},1032,["content"])):(_(),k(v,{key:1,content:e(o)("table.notRead"),placement:"top"},{default:s(()=>[t(r,{class:"el-table_icon el-error"},{default:s(()=>[t(e(We))]),_:1})]),_:1},8,["content"]))]),_:1})]),_:1},8,["data"]),a("div",Wl,[a("div",Xl,[a("div",jl,[t(se,{modelValue:te.value,"onUpdate:modelValue":n[4]||(n[4]=l=>te.value=l),placeholder:e(o)("sort.search")},{prepend:s(()=>[t(F,{icon:e(Ne),title:e(o)("sort.search")},null,8,["icon","title"])]),_:1},8,["modelValue","placeholder"])])])])])],2),[[P,y.value.message]]),M(a("div",{class:C(["map__left_table",{active:y.value.notification}])},[a("div",Jl,[a("div",{class:"segmented__indicator",style:Q(j.value)},null,4),(_(),T(q,null,X(ce,l=>a("button",{key:l.value,class:C(["segmented__item",{"is-selected":f.value===l.value}]),onClick:I(V=>ve(l.value,V),["prevent"]),onMousedown:n[5]||(n[5]=I(()=>{},["prevent"])),type:"button",role:"radio","aria-checked":f.value===l.value},[a("div",Yl,[(_(),k(Z(l.iconComponent),{class:"segmented__icon text_two",title:l.label},null,8,["title"]))])],42,Ql)),64))]),a("div",Zl,[t(h,{data:G.value,border:"","row-class-name":$,"max-height":"400"},{empty:s(()=>[a("div",et,c(e(o)("table.noData")),1)]),default:s(()=>[t(d,{prop:"dateTime",sortable:"","min-width":"100"},{header:s(()=>[t(v,{content:e(o)("table.dateNumber"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(re))]),_:1})]),_:1},8,["content"])]),_:1}),t(d,{prop:"series",sortable:"","min-width":"80"},{header:s(()=>[t(v,{content:e(o)("table.series"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(ta))]),_:1})]),_:1},8,["content"])]),_:1}),t(d,{prop:"number",sortable:"","min-width":"60"},{header:s(()=>[t(v,{content:e(o)("table.number"),placement:"top"},{default:s(()=>n[19]||(n[19]=[Ee(" № ")])),_:1},8,["content"])]),_:1}),t(d,{width:"43",align:"center"},{header:s(()=>[t(v,{content:e(o)("table.notification"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(oa))]),_:1})]),_:1},8,["content"])]),default:s(l=>[t(v,{content:l.row.notification.tooltip,placement:"top"},{default:s(()=>[t(r,{class:C(["el-table_icon",`notification__${l.row.notification.icon}`])},{default:s(()=>[(_(),k(Z(Ze(l.row.notification.icon))))]),_:2},1032,["class"])]),_:2},1032,["content"])]),_:1})]),_:1},8,["data"]),a("div",at,[a("div",lt,[a("div",tt,[t(se,{modelValue:N.value,"onUpdate:modelValue":n[6]||(n[6]=l=>N.value=l),placeholder:e(o)("sort.search")},{prepend:s(()=>[t(F,{icon:e(Ne),title:e(o)("sort.search")},null,8,["icon","title"])]),_:1},8,["modelValue","placeholder"])])])])])],2),[[P,y.value.notification]])])])):K("",!0),a("div",ot,[le.value<=1279?(_(),T("div",st,[a("p",nt,[Ee(c(e(o)("table.listLoco"))+" - ",1),a("span",it,c(O.value.length),1)]),t(Be,{modelValue:he.value,"onUpdate:modelValue":n[7]||(n[7]=l=>he.value=l),filterable:"",placeholder:e(o)("button.select"),onChange:pa,"filter-method":ma,class:"segmented__select"},{empty:s(()=>[a("div",rt,c(e(o)("table.noData")),1)]),default:s(()=>[(_(!0),T(q,null,X(O.value,l=>{var V;return _(),k(qe,{key:l.id,label:`${l.type} - ${l.number}`,value:((V=l.id)==null?void 0:V.toString())||""},{default:s(()=>[a("div",ut,[a("span",null,c(l.type),1),a("span",null,c(l.number),1),l.status?(_(),k(v,{key:0,content:l.status,placement:"top"},{default:s(()=>[t(r,{class:"el-select_option_right"},{default:s(()=>[t(e(Fe))]),_:1})]),_:2},1032,["content"])):K("",!0)])]),_:2},1032,["label","value"])}),128))]),_:1},8,["modelValue","placeholder"])])):K("",!0),a("div",ct,[t(Ua,{ref_key:"mapComponent",ref:U,"locomotive-data":Ce,"selected-locomotive":D.value,onLocomotiveClick:_a},null,8,["selected-locomotive"])]),le.value<=1279?(_(),T("div",dt,[le.value<=1279?(_(),T("div",_t,[a("div",{class:"segmented__indicator",style:Q(de.value)},null,4),(_(),T(q,null,X(z,l=>a("button",{key:l.value,class:C(["segmented__item",{"is-selected":w.value===l.value}]),onClick:I(V=>ne(l.value,V),["prevent"]),onMousedown:n[8]||(n[8]=I(()=>{},["prevent"])),type:"button",role:"radio","aria-checked":w.value===l.value},[a("div",pt,[(_(),k(Z(l.iconComponent),{class:"segmented__icon text_two"}))])],42,vt)),64))])):K("",!0),M(a("div",{class:C(["map__table",{active:y.value.info}])},[a("div",mt,[a("div",{class:"segmented__indicator",style:Q(ae.value)},null,4),(_(),T(q,null,X(E,l=>a("button",{key:l.value,class:C(["segmented__item",{"is-selected":ee.value===l.value}]),onClick:I(V=>we(l.value,V),["prevent"]),onMousedown:n[9]||(n[9]=I(()=>{},["prevent"])),type:"button",role:"radio","aria-checked":ee.value===l.value},[a("div",ft,[(_(),k(Z(l.iconComponent),{class:"segmented__icon text_two"}))])],42,bt)),64))]),a("div",ht,[M(a("div",gt,[t(h,{data:[{label:e(o)("table.series"),value:u.value.series},{label:e(o)("table.number"),value:u.value.number},{label:e(o)("table.tabNumber"),value:u.value.tabNumber},{label:e(o)("table.workType"),value:u.value.workType},{label:e(o)("table.weight"),value:u.value.weight},{label:e(o)("table.carNumber"),value:u.value.carNumber},{label:e(o)("table.axisNumber"),value:u.value.axisNumber},{label:e(o)("table.cargoType"),value:u.value.cargoType},{label:e(o)("table.carCount"),value:u.value.carCount},{label:e(o)("table.cargoMass"),value:u.value.cargoMass}],border:"","show-header":!1,"row-class-name":$},{default:s(()=>[t(d,null,{default:s(l=>[a("span",wt,c(l.row.label),1),a("span",yt,c(l.row.value),1)]),_:1})]),_:1},8,["data"])],512),[[P,S.value.locomotive]]),M(a("div",kt,[t(h,{data:[{label:e(o)("table.bortDate"),value:u.value.bortDate},{label:e(o)("table.bortTime"),value:u.value.bortTime},{label:e(o)("table.speed"),value:u.value.speed},{label:e(o)("table.stopTime"),value:u.value.stopTime},{label:e(o)("table.pressure"),value:u.value.pressure},{label:e(o)("table.LSlight"),value:u.value.LSlight}],border:"","show-header":!1,"row-class-name":$},{default:s(()=>[t(d,null,{default:s(l=>[a("span",Ct,c(l.row.label),1),a("span",Tt,c(l.row.value),1)]),_:1})]),_:1},8,["data"])],512),[[P,S.value.information]]),M(a("div",xt,[t(h,{data:[{label:e(o)("table.latitude"),value:u.value.latitude},{label:e(o)("table.longitude"),value:u.value.longitude},{label:e(o)("table.geozone"),value:u.value.geozone},{label:"RFID",value:u.value.rfid},{label:e(o)("table.path"),value:u.value.path}],border:"","show-header":!1,"row-class-name":$},{default:s(()=>[t(d,null,{default:s(l=>[a("span",Nt,c(l.row.label),1),a("span",Dt,c(l.row.value),1)]),_:1})]),_:1},8,["data"])],512),[[P,S.value.location]]),M(a("div",Lt,[t(h,{data:[{label:e(o)("table.volume"),value:u.value.fuelVolume},{label:e(o)("table.temp"),value:u.value.fuelTemp},{label:e(o)("table.density"),value:u.value.fuelDensity},{label:e(o)("table.mass"),value:u.value.fuelMass}],border:"","show-header":!1,"row-class-name":$},{default:s(()=>[t(d,null,{default:s(l=>[a("span",Vt,c(l.row.label),1),a("span",St,c(l.row.value),1)]),_:1})]),_:1},8,["data"])],512),[[P,S.value.fuel]]),M(a("div",Mt,[t(h,{data:[{label:e(o)("table.instantPowerActive"),value:u.value.instantPowerActive},{label:e(o)("table.instantPowerReactive"),value:u.value.instantPowerReactive},{label:e(o)("table.instantPowerFull"),value:u.value.instantPowerFull},{label:e(o)("table.voltage"),value:u.value.voltage},{label:e(o)("table.current"),value:u.value.current}],border:"","show-header":!1,"row-class-name":$},{default:s(()=>[t(d,null,{default:s(l=>[a("span",Pt,c(l.row.label),1),a("span",Rt,c(l.row.value),1)]),_:1})]),_:1},8,["data"])],512),[[P,S.value.energy]]),M(a("div",Et,[t(h,{data:[{label:e(o)("table.voltageTG"),value:u.value.voltageTG},{label:e(o)("table.currentTG"),value:u.value.currentTG},{label:e(o)("table.powerTG"),value:u.value.powerTG},{label:e(o)("table.oilPressure"),value:u.value.oilPressure},{label:e(o)("table.oilTemp"),value:u.value.oilTemp},{label:e(o)("table.waterTemp"),value:u.value.waterTemp},{label:e(o)("table.pressureNV"),value:u.value.pressureNV},{label:e(o)("table.frequency"),value:u.value.frequency},{label:e(o)("table.positionKM"),value:u.value.positionKM}],border:"","show-header":!1,"row-class-name":$},{default:s(()=>[t(d,null,{default:s(l=>[a("span",$t,c(l.row.label),1),a("span",Ft,c(l.row.value),1)]),_:1})]),_:1},8,["data"])],512),[[P,S.value.krpd]])])],2),[[P,y.value.info]]),M(a("div",{class:C(["map__table",{active:y.value.message}])},[t(na,{onToggleHelp:be,"external-text":Pe.value,onSend:la},null,8,["external-text"]),a("div",It,[a("div",{class:"segmented__indicator",style:Q(_e.value)},null,4),(_(),T(q,null,X(L,l=>a("button",{key:l.value,class:C(["segmented__item",{"is-selected":R.value===l.value}]),onClick:I(V=>Ve(l.value,V),["prevent"]),onMousedown:n[10]||(n[10]=I(()=>{},["prevent"])),type:"button",role:"radio","aria-checked":R.value===l.value},[a("div",At,[(_(),k(Z(l.iconComponent),{class:"segmented__icon text_two",title:l.label},null,8,["title"]))])],42,Gt)),64))]),a("div",zt,[t(h,{data:Ye.value,border:"","row-class-name":$,"max-height":"400"},{empty:s(()=>[a("div",Ot,c(e(o)("table.noData")),1)]),default:s(()=>[t(d,{prop:"messageText",sortable:"","min-width":"120"},{header:s(()=>[t(v,{content:e(o)("table.message"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(Ke))]),_:1})]),_:1},8,["content"])]),_:1}),t(d,{prop:"created",sortable:"","min-width":"95"},{header:s(()=>[t(v,{content:e(o)("table.created"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(re))]),_:1})]),_:1},8,["content"])]),default:s(l=>[a("span",null,c(l.row.created),1)]),_:1}),t(d,{prop:"delivered",width:"43"},{header:s(()=>[t(v,{content:e(o)("table.delivered"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(re))]),_:1})]),_:1},8,["content"])]),default:s(l=>[l.row.delivered?(_(),k(v,{key:0,content:l.row.delivered,placement:"top"},{default:s(()=>[t(r,{class:"el-table_icon el-success"},{default:s(()=>[t(e(De))]),_:1})]),_:2},1032,["content"])):(_(),k(v,{key:1,content:e(o)("table.notDelivered"),placement:"top"},{default:s(()=>[t(r,{class:"el-table_icon el-warning"},{default:s(()=>[t(e(He))]),_:1})]),_:1},8,["content"]))]),_:1}),t(d,{prop:"read",width:"43"},{header:s(()=>[t(v,{content:e(o)("table.read"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(re))]),_:1})]),_:1},8,["content"])]),default:s(l=>[l.row.read?(_(),k(v,{key:0,content:l.row.read,placement:"top"},{default:s(()=>[t(r,{class:"el-table_icon el-success"},{default:s(()=>[t(e(De))]),_:1})]),_:2},1032,["content"])):(_(),k(v,{key:1,content:e(o)("table.notRead"),placement:"top"},{default:s(()=>[t(r,{class:"el-table_icon el-error"},{default:s(()=>[t(e(We))]),_:1})]),_:1},8,["content"]))]),_:1})]),_:1},8,["data"]),a("div",Ut,[a("div",qt,[a("div",Bt,[t(se,{modelValue:te.value,"onUpdate:modelValue":n[11]||(n[11]=l=>te.value=l),placeholder:e(o)("sort.search")},{prepend:s(()=>[t(F,{icon:e(Ne),title:e(o)("sort.search")},null,8,["icon","title"])]),_:1},8,["modelValue","placeholder"])])])])])],2),[[P,y.value.message]]),M(a("div",{class:C(["map__table",{active:y.value.notification}])},[a("div",Kt,[a("div",{class:"segmented__indicator",style:Q(j.value)},null,4),(_(),T(q,null,X(ce,l=>a("button",{key:l.value,class:C(["segmented__item",{"is-selected":f.value===l.value}]),onClick:I(V=>ve(l.value,V),["prevent"]),onMousedown:n[12]||(n[12]=I(()=>{},["prevent"])),type:"button",role:"radio","aria-checked":f.value===l.value},[a("div",Wt,[(_(),k(Z(l.iconComponent),{class:"segmented__icon text_two",title:l.label},null,8,["title"]))])],42,Ht)),64))]),a("div",Xt,[t(h,{data:G.value,border:"","row-class-name":$,"max-height":"400"},{empty:s(()=>[a("div",jt,c(e(o)("table.noData")),1)]),default:s(()=>[t(d,{prop:"dateTime",sortable:"","min-width":"100"},{header:s(()=>[t(v,{content:e(o)("table.dateNumber"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(re))]),_:1})]),_:1},8,["content"])]),_:1}),t(d,{prop:"series",sortable:"","min-width":"80"},{header:s(()=>[t(v,{content:e(o)("table.series"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(ta))]),_:1})]),_:1},8,["content"])]),_:1}),t(d,{prop:"number",sortable:"","min-width":"60"},{header:s(()=>[t(v,{content:e(o)("table.number"),placement:"top"},{default:s(()=>n[20]||(n[20]=[Ee(" № ")])),_:1},8,["content"])]),_:1}),t(d,{width:"43",align:"center"},{header:s(()=>[t(v,{content:e(o)("table.notification"),placement:"top"},{default:s(()=>[t(r,null,{default:s(()=>[t(e(oa))]),_:1})]),_:1},8,["content"])]),default:s(l=>[t(v,{content:l.row.notification.tooltip,placement:"top"},{default:s(()=>[t(r,{class:C(["el-table_icon",`notification__${l.row.notification.icon}`])},{default:s(()=>[(_(),k(Z(Ze(l.row.notification.icon))))]),_:2},1032,["class"])]),_:2},1032,["content"])]),_:1})]),_:1},8,["data"]),a("div",Jt,[a("div",Qt,[a("div",Yt,[t(se,{modelValue:N.value,"onUpdate:modelValue":n[13]||(n[13]=l=>N.value=l),placeholder:e(o)("sort.search")},{prepend:s(()=>[t(F,{icon:e(Ne),title:e(o)("sort.search")},null,8,["icon","title"])]),_:1},8,["modelValue","placeholder"])])])])])],2),[[P,y.value.notification]])])):K("",!0)])])])])])),a("div",{class:C(["overlay_full",{active:H.value}]),onClick:Se},null,2),a("div",{class:C(["map_add popup",{active:x.value}])},[a("div",Zt,[a("div",eo,[a("button",{class:"map_add__close popup__close",onClick:me},[t(r,null,{default:s(()=>[t(e(Ie))]),_:1})]),a("h4",ao,c(e(o)("table.enteringCoupling")),1),t(xa,{modelValue:Me.value,"onUpdate:modelValue":n[15]||(n[15]=l=>Me.value=l),filterable:"","filter-method":m,"filter-placeholder":e(o)("sort.search"),data:ze.value,"max-height":"240",titles:[e(o)("table.listLoco"),e(o)("table.listLocoCoupling")]},{default:s(({option:l})=>[a("div",lo,[a("span",null,c(l.number||l.label),1),a("span",null,c(l.series||l.initial),1),a("span",null,c(l.coupling||""),1),a("span",to,[t(Ta,{modelValue:l.nudge,"onUpdate:modelValue":V=>l.nudge=V,title:e(o)("table.nudge"),onClick:n[14]||(n[14]=I(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","title"])])])]),"left-footer":s(()=>[a("div",oo,[a("span",null,c(e(o)("table.number")),1),a("span",null,c(e(o)("table.series")),1),a("span",null,c(e(o)("table.coupling")),1)])]),"right-footer":s(()=>[a("div",so,[a("span",null,c(e(o)("table.number")),1),a("span",null,c(e(o)("table.series")),1),a("span",null,c(e(o)("table.coupling")),1),a("span",null,c(e(o)("table.nudge")),1)])]),_:1},8,["modelValue","filter-placeholder","data","titles"])])]),a("div",no,[a("button",{class:"popup__button button__second button",onClick:me},[a("span",null,c(e(o)("button.cancel")),1)]),a("button",{class:"popup__button button__primary button",onClick:me},[a("span",null,c(e(o)("button.save")),1)])])],2),a("div",{class:C(["map_disband popup",{active:J.value}])},[a("div",io,[a("div",uo,[a("button",{class:"map_disband__close popup__close",onClick:ke},[t(r,null,{default:s(()=>[t(e(Ie))]),_:1})]),a("h4",ro,c(e(o)("table.enteringCoupling")),1)])]),a("div",co,[a("button",{class:"popup__button button__second button",onClick:ke},[a("span",null,c(e(o)("button.cancel")),1)]),a("button",{class:"popup__button button__red button",onClick:ke},[a("span",null,c(e(o)("button.disband")),1)])])],2),a("div",{class:C(["map_delete popup",{active:pe.value}])},[a("div",_o,[a("div",vo,[a("button",{class:"map_delete__close popup__close",onClick:ue},[t(r,null,{default:s(()=>[t(e(Ie))]),_:1})]),a("h4",po,c(e(o)("table.enteringCoupling")),1)])]),a("div",mo,[a("button",{class:"popup__button button__second button",onClick:ue},[a("span",null,c(e(o)("button.cancel")),1)]),a("button",{class:"popup__button button__red button",onClick:ue},[a("span",null,c(e(o)("button.delete")),1)])])],2),a("div",{class:C(["map_voice popup popup__small",{active:ie.value}])},[a("div",bo,[a("div",fo,[a("button",{class:"map_voice__close popup__close",onClick:be},[t(r,null,{default:s(()=>[t(e(Ie))]),_:1})]),a("h4",ho,c(e(o)("voice.formingDriver")),1),aa.value?(_(),T("div",go,[n[21]||(n[21]=a("label",{class:"map_voice__label text_two"},"Предпросмотр команды:",-1)),a("div",wo,c(aa.value),1)])):K("",!0),a("div",yo,[a("div",ko,[n[22]||(n[22]=a("label",{class:"map_voice__label text_two"},"Тип команды",-1)),t(Be,{modelValue:xe.value,"onUpdate:modelValue":n[16]||(n[16]=l=>xe.value=l),placeholder:e(o)("button.select"),class:"map_voice__select",onChange:fa},{default:s(()=>[(_(),T(q,null,X(ya,l=>t(qe,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),a("div",Co,[n[23]||(n[23]=a("label",{class:"map_voice__label text_two"},"Название команды",-1)),t(Be,{modelValue:W.value,"onUpdate:modelValue":n[17]||(n[17]=l=>W.value=l),placeholder:e(o)("button.select"),class:"map_voice__select",disabled:!xe.value,onChange:ba},{default:s(()=>[(_(!0),T(q,null,X(Oe.value,l=>(_(),k(qe,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),Y.value?(_(),T("div",To,[a("label",xo,c(oe.value),1),t(se,{modelValue:A.value,"onUpdate:modelValue":n[18]||(n[18]=l=>A.value=l),placeholder:`Введите ${oe.value.toLowerCase()}`,class:"map_voice__input"},null,8,["modelValue","placeholder"])])):K("",!0)])])]),a("div",No,[a("button",{class:"popup__button button__second button",onClick:be},[a("span",null,c(e(o)("button.cancel")),1)]),a("button",{class:"popup__button button__primary button",onClick:ha},[a("span",null,c(e(o)("button.form")),1)])])],2),t(qa)],64)}}}),bs=ra(Do,[["__scopeId","data-v-5ba567ef"]]);export{bs as default};
