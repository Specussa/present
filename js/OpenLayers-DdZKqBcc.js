import{i as at,a as it,b as nt}from"./vendor-vue3-openlayers-B7YTsOKn.js";import"./vendor-ol-contextmenu-DrfnG4qK.js";import"./vendor-ol-ext-CmFRP7G9.js";import{b as qt,ao as rt,F as It,P as Ut,n as me,U as xe,p as D,o as P,q as ge,a as jt}from"./vendor-ol-fjt3zaQW.js";import{F as Bt,k as L,j as I,d as U,B as Nt,A as Dt,at as Pt,au as Zt,r as Gt,a1 as Yt}from"./vendor-@element-plus-l10nAwNe.js";import{M as Kt}from"./MapFaq-7R82Vuta.js";import{G as Wt}from"./GoBack-XUseLnKq.js";import{T as ut}from"./index-CeIVK-MH.js";import{a as Q,b as Jt}from"./vendor-element-plus-DdPevIeu.js";import{d as Qt,e as _,b as z,m as Xt,n as H,f as ct,U as ht,c as y,a as t,I as ue,J as u,u as r,M as $,D as n,R as o,Q as dt,a4 as el,O as c,P as k,al as A,o as g}from"./vendor-@vue-Bz_wJ882.js";import{u as tl}from"./vendor-vue-i18n-DztdJ-Qd.js";import{_ as ll}from"./LogoSVG-DbKoxXUD.js";const ol={class:"breadcrumbs_map"},sl={class:"breadcrumbs__list"},al={class:"breadcrumbs__item"},il={class:"breadcrumbs__item"},nl={class:"breadcrumbs__item"},rl=["title"],ul={class:"faq__icon"},cl={class:"map__control_scroll"},dl={class:"accordion__section"},_l=["onClick"],vl={class:"accordion__section"},fl={class:"accordion__title"},pl={key:0,class:"el-table_count text_four"},ml={class:"nested-accordion"},xl={class:"nested-accordion__section"},gl={class:"nested-accordion__title"},kl={key:0,class:"el-table_count text_four"},wl={class:"map__tool_title"},bl={class:"map__tool_title"},yl={class:"map__tool_title"},Cl={class:"map__tool_title"},Fl={class:"nested-accordion__section"},$l={class:"nested-accordion__title"},Sl={key:0,class:"el-table_count text_four"},Ol={class:"map__tool_title"},Al={class:"map__tool_title"},El={class:"map__tool_title"},Ll={class:"map__tool_title"},Tl={class:"map__tool_title"},zl={class:"nested-accordion__section"},Hl={class:"nested-accordion__title"},Ml={key:0,class:"el-table_count text_four"},Vl={class:"map__tool_title"},Rl={class:"map__tool_title"},ql={class:"map__tool_title"},Il={class:"map__tool_title"},Ul={class:"map__tool_title"},jl={class:"map__tool_title"},Bl={class:"map__tool_title"},Nl={class:"map__tool_title"},Dl={class:"nested-accordion__section"},Pl={class:"nested-accordion__title"},Zl={key:0,class:"el-table_count text_four"},Gl={class:"map__tool_title"},Yl={class:"map__tool_title"},Kl={class:"map__tool_title"},Wl={class:"map__tool_title"},Jl={class:"map__tool_title"},Ql={class:"nested-accordion__section"},Xl={class:"nested-accordion__title"},hl={key:0,class:"el-table_count text_four"},eo={class:"map__tool_title"},to={class:"map__tool_title"},lo={class:"map__tool_title"},oo={class:"map__tool_title"},so={class:"nested-accordion__section"},ao={class:"nested-accordion__title"},io={key:0,class:"el-table_count text_four"},no={class:"map__tool_title"},ro={class:"map__tool_title"},uo={class:"accordion__section"},co={class:"accordion__title"},_o={key:0,class:"el-table_count text_four"},vo={class:"map__setting_item text_four"},fo={class:"map__setting_item text_four"},po={class:"map__setting_item text_four"},mo={class:"map__setting_item text_four"},xo={class:"map__setting_item text_four"},go={class:"map__setting_item text_four"},ko={class:"map__setting_item text_four"},wo={class:"map__custom_zoom_controls"},bo={class:"map__zoom_slider_container"},yo={class:"map__tools_panel"},Co={class:"map__info_panel"},Fo={class:"map__coords_display text_four"},$o={class:"map__mouse_coords text_four"},So={class:"map__zoom_info text_four"},Oo={key:2,class:"map__loading"},Ao={class:"ipopup__scroll popup__scroll"},Eo={class:"ipopup__block popup__block"},Lo=Qt({__name:"OpenLayers",props:{locomotiveData:{type:Array,default:()=>[]},selectedLocomotive:{type:Object,default:null}},emits:["locomotive-click"],setup(_t,{expose:vt,emit:ft}){if(typeof window<"u"){const s=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(e,a){return e==="2d"&&a?a.willReadFrequently=!0:e==="2d"&&!a&&(a={willReadFrequently:!0}),s.call(this,e,a)}}const{t:ce}=tl(),Z=_t,ke=ft,X=_(!1),G=_(!1),pt=()=>{G.value=!1,X.value=!1,document.documentElement.classList.remove("noscroll")},we=()=>{G.value=!G.value,X.value=!X.value,G.value?document.documentElement.classList.add("noscroll"):document.documentElement.classList.remove("noscroll")},j=_(),Y=_(!1),C=_(12.5),M=_([50085250012e-4,70175431434e-4]),mt=_("EPSG:3857"),h=_(0),de=_([0,0]),F=_(null),E=_(null),V=_(null),R=_({}),O=_({}),m=_({basic:!1,fuel:!1,diesel:!1,electric:!1,accounted_electric:!1,additional:!1}),K=(s,e)=>{if(e)s.style.maxHeight="0px",requestAnimationFrame(()=>{const a=s.scrollHeight;s.style.maxHeight=`${a}px`,setTimeout(()=>{s.style.maxHeight!=="0px"&&(s.style.maxHeight="none")},300)});else{const a=s.scrollHeight;s.style.maxHeight=`${a}px`,requestAnimationFrame(()=>{s.style.maxHeight="0px"})}},B=s=>{const e=m.value[s];Object.keys(m.value).forEach(a=>{a!==s&&(m.value[a]=!1,H(()=>{const i=O.value[a];i&&K(i,!1)}))}),m.value[s]=!e,H(()=>{const a=O.value[s];if(a){K(a,!e);const i=R.value.tools;i&&w.value.tools&&(i.style.maxHeight="auto")}})},w=_({layers:!1,tools:!1,settings:!1,labels:!1}),_e=s=>{const e=w.value[s];Object.keys(w.value).forEach(a=>{a!==s&&(w.value[a]=!1,H(()=>{const i=R.value[a];i&&K(i,!1)}))}),Object.keys(m.value).forEach(a=>{m.value[a]=!1,H(()=>{const i=O.value[a];i&&K(i,!1)})}),w.value[s]=!e,H(()=>{const a=R.value[s];a&&K(a,!e)})},ve=()=>{H(()=>{Object.keys(w.value).forEach(s=>{const e=R.value[s];e&&(w.value[s]?(e.style.maxHeight="none",requestAnimationFrame(()=>{const i=e.scrollHeight;e.style.maxHeight=`${i}px`})):e.style.maxHeight="0px")}),Object.keys(m.value).forEach(s=>{const e=O.value[s];e&&(m.value[s]?(e.style.maxHeight="none",requestAnimationFrame(()=>{const i=e.scrollHeight;e.style.maxHeight=`${i}px`})):e.style.maxHeight="0px")})})},ee=_([{id:"osm",name:"Стандарт",visible:!1,type:"base",source:"osm"},{id:"satellite",name:"Спутник",visible:!0,type:"base",source:"satellite"}]),d=_([{id:"basic_params",name:"Основные",active:!1},{id:"fuel_params",name:"Параметры топлива",active:!1},{id:"diesel_params",name:"Параметры дизеля",active:!1},{id:"electric_params",name:"Параметры электроэнергии",active:!1},{id:"accounted_electric",name:"Учтенная электроэнергия",active:!1},{id:"additional_params",name:"Дополнительные параметры",active:!1},{id:"speed",name:"Скорость",active:!1},{id:"brake_line_pressure",name:"Давление тормозной магистрали",active:!1},{id:"brake_cylinder_pressure",name:"Давление тормозного цилиндра",active:!1},{id:"feed_line_pressure",name:"Давление питательной магистрали",active:!1},{id:"fuel_volume",name:"Объем топлива",active:!1},{id:"fuel_volume_20c",name:"Объем топлива 20°C",active:!1},{id:"fuel_mass",name:"Масса топлива",active:!1},{id:"fuel_temp",name:"Температура топлива",active:!1},{id:"fuel_density",name:"Плотность топлива",active:!1},{id:"generator_current",name:"Ток генератора",active:!1},{id:"generator_voltage",name:"Напряжение генератора",active:!1},{id:"diesel_rpm",name:"Обороты дизеля",active:!1},{id:"water_temp",name:"Температура воды",active:!1},{id:"oil_temp",name:"Температура масла",active:!1},{id:"oil_pressure",name:"Давление масла",active:!1},{id:"fuel_pressure",name:"Давление топлива",active:!1},{id:"air_pressure",name:"Давление воздуха",active:!1},{id:"active_power",name:"Активная мощность",active:!1},{id:"reactive_power",name:"Реактивная мощность",active:!1},{id:"apparent_power",name:"Полная мощность",active:!1},{id:"voltage",name:"Напряжение",active:!1},{id:"current",name:"Ток",active:!1},{id:"active_power_direct",name:"Активная мощность прямая",active:!1},{id:"active_power_reverse",name:"Активная мощность обратная",active:!1},{id:"reactive_power_direct",name:"Реактивная мощность прямая",active:!1},{id:"reactive_power_reverse",name:"Реактивная мощность обратная",active:!1},{id:"controller_position",name:"Позиция контроллера",active:!1},{id:"als",name:"АЛС",active:!1}]),W=_(!1),xt=_(!0),N=_(!1),gt=_(!1),te=_(!1),le=_(!1),oe=_(!1),se=_(!1),ae=_(!1),ie=_(!1),J=_(!0),kt=()=>{te.value=!te.value},wt=()=>{le.value=!le.value},bt=()=>{oe.value=!oe.value},yt=()=>{se.value=!se.value},Ct=()=>{ae.value=!ae.value},Ft=()=>{ie.value=!ie.value},$t=()=>{J.value=!J.value},T=(s,e="active")=>s.filter(a=>a[e]).length,be=z(()=>T(d.value)),ye=z(()=>{const s=[{active:te.value},{active:le.value},{active:oe.value},{active:se.value},{active:ae.value},{active:ie.value},{active:J.value}];return T(s)}),Ce=z(()=>{const s=d.value.filter(e=>["speed","brake_line_pressure","brake_cylinder_pressure","feed_line_pressure"].includes(e.id));return T(s)}),Fe=z(()=>{const s=d.value.filter(e=>["fuel_volume","fuel_volume_20c","fuel_mass","fuel_temp","fuel_density"].includes(e.id));return T(s)}),$e=z(()=>{const s=d.value.filter(e=>["generator_current","generator_voltage","diesel_rpm","water_temp","oil_temp","oil_pressure","fuel_pressure","air_pressure"].includes(e.id));return T(s)}),Se=z(()=>{const s=d.value.filter(e=>["active_power","reactive_power","apparent_power","voltage","current"].includes(e.id));return T(s)}),Oe=z(()=>{const s=d.value.filter(e=>["active_power_direct","active_power_reverse","reactive_power_direct","reactive_power_reverse"].includes(e.id));return T(s)}),Ae=z(()=>{const s=d.value.filter(e=>["controller_position","als"].includes(e.id));return T(s)}),v=s=>{const e=d.value.find(a=>a.id===s);e&&(e.active=!e.active,s==="labels"&&(gt.value=e.active))},St=s=>{ee.value.forEach(e=>{e.type==="base"&&(e.visible=e.id===s)})},Ot=()=>{C.value=Math.min(C.value+1,18)},At=()=>{C.value=Math.max(C.value-1,2)},Et=s=>{C.value=s},Lt=()=>{j.value&&(N.value?document.exitFullscreen&&document.exitFullscreen():j.value.requestFullscreen&&j.value.requestFullscreen(),N.value=!N.value)},Tt=()=>{const s=[50085250012e-4,70175431434e-4],e=12.5;if(p.value){const a=p.value.map||p.value;a&&a.getView?(a.getView().animate({center:s,zoom:e,rotation:0,duration:1e3}),setTimeout(()=>{M.value=s,C.value=e,h.value=0},1e3)):(M.value=s,C.value=e,h.value=0)}else M.value=s,C.value=e,h.value=0},ne=s=>{switch(s){case"Эксплуатация":return"#52c41a";case"В ремонте":return"#f5222d";case"Резерв":return"#faad14";default:return"#1890ff"}},fe=s=>{if(!p.value||!s||s.length===0)return;F.value?F.value.clear():F.value=new qt;const e=s.map(a=>{try{const i=parseFloat(a.longitude),f=parseFloat(a.latitude);if(isNaN(i)||isNaN(f))return console.error("Некорректные координаты для локомотива:",a),null;const x=rt([i,f]),S=new It({geometry:new Ut(x),id:a.id,number:a.number,type:a.type,status:a.status,data:a}),b=ne(a.status),re=V.value===a.id,pe=new me({image:new xe({radius:re?10:8,fill:new D({color:re?"#ff9900":b}),stroke:new P({color:"#ffffff",width:2})}),text:new ge({text:a.number,font:"bold 12px Arial",fill:new D({color:"#ffffff"}),stroke:new P({color:"#000000",width:3}),offsetY:-20})});return S.setStyle(pe),S}catch(i){return console.error("Ошибка при создании маркера:",i,a),null}}).filter(a=>a!==null);if(e.length>0)F.value.addFeatures(e);else return;E.value?(E.value.setSource(F.value),E.value.changed()):(E.value=new jt({source:F.value,zIndex:10,style:a=>{const i=a.get("status"),f=a.get("number"),x=V.value===a.get("id"),S=ne(i);return new me({image:new xe({radius:x?10:8,fill:new D({color:x?"#ff9900":S}),stroke:new P({color:"#ffffff",width:2})}),text:new ge({text:f,font:"bold 12px Arial",fill:new D({color:"#ffffff"}),stroke:new P({color:"#000000",width:3}),offsetY:-20})})}}),H(()=>{if(p.value){const a=p.value.$map||p.value.map||p.value;a&&typeof a.addLayer=="function"?(a.addLayer(E.value),a.updateSize(),E.value.changed()):console.error("Не удалось получить доступ к карте или метод addLayer не найден")}})),setTimeout(()=>{if(p.value){const a=p.value.$map||p.value.map||p.value;a&&typeof a.updateSize=="function"&&a.updateSize()}},100)},Ee=()=>{if(!F.value||!E.value){console.warn("Источник данных или слой не инициализированы");return}try{F.value.getFeatures().forEach(e=>{const a=e.get("id"),i=e.get("status"),f=e.get("number"),x=V.value===a,S=ne(i);e.setStyle(new me({image:new xe({radius:x?10:8,fill:new D({color:x?"#ff9900":S}),stroke:new P({color:"#ffffff",width:2})}),text:new ge({text:f,font:"bold 12px Arial",fill:new D({color:"#ffffff"}),stroke:new P({color:"#000000",width:3}),offsetY:-20})}))}),E.value.changed()}catch(s){console.error("Ошибка при обновлении стилей маркеров:",s)}},Le=s=>{if(!p.value||!s)return;const e=rt([parseFloat(s.longitude),parseFloat(s.latitude)]);(p.value.$map||p.value.map||p.value).getView().animate({center:e,zoom:14,duration:500}),V.value=s.id,Ee()},zt=s=>{if(!p.value||!F.value){console.warn("Карта или источник данных не инициализированы");return}try{const e=p.value.$map||p.value.map||p.value;if(!e){console.error("Не удалось получить доступ к карте");return}const a=e.getFeaturesAtPixel(s.pixel);if(a&&a.length>0){const i=a.find(f=>f.get("id"));if(i){const f=i.get("id");if(f){V.value=f;const x=i.get("data");x&&ke("locomotive-click",x)}}}else V.value=null,ke("locomotive-click",null)}catch(e){console.error("Ошибка при обработке клика на карте:",e)}},Ht=s=>{const e=s.coordinate;e&&e.length>=2&&(de.value=[e[0],e[1]])},Mt=s=>{var i,f;const e=s.target.$view||((f=(i=s.target).getView)==null?void 0:f.call(i));if(!e)return;const a=e.getCenter();a&&a.length>=2&&(M.value=[a[0],a[1]]),C.value=e.getZoom()},p=_(null),Vt=s=>{var f,x;s.preventDefault();const e=s.deltaY||s.detail||s.wheelDelta;if(!p.value)return;const a=p.value.$view||((x=(f=p.value).getView)==null?void 0:x.call(f));if(!a)return;const i=a.getZoom();e<0?a.animate({zoom:i+1,duration:250}):a.animate({zoom:i-1,duration:250})};return Xt(async()=>{if(await H(),!j.value)return;const s=new ResizeObserver(e=>{for(let a of e){const{width:i,height:f}=a.contentRect;i>0&&f>0&&(Y.value=!0,s.disconnect())}});s.observe(j.value),setTimeout(()=>{Y.value||(Y.value=!0,s.disconnect())},100),document.addEventListener("fullscreenchange",()=>{N.value=!!document.fullscreenElement}),window.addEventListener("resize",ve),ve(),setTimeout(()=>{Z.locomotiveData&&Z.locomotiveData.length>0?fe(Z.locomotiveData):console.log("Нет данных о локомотивах в props")},1e3)}),ct(()=>Z.locomotiveData,s=>{s&&s.length>0?setTimeout(()=>{fe(s)},300):F.value&&F.value.clear()},{immediate:!0,deep:!0}),ct(()=>Z.selectedLocomotive,s=>{s&&s.id!==V.value&&Le(s)},{immediate:!0}),ht(()=>{window.removeEventListener("resize",ve)}),vt({moveToLocomotive:Le,createLocomotiveMarkers:fe,updateMarkerStyles:Ee,getStatusColor:ne,vectorSource:F,vectorLayer:E}),(s,e)=>{var Te,ze,He,Me,Ve,Re,qe,Ie,Ue,je,Be,Ne,De,Pe,Ze,Ge,Ye,Ke,We,Je,Qe,Xe,he,et,tt,lt,ot,st;const a=A("RouterLink"),i=A("el-icon"),f=A("Odometer"),x=A("Download"),S=A("Failed"),b=A("Sort"),re=A("Refresh"),pe=A("Key"),Rt=A("Open"),q=A("el-switch");return g(),y(dt,null,[t("div",{ref_key:"containerRef",ref:j,class:"map"},[Y.value?(g(),ue(r(at).OlMap,{key:0,ref_key:"mapRef",ref:p,class:"map__ol_map",controls:[],onClick:zt,onPointermove:Ht,onMoveend:Mt,onWheel:Vt},{default:u(()=>[o(r(at).OlView,{center:M.value,zoom:C.value,projection:mt.value,rotation:h.value},null,8,["center","zoom","projection","rotation"]),ee.value.find(l=>l.id==="osm"&&l.visible)?(g(),ue(r(it).OlTileLayer,{key:0},{default:u(()=>[o(r(nt).OlSourceOSM)]),_:1})):$("",!0),ee.value.find(l=>l.id==="satellite"&&l.visible)?(g(),ue(r(it).OlTileLayer,{key:1},{default:u(()=>[o(r(nt).OlSourceXYZ,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attributions:"Tiles © Esri"})]),_:1})):$("",!0)]),_:1},512)):$("",!0),Y.value?(g(),y("div",{key:1,class:n(["map__custom_controls_overlay",{map__faq:J.value}])},[t("div",ol,[t("ul",sl,[t("li",al,[o(Wt)]),t("li",il,[o(a,{class:"breadcrumbs__link text_four",to:r(ut).i18nRoute({name:"preloader"})},{default:u(()=>[c(k(r(ce)("header.home")),1)]),_:1},8,["to"])]),t("li",nl,[o(a,{class:"breadcrumbs__link text_four",to:r(ut).i18nRoute({name:"map"})},{default:u(()=>[c(k(r(ce)("header.map")),1)]),_:1},8,["to"])])]),t("button",{class:"breadcrumbs__instructions title_three",title:r(ce)("header.instructions"),onClick:we},[t("span",ul,[o(i,null,{default:u(()=>[o(r(Bt))]),_:1})])],8,rl)]),t("div",{class:n(["map__control_panel",{active:W.value}])},[t("div",cl,[t("div",dl,[t("div",{class:"accordion__header text_three",onClick:e[0]||(e[0]=l=>_e("layers"))},[e[39]||(e[39]=t("span",{class:"accordion__title"},"Вид карты",-1)),t("div",{class:n(["accordion__icon",{rotated:w.value.layers}])},[o(i,null,{default:u(()=>[o(r(L))]),_:1})],2)]),t("div",{class:n(["accordion__content",{expanded:w.value.layers}]),ref:l=>R.value.layers=l},[(g(!0),y(dt,null,el(ee.value,l=>(g(),y("div",{key:l.id,class:n(["map__layer_item text_four",{active:l.visible}]),onClick:To=>St(l.id)},[t("span",null,k(l.name),1)],10,_l))),128))],2)]),t("div",vl,[t("div",{class:"accordion__header text_three",onClick:e[1]||(e[1]=l=>_e("tools"))},[t("span",fl,[e[40]||(e[40]=c(" Надписи ")),be.value>0?(g(),y("span",pl,k(be.value),1)):$("",!0)]),t("div",{class:n(["accordion__icon",{rotated:w.value.tools}])},[o(i,null,{default:u(()=>[o(r(L))]),_:1})],2)]),t("div",{class:n(["accordion__content",{expanded:w.value.tools}]),ref:l=>R.value.tools=l},[t("div",ml,[t("div",xl,[t("div",{class:"nested-accordion__header text_four",onClick:e[2]||(e[2]=l=>B("basic"))},[t("span",gl,[e[41]||(e[41]=c(" Основные ")),Ce.value>0?(g(),y("span",kl,k(Ce.value),1)):$("",!0)]),t("div",{class:n(["nested-accordion__icon",{rotated:m.value.basic}])},[o(i,null,{default:u(()=>[o(r(L))]),_:1})],2)]),t("div",{class:n(["nested-accordion__content",{expanded:m.value.basic}]),ref:l=>O.value.basic=l},[t("div",{class:n(["map__tool_item text_four",{active:(Te=d.value.find(l=>l.id==="speed"))==null?void 0:Te.active}]),onClick:e[3]||(e[3]=l=>v("speed"))},[e[43]||(e[43]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",wl,[o(i,null,{default:u(()=>[o(f)]),_:1}),e[42]||(e[42]=c(" Скорость, км/ч"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(ze=d.value.find(l=>l.id==="brake_line_pressure"))==null?void 0:ze.active}]),onClick:e[4]||(e[4]=l=>v("brake_line_pressure"))},[e[45]||(e[45]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",bl,[o(i,null,{default:u(()=>[o(x)]),_:1}),e[44]||(e[44]=c(" Давление в тормозной магистрали, кгс/см²"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(He=d.value.find(l=>l.id==="brake_cylinder_pressure"))==null?void 0:He.active}]),onClick:e[5]||(e[5]=l=>v("brake_cylinder_pressure"))},[e[47]||(e[47]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",yl,[o(i,null,{default:u(()=>[o(x)]),_:1}),e[46]||(e[46]=c(" Давление в тормозном цилиндре, кгс/см²"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Me=d.value.find(l=>l.id==="feed_line_pressure"))==null?void 0:Me.active}]),onClick:e[6]||(e[6]=l=>v("feed_line_pressure"))},[e[49]||(e[49]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Cl,[o(i,null,{default:u(()=>[o(x)]),_:1}),e[48]||(e[48]=c(" Давление в питательной магистрали, кгс/см²"))])],2)],2)]),t("div",Fl,[t("div",{class:"nested-accordion__header text_four",onClick:e[7]||(e[7]=l=>B("fuel"))},[t("span",$l,[e[50]||(e[50]=c(" Параметры топлива ")),Fe.value>0?(g(),y("span",Sl,k(Fe.value),1)):$("",!0)]),t("div",{class:n(["nested-accordion__icon",{rotated:m.value.fuel}])},[o(i,null,{default:u(()=>[o(r(L))]),_:1})],2)]),t("div",{class:n(["nested-accordion__content",{expanded:m.value.fuel}]),ref:l=>O.value.fuel=l},[t("div",{class:n(["map__tool_item text_four",{active:(Ve=d.value.find(l=>l.id==="fuel_volume"))==null?void 0:Ve.active}]),onClick:e[8]||(e[8]=l=>v("fuel_volume"))},[e[52]||(e[52]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Ol,[o(i,null,{default:u(()=>[o(S)]),_:1}),e[51]||(e[51]=c(" Объем топлива, л"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Re=d.value.find(l=>l.id==="fuel_volume_20c"))==null?void 0:Re.active}]),onClick:e[9]||(e[9]=l=>v("fuel_volume_20c"))},[e[54]||(e[54]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Al,[o(i,null,{default:u(()=>[o(S)]),_:1}),e[53]||(e[53]=c(" Объем топлива, 20°c"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(qe=d.value.find(l=>l.id==="fuel_mass"))==null?void 0:qe.active}]),onClick:e[10]||(e[10]=l=>v("fuel_mass"))},[e[56]||(e[56]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",El,[o(i,null,{default:u(()=>[o(S)]),_:1}),e[55]||(e[55]=c(" Масса топлива, кг"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Ie=d.value.find(l=>l.id==="fuel_temp"))==null?void 0:Ie.active}]),onClick:e[11]||(e[11]=l=>v("fuel_temp"))},[e[58]||(e[58]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Ll,[o(i,null,{default:u(()=>[o(f)]),_:1}),e[57]||(e[57]=c(" Температура топлива, °C"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Ue=d.value.find(l=>l.id==="fuel_density"))==null?void 0:Ue.active}]),onClick:e[12]||(e[12]=l=>v("fuel_density"))},[e[60]||(e[60]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Tl,[o(i,null,{default:u(()=>[o(S)]),_:1}),e[59]||(e[59]=c(" Плотность топлива, кг/м³"))])],2)],2)]),t("div",zl,[t("div",{class:"nested-accordion__header text_four",onClick:e[13]||(e[13]=l=>B("diesel"))},[t("span",Hl,[e[61]||(e[61]=c(" Параметры дизеля ")),$e.value>0?(g(),y("span",Ml,k($e.value),1)):$("",!0)]),t("div",{class:n(["nested-accordion__icon",{rotated:m.value.diesel}])},[o(i,null,{default:u(()=>[o(r(L))]),_:1})],2)]),t("div",{class:n(["nested-accordion__content",{expanded:m.value.diesel}]),ref:l=>O.value.diesel=l},[t("div",{class:n(["map__tool_item text_four",{active:(je=d.value.find(l=>l.id==="generator_current"))==null?void 0:je.active}]),onClick:e[14]||(e[14]=l=>v("generator_current"))},[e[63]||(e[63]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Vl,[o(i,null,{default:u(()=>[o(b)]),_:1}),e[62]||(e[62]=c(" Ток тягового генератора, А"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Be=d.value.find(l=>l.id==="generator_voltage"))==null?void 0:Be.active}]),onClick:e[15]||(e[15]=l=>v("generator_voltage"))},[e[65]||(e[65]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Rl,[o(i,null,{default:u(()=>[o(b)]),_:1}),e[64]||(e[64]=c(" Напряжение тягового генератора, В"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Ne=d.value.find(l=>l.id==="diesel_rpm"))==null?void 0:Ne.active}]),onClick:e[16]||(e[16]=l=>v("diesel_rpm"))},[e[67]||(e[67]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",ql,[o(i,null,{default:u(()=>[o(re)]),_:1}),e[66]||(e[66]=c(" Частота вращения вала дизеля, об/мин"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(De=d.value.find(l=>l.id==="water_temp"))==null?void 0:De.active}]),onClick:e[17]||(e[17]=l=>v("water_temp"))},[e[69]||(e[69]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Il,[o(i,null,{default:u(()=>[o(f)]),_:1}),e[68]||(e[68]=c(" Температура воды, °C"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Pe=d.value.find(l=>l.id==="oil_temp"))==null?void 0:Pe.active}]),onClick:e[18]||(e[18]=l=>v("oil_temp"))},[e[71]||(e[71]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Ul,[o(i,null,{default:u(()=>[o(f)]),_:1}),e[70]||(e[70]=c(" Температура масла, °C"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Ze=d.value.find(l=>l.id==="oil_pressure"))==null?void 0:Ze.active}]),onClick:e[19]||(e[19]=l=>v("oil_pressure"))},[e[73]||(e[73]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",jl,[o(i,null,{default:u(()=>[o(f)]),_:1}),e[72]||(e[72]=c(" Давление масла, кгс/см²"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Ge=d.value.find(l=>l.id==="fuel_pressure"))==null?void 0:Ge.active}]),onClick:e[20]||(e[20]=l=>v("fuel_pressure"))},[e[75]||(e[75]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Bl,[o(i,null,{default:u(()=>[o(f)]),_:1}),e[74]||(e[74]=c(" Давление топлива, кгс/см²"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Ye=d.value.find(l=>l.id==="air_pressure"))==null?void 0:Ye.active}]),onClick:e[21]||(e[21]=l=>v("air_pressure"))},[e[77]||(e[77]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Nl,[o(i,null,{default:u(()=>[o(f)]),_:1}),e[76]||(e[76]=c(" Давление надувочного воздуха, кгс/см²"))])],2)],2)]),t("div",Dl,[t("div",{class:"nested-accordion__header text_four",onClick:e[22]||(e[22]=l=>B("electric"))},[t("span",Pl,[e[78]||(e[78]=c(" Параметры электроэнергии ")),Se.value>0?(g(),y("span",Zl,k(Se.value),1)):$("",!0)]),t("div",{class:n(["nested-accordion__icon",{rotated:m.value.electric}])},[o(i,null,{default:u(()=>[o(r(L))]),_:1})],2)]),t("div",{class:n(["nested-accordion__content",{expanded:m.value.electric}]),ref:l=>O.value.electric=l},[t("div",{class:n(["map__tool_item text_four",{active:(Ke=d.value.find(l=>l.id==="active_power"))==null?void 0:Ke.active}]),onClick:e[23]||(e[23]=l=>v("active_power"))},[e[80]||(e[80]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Gl,[o(i,null,{default:u(()=>[o(b)]),_:1}),e[79]||(e[79]=c(" Мгновенная мощность активная, кВт"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(We=d.value.find(l=>l.id==="reactive_power"))==null?void 0:We.active}]),onClick:e[24]||(e[24]=l=>v("reactive_power"))},[e[82]||(e[82]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Yl,[o(i,null,{default:u(()=>[o(b)]),_:1}),e[81]||(e[81]=c(" Мгновенная мощность реактивная, кВАр"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Je=d.value.find(l=>l.id==="apparent_power"))==null?void 0:Je.active}]),onClick:e[25]||(e[25]=l=>v("apparent_power"))},[e[84]||(e[84]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Kl,[o(i,null,{default:u(()=>[o(b)]),_:1}),e[83]||(e[83]=c(" Мгновенная мощность полная, кВА"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Qe=d.value.find(l=>l.id==="voltage"))==null?void 0:Qe.active}]),onClick:e[26]||(e[26]=l=>v("voltage"))},[e[86]||(e[86]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Wl,[o(i,null,{default:u(()=>[o(b)]),_:1}),e[85]||(e[85]=c(" Напряжение, В"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(Xe=d.value.find(l=>l.id==="current"))==null?void 0:Xe.active}]),onClick:e[27]||(e[27]=l=>v("current"))},[e[88]||(e[88]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Jl,[o(i,null,{default:u(()=>[o(b)]),_:1}),e[87]||(e[87]=c(" Ток, А"))])],2)],2)]),t("div",Ql,[t("div",{class:"nested-accordion__header text_four",onClick:e[28]||(e[28]=l=>B("accounted_electric"))},[t("span",Xl,[e[89]||(e[89]=c(" Учтенная электроэнергия ")),Oe.value>0?(g(),y("span",hl,k(Oe.value),1)):$("",!0)]),t("div",{class:n(["nested-accordion__icon",{rotated:m.value.accounted_electric}])},[o(i,null,{default:u(()=>[o(r(L))]),_:1})],2)]),t("div",{class:n(["nested-accordion__content",{expanded:m.value.accounted_electric}]),ref:l=>O.value.accounted_electric=l},[t("div",{class:n(["map__tool_item text_four",{active:(he=d.value.find(l=>l.id==="active_power_direct"))==null?void 0:he.active}]),onClick:e[29]||(e[29]=l=>v("active_power_direct"))},[e[91]||(e[91]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",eo,[o(i,null,{default:u(()=>[o(b)]),_:1}),e[90]||(e[90]=c(" Мощность активная прямая, кВт*ч"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(et=d.value.find(l=>l.id==="active_power_reverse"))==null?void 0:et.active}]),onClick:e[30]||(e[30]=l=>v("active_power_reverse"))},[e[93]||(e[93]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",to,[o(i,null,{default:u(()=>[o(b)]),_:1}),e[92]||(e[92]=c(" Мощность активная обратная, кВт*ч"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(tt=d.value.find(l=>l.id==="reactive_power_direct"))==null?void 0:tt.active}]),onClick:e[31]||(e[31]=l=>v("reactive_power_direct"))},[e[95]||(e[95]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",lo,[o(i,null,{default:u(()=>[o(b)]),_:1}),e[94]||(e[94]=c(" Мощность реактивная прямая, кВАр*ч"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(lt=d.value.find(l=>l.id==="reactive_power_reverse"))==null?void 0:lt.active}]),onClick:e[32]||(e[32]=l=>v("reactive_power_reverse"))},[e[97]||(e[97]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",oo,[o(i,null,{default:u(()=>[o(b)]),_:1}),e[96]||(e[96]=c(" Мощность реактивная обратная, кВАр*ч"))])],2)],2)]),t("div",so,[t("div",{class:"nested-accordion__header text_four",onClick:e[33]||(e[33]=l=>B("additional"))},[t("span",ao,[e[98]||(e[98]=c(" Дополнительные параметры ")),Ae.value>0?(g(),y("span",io,k(Ae.value),1)):$("",!0)]),t("div",{class:n(["nested-accordion__icon",{rotated:m.value.additional}])},[o(i,null,{default:u(()=>[o(r(L))]),_:1})],2)]),t("div",{class:n(["nested-accordion__content",{expanded:m.value.additional}]),ref:l=>O.value.additional=l},[t("div",{class:n(["map__tool_item text_four",{active:(ot=d.value.find(l=>l.id==="controller_position"))==null?void 0:ot.active}]),onClick:e[34]||(e[34]=l=>v("controller_position"))},[e[100]||(e[100]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",no,[o(i,null,{default:u(()=>[o(pe)]),_:1}),e[99]||(e[99]=c(" Позиция контроллера машиниста (КМ)"))])],2),t("div",{class:n(["map__tool_item text_four",{active:(st=d.value.find(l=>l.id==="als"))==null?void 0:st.active}]),onClick:e[35]||(e[35]=l=>v("als"))},[e[102]||(e[102]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",ro,[o(i,null,{default:u(()=>[o(Rt)]),_:1}),e[101]||(e[101]=c(" АЛС"))])],2)],2)])])],2)]),t("div",uo,[t("div",{class:"accordion__header text_three",onClick:e[36]||(e[36]=l=>_e("settings"))},[t("span",co,[e[103]||(e[103]=c(" Настройки ")),ye.value>0?(g(),y("span",_o,k(ye.value),1)):$("",!0)]),t("div",{class:n(["accordion__icon",{rotated:w.value.settings}])},[o(i,null,{default:u(()=>[o(r(L))]),_:1})],2)]),t("div",{class:n(["accordion__content",{expanded:w.value.settings}]),ref:l=>R.value.settings=l},[t("div",vo,[e[104]||(e[104]=t("span",null,"Привязка к путям",-1)),o(q,{"model-value":te.value,"onUpdate:modelValue":kt,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])]),t("div",fo,[e[105]||(e[105]=t("span",null,"Авто-слежение",-1)),o(q,{"model-value":le.value,"onUpdate:modelValue":wt,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])]),t("div",po,[e[106]||(e[106]=t("span",null,"Геозоны",-1)),o(q,{"model-value":oe.value,"onUpdate:modelValue":bt,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])]),t("div",mo,[e[107]||(e[107]=t("span",null,"RFID метки",-1)),o(q,{"model-value":se.value,"onUpdate:modelValue":yt,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])]),t("div",xo,[e[108]||(e[108]=t("span",null,"Простои",-1)),o(q,{"model-value":ae.value,"onUpdate:modelValue":Ct,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])]),t("div",go,[e[109]||(e[109]=t("span",null,"Надписи",-1)),o(q,{"model-value":ie.value,"onUpdate:modelValue":Ft,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])]),t("div",ko,[e[110]||(e[110]=t("span",null,"Помощь",-1)),o(q,{"model-value":J.value,"onUpdate:modelValue":$t,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])])],2)])])],2),t("div",wo,[o(r(Q),{onClick:Ot,class:"map__zoom_btn",icon:r(Nt),title:"Приблизить"},null,8,["icon"]),t("div",bo,[o(r(Jt),{"model-value":C.value,min:2,max:18,step:.1,vertical:"","onUpdate:modelValue":e[37]||(e[37]=l=>Et(Array.isArray(l)?l[0]:l)),"show-stops":"","show-tooltip":!1},null,8,["model-value"])]),o(r(Q),{onClick:At,class:"map__zoom_btn",icon:r(Dt),title:"Отдалить"},null,8,["icon"])]),t("div",yo,[o(r(Q),{onClick:Tt,class:"map__tool_btn",circle:"",title:"Вернуться к стандартному виду"},{default:u(()=>[o(i,null,{default:u(()=>[o(r(Pt))]),_:1})]),_:1}),o(r(Q),{onClick:e[38]||(e[38]=l=>W.value=!W.value),class:n(["map__tool_btn",{active:W.value}]),icon:r(Zt),circle:"",title:W.value?"Скрыть слои":"Показать слои"},null,8,["class","icon","title"]),xt.value?(g(),ue(r(Q),{key:0,onClick:Lt,class:n(["map__tool_btn",{active:N.value}]),icon:r(Gt),circle:"",title:N.value?"Выйти из полноэкранного режима":"Полноэкранный режим"},null,8,["class","icon","title"])):$("",!0)]),t("div",Co,[t("div",Fo," Центр: "+k(M.value[0].toFixed(4))+", "+k(M.value[1].toFixed(4)),1),t("div",$o," Курсор: "+k(de.value[0].toFixed(4))+", "+k(de.value[1].toFixed(4)),1),t("div",So," Масштаб: "+k(C.value.toFixed(1)),1)])],2)):(g(),y("div",Oo,e[111]||(e[111]=[t("div",{class:"map__loading_spinner"},null,-1),t("span",null,"Инициализация карты...",-1)])))],512),t("div",{class:n(["overlay_full",{active:X.value}]),onClick:pt},null,2),t("div",{class:n(["ipopup popup",{active:G.value}])},[t("div",Ao,[t("div",Eo,[t("button",{class:"ipopup__close popup__close",onClick:we},[o(i,null,{default:u(()=>[o(r(Yt))]),_:1})]),o(Kt)])])],2)],64)}}}),Po=ll(Lo,[["__scopeId","data-v-d98c7352"]]);export{Po as O};
