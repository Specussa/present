import{_ as z,$ as A,a0 as ne,a1 as ue,a2 as oe,d as se,r as re}from"./vendor-@element-plus-y3k2gx6b.js";import{d as ie,b as a,j as ve,S as de,al as ce,o as s,c as V,a as o,Q as E,I as g,H as i,u as v,L as G,O as fe}from"./vendor-@vue-Cg4sS8W0.js";import{_ as _e}from"./index-MuV7dI6i.js";const me=["poster"],pe=["src"],ye={key:0,class:"video__border"},ke={key:1,class:"video__title"},Le={class:"video__controls"},he=ie({__name:"VideoPlayer",props:{poster:{},src:{},title:{}},setup(Ee){const e=a(null),y=a(null),P=a(null),C=a(null),F=a(null),x=a(null),u=a(null),b=a(null),r=a(null),w=a(null),d=a(null),_=a(null);let B=!1;const m=a(!1),D=a(!1),M=a(!1),c=a(!1);function S(){var t,n;e.value&&(e.value.ended?(e.value.currentTime=0,e.value.play(),c.value=!1,(t=y.value)==null||t.classList.add("video__overlay_hidden"),m.value=!0):e.value.paused?(e.value.play(),(n=y.value)==null||n.classList.add("video__overlay_hidden"),m.value=!0):(e.value.pause(),m.value=!1))}function J(){e.value&&(e.value.muted=!e.value.muted,D.value=e.value.muted)}function K(){w.value&&(document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),M.value=!1):(w.value.requestFullscreen().catch(t=>{console.log(`Ошибка при включении полноэкранного режима: ${t.message}`)}),M.value=!0))}function Y(){if(!e.value||!b.value||!r.value)return;const t=e.value.currentTime/e.value.duration*100;b.value.style.width=`${t}%`;const n=Math.floor(e.value.currentTime/60),l=Math.floor(e.value.currentTime%60),p=Math.floor(e.value.duration/60),f=Math.floor(e.value.duration%60);r.value.textContent=`${n}:${l.toString().padStart(2,"0")} / ${p}:${f.toString().padStart(2,"0")}`}function $(){e.value&&c.value&&e.value.currentTime<e.value.duration&&(c.value=!1,m.value=!1)}function N(t){if(!e.value||!u.value)return;const n=t.offsetX/u.value.offsetWidth*e.value.duration;e.value.currentTime=n,$()}function k(t){if(!u.value||!e.value||!d.value||!_.value)return;const n=u.value.getBoundingClientRect(),l=t.clientX-n.left,f=l/u.value.offsetWidth*e.value.duration,L=Math.floor(f/60),h=Math.floor(f%60);_.value.style.left=`${l}px`,d.value.style.left=`${l}px`,d.value.textContent=`${L}:${h.toString().padStart(2,"0")}`,_.value.style.opacity="1",d.value.style.opacity="1"}function T(){!d.value||!_.value||(_.value.style.opacity="0",d.value.style.opacity="0")}function Z(){var t;m.value=!1,c.value=!0,(t=y.value)==null||t.classList.remove("video__overlay_hidden")}function ee(){!e.value||!r.value||e.value.addEventListener("loadedmetadata",function(){r.value&&(r.value.textContent=`0:00 / ${Math.floor(e.value.duration/60)}:${Math.floor(e.value.duration%60).toString().padStart(2,"0")}`)})}function te(){var t,n,l,p,f,L,h,X,I,W,j,q,H,O,Q,R,U;(t=P.value)==null||t.addEventListener("click",S),(n=C.value)==null||n.addEventListener("click",S),(l=F.value)==null||l.addEventListener("click",J),(p=x.value)==null||p.addEventListener("click",K),(f=e.value)==null||f.addEventListener("timeupdate",Y),(L=e.value)==null||L.addEventListener("click",S),(h=e.value)==null||h.addEventListener("ended",Z),(X=u.value)==null||X.addEventListener("click",N),(I=u.value)==null||I.addEventListener("mousemove",k),(W=u.value)==null||W.addEventListener("mouseenter",k),(j=u.value)==null||j.addEventListener("mouseleave",T),(q=u.value)==null||q.addEventListener("mousemove",ae=>B&&N(ae)),(H=u.value)==null||H.addEventListener("mousedown",()=>B=!0),(O=u.value)==null||O.addEventListener("mouseup",()=>B=!1),(Q=e.value)==null||Q.addEventListener("seeked",$),(R=r.value)==null||R.addEventListener("mouseenter",k),(U=r.value)==null||U.addEventListener("mouseleave",T)}function le(){var t,n,l;(t=e.value)==null||t.removeEventListener("seeked",$),(n=r.value)==null||n.removeEventListener("mouseenter",k),(l=r.value)==null||l.removeEventListener("mouseleave",T)}return ve(()=>{te(),ee()}),de(()=>{le()}),(t,n)=>{const l=ce("el-icon");return s(),V("div",{ref_key:"player",ref:w,class:"video"},[o("video",{ref_key:"video",ref:e,class:"video__element",poster:t.poster},[o("source",{src:t.src,type:"video/mp4"},null,8,pe)],8,me),o("div",{ref_key:"overlay",ref:y,class:"video__overlay"},[o("button",{ref_key:"playButton",ref:P,class:"video__button_big"},[E(l,null,{default:g(()=>[c.value?(s(),i(v(z),{key:0})):(s(),i(v(A),{key:1}))]),_:1})],512)],512),t.title?(s(),V("div",ye)):G("",!0),t.title?(s(),V("div",ke,fe(t.title),1)):G("",!0),o("div",Le,[o("button",{ref_key:"playPauseButton",ref:C,class:"video__button video__button_toggle"},[E(l,null,{default:g(()=>[m.value&&!c.value?(s(),i(v(ne),{key:0})):c.value?(s(),i(v(z),{key:1})):(s(),i(v(A),{key:2}))]),_:1})],512),o("div",{ref_key:"progress",ref:u,class:"video__progress"},[o("div",{ref_key:"progressFilled",ref:b,class:"video__progress_filled"},null,512),o("div",{ref_key:"previewLine",ref:_,class:"video__preview_line"},null,512),o("div",{ref_key:"previewTime",ref:d,class:"video__preview_time"},null,512)],512),o("div",{ref_key:"timeDisplay",ref:r,class:"video__time"},"0:00 / 0:00",512),o("button",{ref_key:"muteButton",ref:F,class:"video__button video__button_volume"},[E(l,null,{default:g(()=>[D.value?(s(),i(v(ue),{key:0})):(s(),i(v(oe),{key:1}))]),_:1})],512),o("button",{ref_key:"fullscreenButton",ref:x,class:"video__button video__button_fullscreen"},[E(l,null,{default:g(()=>[M.value?(s(),i(v(se),{key:0})):(s(),i(v(re),{key:1}))]),_:1})],512)])],512)}}}),Be=_e(he,[["__scopeId","data-v-cf8b2d1f"]]);export{Be as V};
