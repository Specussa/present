import{i as nt,a as it,b as at}from"./vendor-vue3-openlayers-B7YTsOKn.js";import"./vendor-ol-contextmenu-DrfnG4qK.js";import"./vendor-ol-ext-CmFRP7G9.js";import{b as qt,ao as rt,F as It,P as Ut,n as me,U as ge,p as P,o as Z,q as xe,a as jt}from"./vendor-ol-fjt3zaQW.js";import{F as Bt,k as E,j as I,d as U,B as Nt,A as Pt,ad as Zt,ae as Gt,r as Yt,W as ht}from"./vendor-@element-plus-Cf--I8Lq.js";import{M as Wt}from"./MapFaq-CvILkKdn.js";import{G as Kt}from"./GoBack-D16Dd95R.js";import{T as ut,_ as Jt}from"./index-D1Rhb41C.js";import{a as Q,b as Qt}from"./vendor-element-plus-Bt6C2HhV.js";import{d as Xt,e as _,b as z,m as Dt,n as H,f as ct,U as el,c as y,a as t,I as ue,J as u,u as r,M as $,D as a,R as s,Q as dt,a4 as tl,O as c,P as k,al as O,o as x}from"./vendor-@vue-Bz_wJ882.js";import{u as ll}from"./vendor-vue-i18n-DztdJ-Qd.js";const ol={class:"breadcrumbs_map"},sl={class:"breadcrumbs__list"},nl={class:"breadcrumbs__item"},il={class:"breadcrumbs__item"},al={class:"breadcrumbs__item"},rl=["title"],ul={class:"faq__icon"},cl={class:"map__control_scroll"},dl={class:"accordion__section"},_l=["onClick"],vl={class:"accordion__section"},fl={class:"accordion__title"},pl={key:0,class:"el-table_count text_four"},ml={class:"nested-accordion"},gl={class:"nested-accordion__section"},xl={class:"nested-accordion__title"},kl={key:0,class:"el-table_count text_four"},wl={class:"map__tool_title"},bl={class:"map__tool_title"},yl={class:"map__tool_title"},Cl={class:"map__tool_title"},Fl={class:"nested-accordion__section"},$l={class:"nested-accordion__title"},Sl={key:0,class:"el-table_count text_four"},Ll={class:"map__tool_title"},Ol={class:"map__tool_title"},Al={class:"map__tool_title"},El={class:"map__tool_title"},Tl={class:"map__tool_title"},zl={class:"nested-accordion__section"},Hl={class:"nested-accordion__title"},Ml={key:0,class:"el-table_count text_four"},Vl={class:"map__tool_title"},Rl={class:"map__tool_title"},ql={class:"map__tool_title"},Il={class:"map__tool_title"},Ul={class:"map__tool_title"},jl={class:"map__tool_title"},Bl={class:"map__tool_title"},Nl={class:"map__tool_title"},Pl={class:"nested-accordion__section"},Zl={class:"nested-accordion__title"},Gl={key:0,class:"el-table_count text_four"},Yl={class:"map__tool_title"},hl={class:"map__tool_title"},Wl={class:"map__tool_title"},Kl={class:"map__tool_title"},Jl={class:"map__tool_title"},Ql={class:"nested-accordion__section"},Xl={class:"nested-accordion__title"},Dl={key:0,class:"el-table_count text_four"},eo={class:"map__tool_title"},to={class:"map__tool_title"},lo={class:"map__tool_title"},oo={class:"map__tool_title"},so={class:"nested-accordion__section"},no={class:"nested-accordion__title"},io={key:0,class:"el-table_count text_four"},ao={class:"map__tool_title"},ro={class:"map__tool_title"},uo={class:"accordion__section"},co={class:"accordion__title"},_o={key:0,class:"el-table_count text_four"},vo={class:"map__setting_item text_four"},fo={class:"map__setting_item text_four"},po={class:"map__setting_item text_four"},mo={class:"map__setting_item text_four"},go={class:"map__setting_item text_four"},xo={class:"map__setting_item text_four"},ko={class:"map__setting_item text_four"},wo={class:"map__custom_zoom_controls"},bo={class:"map__zoom_slider_container"},yo={class:"map__tools_panel"},Co={class:"map__info_panel"},Fo={class:"map__coords_display text_four"},$o={class:"map__mouse_coords text_four"},So={class:"map__zoom_info text_four"},Lo={key:2,class:"map__loading"},Oo={class:"ipopup__scroll popup__scroll"},Ao={class:"ipopup__block popup__block"},Eo=Xt({__name:"OpenLayers",props:{locomotiveData:{type:Array,default:()=>[]},selectedLocomotive:{type:Object,default:null}},emits:["locomotive-click"],setup(_t,{expose:vt,emit:ft}){if(typeof window<"u"){const o=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(e,n){return e==="2d"&&n?n.willReadFrequently=!0:e==="2d"&&!n&&(n={willReadFrequently:!0}),o.call(this,e,n)}}const{t:ce}=ll(),G=_t,ke=ft,X=_(!1),Y=_(!1),pt=()=>{Y.value=!1,X.value=!1,document.documentElement.classList.remove("noscroll")},we=()=>{Y.value=!Y.value,X.value=!X.value,Y.value?document.documentElement.classList.add("noscroll"):document.documentElement.classList.remove("noscroll")},j=_(),h=_(!1),C=_(12.5),M=_([50085250012e-4,70175431434e-4]),mt=_("EPSG:3857"),D=_(0),de=_([0,0]),F=_(null),A=_(null),V=_(null),R=_({}),L=_({}),m=_({basic:!1,fuel:!1,diesel:!1,electric:!1,accounted_electric:!1,additional:!1}),W=(o,e)=>{if(e)o.style.maxHeight="0px",requestAnimationFrame(()=>{const n=o.scrollHeight;o.style.maxHeight=`${n}px`,setTimeout(()=>{o.style.maxHeight!=="0px"&&(o.style.maxHeight="none")},300)});else{const n=o.scrollHeight;o.style.maxHeight=`${n}px`,requestAnimationFrame(()=>{o.style.maxHeight="0px"})}},B=o=>{const e=m.value[o];Object.keys(m.value).forEach(n=>{n!==o&&(m.value[n]=!1,H(()=>{const i=L.value[n];i&&W(i,!1)}))}),m.value[o]=!e,H(()=>{const n=L.value[o];if(n){W(n,!e);const i=R.value.tools;i&&w.value.tools&&(i.style.maxHeight="auto")}})},w=_({layers:!1,tools:!1,settings:!1,labels:!1}),_e=o=>{const e=w.value[o];Object.keys(w.value).forEach(n=>{n!==o&&(w.value[n]=!1,H(()=>{const i=R.value[n];i&&W(i,!1)}))}),Object.keys(m.value).forEach(n=>{m.value[n]=!1,H(()=>{const i=L.value[n];i&&W(i,!1)})}),w.value[o]=!e,H(()=>{const n=R.value[o];n&&W(n,!e)})},ve=()=>{H(()=>{Object.keys(w.value).forEach(o=>{const e=R.value[o];e&&(w.value[o]?(e.style.maxHeight="none",requestAnimationFrame(()=>{const i=e.scrollHeight;e.style.maxHeight=`${i}px`})):e.style.maxHeight="0px")}),Object.keys(m.value).forEach(o=>{const e=L.value[o];e&&(m.value[o]?(e.style.maxHeight="none",requestAnimationFrame(()=>{const i=e.scrollHeight;e.style.maxHeight=`${i}px`})):e.style.maxHeight="0px")})})},ee=_([{id:"osm",name:"Стандарт",visible:!1,type:"base",source:"osm"},{id:"satellite",name:"Спутник",visible:!0,type:"base",source:"satellite"}]),d=_([{id:"basic_params",name:"Основные",active:!1},{id:"fuel_params",name:"Параметры топлива",active:!1},{id:"diesel_params",name:"Параметры дизеля",active:!1},{id:"electric_params",name:"Параметры электроэнергии",active:!1},{id:"accounted_electric",name:"Учтенная электроэнергия",active:!1},{id:"additional_params",name:"Дополнительные параметры",active:!1},{id:"speed",name:"Скорость",active:!1},{id:"brake_line_pressure",name:"Давление тормозной магистрали",active:!1},{id:"brake_cylinder_pressure",name:"Давление тормозного цилиндра",active:!1},{id:"feed_line_pressure",name:"Давление питательной магистрали",active:!1},{id:"fuel_volume",name:"Объем топлива",active:!1},{id:"fuel_volume_20c",name:"Объем топлива 20°C",active:!1},{id:"fuel_mass",name:"Масса топлива",active:!1},{id:"fuel_temp",name:"Температура топлива",active:!1},{id:"fuel_density",name:"Плотность топлива",active:!1},{id:"generator_current",name:"Ток генератора",active:!1},{id:"generator_voltage",name:"Напряжение генератора",active:!1},{id:"diesel_rpm",name:"Обороты дизеля",active:!1},{id:"water_temp",name:"Температура воды",active:!1},{id:"oil_temp",name:"Температура масла",active:!1},{id:"oil_pressure",name:"Давление масла",active:!1},{id:"fuel_pressure",name:"Давление топлива",active:!1},{id:"air_pressure",name:"Давление воздуха",active:!1},{id:"active_power",name:"Активная мощность",active:!1},{id:"reactive_power",name:"Реактивная мощность",active:!1},{id:"apparent_power",name:"Полная мощность",active:!1},{id:"voltage",name:"Напряжение",active:!1},{id:"current",name:"Ток",active:!1},{id:"active_power_direct",name:"Активная мощность прямая",active:!1},{id:"active_power_reverse",name:"Активная мощность обратная",active:!1},{id:"reactive_power_direct",name:"Реактивная мощность прямая",active:!1},{id:"reactive_power_reverse",name:"Реактивная мощность обратная",active:!1},{id:"controller_position",name:"Позиция контроллера",active:!1},{id:"als",name:"АЛС",active:!1}]),K=_(!1),gt=_(!0),N=_(!1),xt=_(!1),te=_(!1),le=_(!1),oe=_(!1),se=_(!1),ne=_(!1),ie=_(!1),J=_(!0),kt=()=>{te.value=!te.value},wt=()=>{le.value=!le.value},bt=()=>{oe.value=!oe.value},yt=()=>{se.value=!se.value},Ct=()=>{ne.value=!ne.value},Ft=()=>{ie.value=!ie.value},$t=()=>{J.value=!J.value},T=(o,e="active")=>o.filter(n=>n[e]).length,be=z(()=>T(d.value)),ye=z(()=>{const o=[{active:te.value},{active:le.value},{active:oe.value},{active:se.value},{active:ne.value},{active:ie.value},{active:J.value}];return T(o)}),Ce=z(()=>{const o=d.value.filter(e=>["speed","brake_line_pressure","brake_cylinder_pressure","feed_line_pressure"].includes(e.id));return T(o)}),Fe=z(()=>{const o=d.value.filter(e=>["fuel_volume","fuel_volume_20c","fuel_mass","fuel_temp","fuel_density"].includes(e.id));return T(o)}),$e=z(()=>{const o=d.value.filter(e=>["generator_current","generator_voltage","diesel_rpm","water_temp","oil_temp","oil_pressure","fuel_pressure","air_pressure"].includes(e.id));return T(o)}),Se=z(()=>{const o=d.value.filter(e=>["active_power","reactive_power","apparent_power","voltage","current"].includes(e.id));return T(o)}),Le=z(()=>{const o=d.value.filter(e=>["active_power_direct","active_power_reverse","reactive_power_direct","reactive_power_reverse"].includes(e.id));return T(o)}),Oe=z(()=>{const o=d.value.filter(e=>["controller_position","als"].includes(e.id));return T(o)}),f=o=>{const e=d.value.find(n=>n.id===o);e&&(e.active=!e.active,o==="labels"&&(xt.value=e.active))},St=o=>{ee.value.forEach(e=>{e.type==="base"&&(e.visible=e.id===o)})},Lt=()=>{C.value=Math.min(C.value+1,18)},Ot=()=>{C.value=Math.max(C.value-1,2)},At=o=>{C.value=o},Et=()=>{j.value&&(N.value?document.exitFullscreen&&document.exitFullscreen():j.value.requestFullscreen&&j.value.requestFullscreen(),N.value=!N.value)},Tt=()=>{const o=[50085250012e-4,70175431434e-4],e=12.5;if(p.value){const n=p.value.map||p.value;n&&n.getView?(n.getView().animate({center:o,zoom:e,rotation:0,duration:1e3}),setTimeout(()=>{M.value=o,C.value=e,D.value=0},1e3)):(M.value=o,C.value=e,D.value=0)}else M.value=o,C.value=e,D.value=0},ae=o=>{switch(o){case"Эксплуатация":return"#52c41a";case"В ремонте":return"#f5222d";case"Резерв":return"#faad14";default:return"#1890ff"}},fe=o=>{if(console.log("Создание маркеров для локомотивов:",(o==null?void 0:o.length)||0),!p.value||!o||o.length===0){console.warn("Нет данных для создания маркеров или карта не готова");return}F.value?(F.value.clear(),console.log("Существующие маркеры очищены")):(F.value=new qt,console.log("Создан новый векторный источник"));const e=o.map(n=>{try{const i=parseFloat(n.longitude),v=parseFloat(n.latitude);if(isNaN(i)||isNaN(v))return console.error("Некорректные координаты для локомотива:",n),null;console.log(`Создание маркера для ${n.number}:`,{lon:i,lat:v});const g=rt([i,v]),S=new It({geometry:new Ut(g),id:n.id,number:n.number,type:n.type,status:n.status,data:n}),b=ae(n.status),re=V.value===n.id,pe=new me({image:new ge({radius:re?10:8,fill:new P({color:re?"#ff9900":b}),stroke:new Z({color:"#ffffff",width:2})}),text:new xe({text:n.number,font:"bold 12px Arial",fill:new P({color:"#ffffff"}),stroke:new Z({color:"#000000",width:3}),offsetY:-20})});return S.setStyle(pe),S}catch(i){return console.error("Ошибка при создании маркера:",i,n),null}}).filter(n=>n!==null);if(e.length>0)F.value.addFeatures(e),console.log(`Добавлено ${e.length} маркеров в источник`);else{console.warn("Не создано ни одного маркера");return}A.value?(A.value.setSource(F.value),A.value.changed(),console.log("Векторный слой обновлен")):(A.value=new jt({source:F.value,zIndex:10,style:n=>{const i=n.get("status"),v=n.get("number"),g=V.value===n.get("id"),S=ae(i);return new me({image:new ge({radius:g?10:8,fill:new P({color:g?"#ff9900":S}),stroke:new Z({color:"#ffffff",width:2})}),text:new xe({text:v,font:"bold 12px Arial",fill:new P({color:"#ffffff"}),stroke:new Z({color:"#000000",width:3}),offsetY:-20})})}}),console.log("Создан новый векторный слой"),H(()=>{if(p.value){const n=p.value.$map||p.value.map||p.value;n&&typeof n.addLayer=="function"?(n.addLayer(A.value),console.log("Векторный слой добавлен на карту"),n.updateSize(),A.value.changed()):console.error("Не удалось получить доступ к карте или метод addLayer не найден")}})),setTimeout(()=>{if(p.value){const n=p.value.$map||p.value.map||p.value;n&&typeof n.updateSize=="function"&&n.updateSize()}},100)},Ae=()=>{if(!F.value||!A.value){console.warn("Источник данных или слой не инициализированы");return}try{F.value.getFeatures().forEach(e=>{const n=e.get("id"),i=e.get("status"),v=e.get("number"),g=V.value===n,S=ae(i);e.setStyle(new me({image:new ge({radius:g?10:8,fill:new P({color:g?"#ff9900":S}),stroke:new Z({color:"#ffffff",width:2})}),text:new xe({text:v,font:"bold 12px Arial",fill:new P({color:"#ffffff"}),stroke:new Z({color:"#000000",width:3}),offsetY:-20})}))}),A.value.changed(),console.log("Стили маркеров обновлены")}catch(o){console.error("Ошибка при обновлении стилей маркеров:",o)}},Ee=o=>{if(!p.value||!o)return;const e=rt([parseFloat(o.longitude),parseFloat(o.latitude)]);(p.value.$map||p.value.map||p.value).getView().animate({center:e,zoom:14,duration:500}),V.value=o.id,Ae()},zt=o=>{if(!p.value||!F.value){console.warn("Карта или источник данных не инициализированы");return}try{const e=p.value.$map||p.value.map||p.value;if(!e){console.error("Не удалось получить доступ к карте");return}const n=e.getFeaturesAtPixel(o.pixel);if(n&&n.length>0){const i=n.find(v=>v.get("id"));if(i){const v=i.get("id");if(console.log("Выбран локомотив ID:",v),v){V.value=v;const g=i.get("data");g&&ke("locomotive-click",g)}}}else V.value=null,ke("locomotive-click",null)}catch(e){console.error("Ошибка при обработке клика на карте:",e)}},Ht=o=>{const e=o.coordinate;e&&e.length>=2&&(de.value=[e[0],e[1]])},Mt=o=>{var i,v;const e=o.target.$view||((v=(i=o.target).getView)==null?void 0:v.call(i));if(!e)return;const n=e.getCenter();n&&n.length>=2&&(M.value=[n[0],n[1]]),C.value=e.getZoom()},p=_(null),Vt=o=>{var v,g;o.preventDefault();const e=o.deltaY||o.detail||o.wheelDelta;if(!p.value)return;const n=p.value.$view||((g=(v=p.value).getView)==null?void 0:g.call(v));if(!n)return;const i=n.getZoom();e<0?n.animate({zoom:i+1,duration:250}):n.animate({zoom:i-1,duration:250})};return Dt(async()=>{if(await H(),!j.value)return;const o=new ResizeObserver(e=>{for(let n of e){const{width:i,height:v}=n.contentRect;i>0&&v>0&&(h.value=!0,o.disconnect())}});o.observe(j.value),setTimeout(()=>{h.value||(h.value=!0,o.disconnect())},100),document.addEventListener("fullscreenchange",()=>{N.value=!!document.fullscreenElement}),window.addEventListener("resize",ve),ve(),setTimeout(()=>{console.log("Компонент OpenLayers смонтирован"),G.locomotiveData&&G.locomotiveData.length>0?(console.log("Создание начальных маркеров из props"),fe(G.locomotiveData)):console.log("Нет данных о локомотивах в props")},1e3)}),ct(()=>G.locomotiveData,(o,e)=>{console.log("Данные локомотивов изменились:",{oldLength:(e==null?void 0:e.length)||0,newLength:(o==null?void 0:o.length)||0}),o&&o.length>0?setTimeout(()=>{fe(o)},300):F.value&&(F.value.clear(),console.log("Маркеры очищены (нет данных)"))},{immediate:!0,deep:!0}),ct(()=>G.selectedLocomotive,o=>{o&&o.id!==V.value&&Ee(o)},{immediate:!0}),el(()=>{window.removeEventListener("resize",ve)}),vt({moveToLocomotive:Ee,createLocomotiveMarkers:fe,updateMarkerStyles:Ae,getStatusColor:ae,vectorSource:F,vectorLayer:A}),(o,e)=>{var Te,ze,He,Me,Ve,Re,qe,Ie,Ue,je,Be,Ne,Pe,Ze,Ge,Ye,he,We,Ke,Je,Qe,Xe,De,et,tt,lt,ot,st;const n=O("RouterLink"),i=O("el-icon"),v=O("Odometer"),g=O("Download"),S=O("Failed"),b=O("Sort"),re=O("Refresh"),pe=O("Key"),Rt=O("Open"),q=O("el-switch");return x(),y(dt,null,[t("div",{ref_key:"containerRef",ref:j,class:"map"},[h.value?(x(),ue(r(nt).OlMap,{key:0,ref_key:"mapRef",ref:p,class:"map__ol_map",controls:[],onClick:zt,onPointermove:Ht,onMoveend:Mt,onWheel:Vt},{default:u(()=>[s(r(nt).OlView,{center:M.value,zoom:C.value,projection:mt.value,rotation:D.value},null,8,["center","zoom","projection","rotation"]),ee.value.find(l=>l.id==="osm"&&l.visible)?(x(),ue(r(it).OlTileLayer,{key:0},{default:u(()=>[s(r(at).OlSourceOSM)]),_:1})):$("",!0),ee.value.find(l=>l.id==="satellite"&&l.visible)?(x(),ue(r(it).OlTileLayer,{key:1},{default:u(()=>[s(r(at).OlSourceXYZ,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attributions:"Tiles © Esri"})]),_:1})):$("",!0)]),_:1},512)):$("",!0),h.value?(x(),y("div",{key:1,class:a(["map__custom_controls_overlay",{map__faq:J.value}])},[t("div",ol,[t("ul",sl,[t("li",nl,[s(Kt)]),t("li",il,[s(n,{class:"breadcrumbs__link text_four",to:r(ut).i18nRoute({name:"map"})},{default:u(()=>[c(k(r(ce)("header.home")),1)]),_:1},8,["to"])]),t("li",al,[s(n,{class:"breadcrumbs__link text_four",to:r(ut).i18nRoute({name:"map"})},{default:u(()=>[c(k(r(ce)("header.map")),1)]),_:1},8,["to"])])]),t("button",{class:"breadcrumbs__instructions title_three",title:r(ce)("header.instructions"),onClick:we},[t("span",ul,[s(i,null,{default:u(()=>[s(r(Bt))]),_:1})])],8,rl)]),t("div",{class:a(["map__control_panel",{active:K.value}])},[t("div",cl,[t("div",dl,[t("div",{class:"accordion__header text_three",onClick:e[0]||(e[0]=l=>_e("layers"))},[e[39]||(e[39]=t("span",{class:"accordion__title"},"Вид карты",-1)),t("div",{class:a(["accordion__icon",{rotated:w.value.layers}])},[s(i,null,{default:u(()=>[s(r(E))]),_:1})],2)]),t("div",{class:a(["accordion__content",{expanded:w.value.layers}]),ref:l=>R.value.layers=l},[(x(!0),y(dt,null,tl(ee.value,l=>(x(),y("div",{key:l.id,class:a(["map__layer_item text_four",{active:l.visible}]),onClick:To=>St(l.id)},[t("span",null,k(l.name),1)],10,_l))),128))],2)]),t("div",vl,[t("div",{class:"accordion__header text_three",onClick:e[1]||(e[1]=l=>_e("tools"))},[t("span",fl,[e[40]||(e[40]=c(" Надписи ")),be.value>0?(x(),y("span",pl,k(be.value),1)):$("",!0)]),t("div",{class:a(["accordion__icon",{rotated:w.value.tools}])},[s(i,null,{default:u(()=>[s(r(E))]),_:1})],2)]),t("div",{class:a(["accordion__content",{expanded:w.value.tools}]),ref:l=>R.value.tools=l},[t("div",ml,[t("div",gl,[t("div",{class:"nested-accordion__header text_four",onClick:e[2]||(e[2]=l=>B("basic"))},[t("span",xl,[e[41]||(e[41]=c(" Основные ")),Ce.value>0?(x(),y("span",kl,k(Ce.value),1)):$("",!0)]),t("div",{class:a(["nested-accordion__icon",{rotated:m.value.basic}])},[s(i,null,{default:u(()=>[s(r(E))]),_:1})],2)]),t("div",{class:a(["nested-accordion__content",{expanded:m.value.basic}]),ref:l=>L.value.basic=l},[t("div",{class:a(["map__tool_item text_four",{active:(Te=d.value.find(l=>l.id==="speed"))==null?void 0:Te.active}]),onClick:e[3]||(e[3]=l=>f("speed"))},[e[43]||(e[43]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",wl,[s(i,null,{default:u(()=>[s(v)]),_:1}),e[42]||(e[42]=c(" Скорость, км/ч"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(ze=d.value.find(l=>l.id==="brake_line_pressure"))==null?void 0:ze.active}]),onClick:e[4]||(e[4]=l=>f("brake_line_pressure"))},[e[45]||(e[45]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",bl,[s(i,null,{default:u(()=>[s(g)]),_:1}),e[44]||(e[44]=c(" Давление в тормозной магистрали, кгс/см²"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(He=d.value.find(l=>l.id==="brake_cylinder_pressure"))==null?void 0:He.active}]),onClick:e[5]||(e[5]=l=>f("brake_cylinder_pressure"))},[e[47]||(e[47]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",yl,[s(i,null,{default:u(()=>[s(g)]),_:1}),e[46]||(e[46]=c(" Давление в тормозном цилиндре, кгс/см²"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Me=d.value.find(l=>l.id==="feed_line_pressure"))==null?void 0:Me.active}]),onClick:e[6]||(e[6]=l=>f("feed_line_pressure"))},[e[49]||(e[49]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Cl,[s(i,null,{default:u(()=>[s(g)]),_:1}),e[48]||(e[48]=c(" Давление в питательной магистрали, кгс/см²"))])],2)],2)]),t("div",Fl,[t("div",{class:"nested-accordion__header text_four",onClick:e[7]||(e[7]=l=>B("fuel"))},[t("span",$l,[e[50]||(e[50]=c(" Параметры топлива ")),Fe.value>0?(x(),y("span",Sl,k(Fe.value),1)):$("",!0)]),t("div",{class:a(["nested-accordion__icon",{rotated:m.value.fuel}])},[s(i,null,{default:u(()=>[s(r(E))]),_:1})],2)]),t("div",{class:a(["nested-accordion__content",{expanded:m.value.fuel}]),ref:l=>L.value.fuel=l},[t("div",{class:a(["map__tool_item text_four",{active:(Ve=d.value.find(l=>l.id==="fuel_volume"))==null?void 0:Ve.active}]),onClick:e[8]||(e[8]=l=>f("fuel_volume"))},[e[52]||(e[52]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Ll,[s(i,null,{default:u(()=>[s(S)]),_:1}),e[51]||(e[51]=c(" Объем топлива, л"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Re=d.value.find(l=>l.id==="fuel_volume_20c"))==null?void 0:Re.active}]),onClick:e[9]||(e[9]=l=>f("fuel_volume_20c"))},[e[54]||(e[54]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Ol,[s(i,null,{default:u(()=>[s(S)]),_:1}),e[53]||(e[53]=c(" Объем топлива, 20°c"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(qe=d.value.find(l=>l.id==="fuel_mass"))==null?void 0:qe.active}]),onClick:e[10]||(e[10]=l=>f("fuel_mass"))},[e[56]||(e[56]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Al,[s(i,null,{default:u(()=>[s(S)]),_:1}),e[55]||(e[55]=c(" Масса топлива, кг"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Ie=d.value.find(l=>l.id==="fuel_temp"))==null?void 0:Ie.active}]),onClick:e[11]||(e[11]=l=>f("fuel_temp"))},[e[58]||(e[58]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",El,[s(i,null,{default:u(()=>[s(v)]),_:1}),e[57]||(e[57]=c(" Температура топлива, °C"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Ue=d.value.find(l=>l.id==="fuel_density"))==null?void 0:Ue.active}]),onClick:e[12]||(e[12]=l=>f("fuel_density"))},[e[60]||(e[60]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Tl,[s(i,null,{default:u(()=>[s(S)]),_:1}),e[59]||(e[59]=c(" Плотность топлива, кг/м³"))])],2)],2)]),t("div",zl,[t("div",{class:"nested-accordion__header text_four",onClick:e[13]||(e[13]=l=>B("diesel"))},[t("span",Hl,[e[61]||(e[61]=c(" Параметры дизеля ")),$e.value>0?(x(),y("span",Ml,k($e.value),1)):$("",!0)]),t("div",{class:a(["nested-accordion__icon",{rotated:m.value.diesel}])},[s(i,null,{default:u(()=>[s(r(E))]),_:1})],2)]),t("div",{class:a(["nested-accordion__content",{expanded:m.value.diesel}]),ref:l=>L.value.diesel=l},[t("div",{class:a(["map__tool_item text_four",{active:(je=d.value.find(l=>l.id==="generator_current"))==null?void 0:je.active}]),onClick:e[14]||(e[14]=l=>f("generator_current"))},[e[63]||(e[63]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Vl,[s(i,null,{default:u(()=>[s(b)]),_:1}),e[62]||(e[62]=c(" Ток тягового генератора, А"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Be=d.value.find(l=>l.id==="generator_voltage"))==null?void 0:Be.active}]),onClick:e[15]||(e[15]=l=>f("generator_voltage"))},[e[65]||(e[65]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Rl,[s(i,null,{default:u(()=>[s(b)]),_:1}),e[64]||(e[64]=c(" Напряжение тягового генератора, В"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Ne=d.value.find(l=>l.id==="diesel_rpm"))==null?void 0:Ne.active}]),onClick:e[16]||(e[16]=l=>f("diesel_rpm"))},[e[67]||(e[67]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",ql,[s(i,null,{default:u(()=>[s(re)]),_:1}),e[66]||(e[66]=c(" Частота вращения вала дизеля, об/мин"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Pe=d.value.find(l=>l.id==="water_temp"))==null?void 0:Pe.active}]),onClick:e[17]||(e[17]=l=>f("water_temp"))},[e[69]||(e[69]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Il,[s(i,null,{default:u(()=>[s(v)]),_:1}),e[68]||(e[68]=c(" Температура воды, °C"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Ze=d.value.find(l=>l.id==="oil_temp"))==null?void 0:Ze.active}]),onClick:e[18]||(e[18]=l=>f("oil_temp"))},[e[71]||(e[71]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Ul,[s(i,null,{default:u(()=>[s(v)]),_:1}),e[70]||(e[70]=c(" Температура масла, °C"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Ge=d.value.find(l=>l.id==="oil_pressure"))==null?void 0:Ge.active}]),onClick:e[19]||(e[19]=l=>f("oil_pressure"))},[e[73]||(e[73]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",jl,[s(i,null,{default:u(()=>[s(v)]),_:1}),e[72]||(e[72]=c(" Давление масла, кгс/см²"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Ye=d.value.find(l=>l.id==="fuel_pressure"))==null?void 0:Ye.active}]),onClick:e[20]||(e[20]=l=>f("fuel_pressure"))},[e[75]||(e[75]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Bl,[s(i,null,{default:u(()=>[s(v)]),_:1}),e[74]||(e[74]=c(" Давление топлива, кгс/см²"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(he=d.value.find(l=>l.id==="air_pressure"))==null?void 0:he.active}]),onClick:e[21]||(e[21]=l=>f("air_pressure"))},[e[77]||(e[77]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Nl,[s(i,null,{default:u(()=>[s(v)]),_:1}),e[76]||(e[76]=c(" Давление надувочного воздуха, кгс/см²"))])],2)],2)]),t("div",Pl,[t("div",{class:"nested-accordion__header text_four",onClick:e[22]||(e[22]=l=>B("electric"))},[t("span",Zl,[e[78]||(e[78]=c(" Параметры электроэнергии ")),Se.value>0?(x(),y("span",Gl,k(Se.value),1)):$("",!0)]),t("div",{class:a(["nested-accordion__icon",{rotated:m.value.electric}])},[s(i,null,{default:u(()=>[s(r(E))]),_:1})],2)]),t("div",{class:a(["nested-accordion__content",{expanded:m.value.electric}]),ref:l=>L.value.electric=l},[t("div",{class:a(["map__tool_item text_four",{active:(We=d.value.find(l=>l.id==="active_power"))==null?void 0:We.active}]),onClick:e[23]||(e[23]=l=>f("active_power"))},[e[80]||(e[80]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Yl,[s(i,null,{default:u(()=>[s(b)]),_:1}),e[79]||(e[79]=c(" Мгновенная мощность активная, кВт"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Ke=d.value.find(l=>l.id==="reactive_power"))==null?void 0:Ke.active}]),onClick:e[24]||(e[24]=l=>f("reactive_power"))},[e[82]||(e[82]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",hl,[s(i,null,{default:u(()=>[s(b)]),_:1}),e[81]||(e[81]=c(" Мгновенная мощность реактивная, кВАр"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Je=d.value.find(l=>l.id==="apparent_power"))==null?void 0:Je.active}]),onClick:e[25]||(e[25]=l=>f("apparent_power"))},[e[84]||(e[84]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Wl,[s(i,null,{default:u(()=>[s(b)]),_:1}),e[83]||(e[83]=c(" Мгновенная мощность полная, кВА"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Qe=d.value.find(l=>l.id==="voltage"))==null?void 0:Qe.active}]),onClick:e[26]||(e[26]=l=>f("voltage"))},[e[86]||(e[86]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Kl,[s(i,null,{default:u(()=>[s(b)]),_:1}),e[85]||(e[85]=c(" Напряжение, В"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(Xe=d.value.find(l=>l.id==="current"))==null?void 0:Xe.active}]),onClick:e[27]||(e[27]=l=>f("current"))},[e[88]||(e[88]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",Jl,[s(i,null,{default:u(()=>[s(b)]),_:1}),e[87]||(e[87]=c(" Ток, А"))])],2)],2)]),t("div",Ql,[t("div",{class:"nested-accordion__header text_four",onClick:e[28]||(e[28]=l=>B("accounted_electric"))},[t("span",Xl,[e[89]||(e[89]=c(" Учтенная электроэнергия ")),Le.value>0?(x(),y("span",Dl,k(Le.value),1)):$("",!0)]),t("div",{class:a(["nested-accordion__icon",{rotated:m.value.accounted_electric}])},[s(i,null,{default:u(()=>[s(r(E))]),_:1})],2)]),t("div",{class:a(["nested-accordion__content",{expanded:m.value.accounted_electric}]),ref:l=>L.value.accounted_electric=l},[t("div",{class:a(["map__tool_item text_four",{active:(De=d.value.find(l=>l.id==="active_power_direct"))==null?void 0:De.active}]),onClick:e[29]||(e[29]=l=>f("active_power_direct"))},[e[91]||(e[91]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",eo,[s(i,null,{default:u(()=>[s(b)]),_:1}),e[90]||(e[90]=c(" Мощность активная прямая, кВт*ч"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(et=d.value.find(l=>l.id==="active_power_reverse"))==null?void 0:et.active}]),onClick:e[30]||(e[30]=l=>f("active_power_reverse"))},[e[93]||(e[93]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",to,[s(i,null,{default:u(()=>[s(b)]),_:1}),e[92]||(e[92]=c(" Мощность активная обратная, кВт*ч"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(tt=d.value.find(l=>l.id==="reactive_power_direct"))==null?void 0:tt.active}]),onClick:e[31]||(e[31]=l=>f("reactive_power_direct"))},[e[95]||(e[95]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",lo,[s(i,null,{default:u(()=>[s(b)]),_:1}),e[94]||(e[94]=c(" Мощность реактивная прямая, кВАр*ч"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(lt=d.value.find(l=>l.id==="reactive_power_reverse"))==null?void 0:lt.active}]),onClick:e[32]||(e[32]=l=>f("reactive_power_reverse"))},[e[97]||(e[97]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",oo,[s(i,null,{default:u(()=>[s(b)]),_:1}),e[96]||(e[96]=c(" Мощность реактивная обратная, кВАр*ч"))])],2)],2)]),t("div",so,[t("div",{class:"nested-accordion__header text_four",onClick:e[33]||(e[33]=l=>B("additional"))},[t("span",no,[e[98]||(e[98]=c(" Дополнительные параметры ")),Oe.value>0?(x(),y("span",io,k(Oe.value),1)):$("",!0)]),t("div",{class:a(["nested-accordion__icon",{rotated:m.value.additional}])},[s(i,null,{default:u(()=>[s(r(E))]),_:1})],2)]),t("div",{class:a(["nested-accordion__content",{expanded:m.value.additional}]),ref:l=>L.value.additional=l},[t("div",{class:a(["map__tool_item text_four",{active:(ot=d.value.find(l=>l.id==="controller_position"))==null?void 0:ot.active}]),onClick:e[34]||(e[34]=l=>f("controller_position"))},[e[100]||(e[100]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",ao,[s(i,null,{default:u(()=>[s(pe)]),_:1}),e[99]||(e[99]=c(" Позиция контроллера машиниста (КМ)"))])],2),t("div",{class:a(["map__tool_item text_four",{active:(st=d.value.find(l=>l.id==="als"))==null?void 0:st.active}]),onClick:e[35]||(e[35]=l=>f("als"))},[e[102]||(e[102]=t("div",{class:"map__tool_checkbox"},null,-1)),t("span",ro,[s(i,null,{default:u(()=>[s(Rt)]),_:1}),e[101]||(e[101]=c(" АЛС"))])],2)],2)])])],2)]),t("div",uo,[t("div",{class:"accordion__header text_three",onClick:e[36]||(e[36]=l=>_e("settings"))},[t("span",co,[e[103]||(e[103]=c(" Настройки ")),ye.value>0?(x(),y("span",_o,k(ye.value),1)):$("",!0)]),t("div",{class:a(["accordion__icon",{rotated:w.value.settings}])},[s(i,null,{default:u(()=>[s(r(E))]),_:1})],2)]),t("div",{class:a(["accordion__content",{expanded:w.value.settings}]),ref:l=>R.value.settings=l},[t("div",vo,[e[104]||(e[104]=t("span",null,"Привязка к путям",-1)),s(q,{"model-value":te.value,"onUpdate:modelValue":kt,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])]),t("div",fo,[e[105]||(e[105]=t("span",null,"Авто-слежение",-1)),s(q,{"model-value":le.value,"onUpdate:modelValue":wt,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])]),t("div",po,[e[106]||(e[106]=t("span",null,"Геозоны",-1)),s(q,{"model-value":oe.value,"onUpdate:modelValue":bt,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])]),t("div",mo,[e[107]||(e[107]=t("span",null,"RFID метки",-1)),s(q,{"model-value":se.value,"onUpdate:modelValue":yt,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])]),t("div",go,[e[108]||(e[108]=t("span",null,"Простои",-1)),s(q,{"model-value":ne.value,"onUpdate:modelValue":Ct,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])]),t("div",xo,[e[109]||(e[109]=t("span",null,"Надписи",-1)),s(q,{"model-value":ie.value,"onUpdate:modelValue":Ft,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])]),t("div",ko,[e[110]||(e[110]=t("span",null,"Помощь",-1)),s(q,{"model-value":J.value,"onUpdate:modelValue":$t,class:"setting-switch",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#F0F2F5"},"inline-prompt":"","active-icon":r(I),"inactive-icon":r(U)},null,8,["model-value","active-icon","inactive-icon"])])],2)])])],2),t("div",wo,[s(r(Q),{onClick:Lt,class:"map__zoom_btn",icon:r(Nt),title:"Приблизить"},null,8,["icon"]),t("div",bo,[s(r(Qt),{"model-value":C.value,min:2,max:18,step:.1,vertical:"","onUpdate:modelValue":e[37]||(e[37]=l=>At(Array.isArray(l)?l[0]:l)),"show-stops":"","show-tooltip":!1},null,8,["model-value"])]),s(r(Q),{onClick:Ot,class:"map__zoom_btn",icon:r(Pt),title:"Отдалить"},null,8,["icon"])]),t("div",yo,[s(r(Q),{onClick:Tt,class:"map__tool_btn",circle:"",title:"Вернуться к стандартному виду"},{default:u(()=>[s(i,null,{default:u(()=>[s(r(Zt))]),_:1})]),_:1}),s(r(Q),{onClick:e[38]||(e[38]=l=>K.value=!K.value),class:a(["map__tool_btn",{active:K.value}]),icon:r(Gt),circle:"",title:K.value?"Скрыть слои":"Показать слои"},null,8,["class","icon","title"]),gt.value?(x(),ue(r(Q),{key:0,onClick:Et,class:a(["map__tool_btn",{active:N.value}]),icon:r(Yt),circle:"",title:N.value?"Выйти из полноэкранного режима":"Полноэкранный режим"},null,8,["class","icon","title"])):$("",!0)]),t("div",Co,[t("div",Fo," Центр: "+k(M.value[0].toFixed(4))+", "+k(M.value[1].toFixed(4)),1),t("div",$o," Курсор: "+k(de.value[0].toFixed(4))+", "+k(de.value[1].toFixed(4)),1),t("div",So," Масштаб: "+k(C.value.toFixed(1)),1)])],2)):(x(),y("div",Lo,e[111]||(e[111]=[t("div",{class:"map__loading_spinner"},null,-1),t("span",null,"Инициализация карты...",-1)])))],512),t("div",{class:a(["overlay_full",{active:X.value}]),onClick:pt},null,2),t("div",{class:a(["ipopup popup",{active:Y.value}])},[t("div",Oo,[t("div",Ao,[t("button",{class:"ipopup__close popup__close",onClick:we},[s(i,null,{default:u(()=>[s(r(ht))]),_:1})]),s(Wt)])])],2)],64)}}}),Po=Jt(Eo,[["__scopeId","data-v-09162fa8"]]);export{Po as O};
