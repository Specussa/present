import{d as K,e as g,m as Q,U as Z,f as k,o as b,c as ee,M as te}from"./vendor-@vue-Bz_wJ882.js";import{_ as ae}from"./LogoSVG-DlHvja-G.js";const B=.6,C=0,ne=K({__name:"Cubes",props:{cubeCount:{default:20},minSize:{default:20},maxSize:{default:40},minDuration:{default:10},maxDuration:{default:17},text:{default:"EM"},textColor:{default:"#FFFFFF"},fontSizeScale:{default:.5},enabled:{type:Boolean,default:!0},transformStartPercent:{default:.3},transformDurationPercent:{default:.15}},setup(F){const n=F,S=[{base:"#1e90ff",light:"#63b4ff"},{base:"#4169e1",light:"#7a93ee"},{base:"#2b86c5",light:"#5ca5e3"},{base:"#1c3f8f",light:"#3a5bb8"},{base:"#00bfff",light:"#4ad1ff"},{base:"#4682b4",light:"#75a5d1"},{base:"#6495ed",light:"#8fb0f2"}],c=g(null),t=g(null),p=g(null),R=g([]),o=g({width:0,height:0}),P=g(0),y=g(!1),f=(e,a)=>Math.random()*(a-e)+e,H=()=>{if(!c.value)return!1;const e=c.value;try{const a=e.parentElement;if(!a)return!1;const i=a.getBoundingClientRect();if(i.width<=0||i.height<=0){const s=window.getComputedStyle(a),h=parseInt(s.width)||a.offsetWidth||a.clientWidth,d=parseInt(s.height)||a.offsetHeight||a.clientHeight;if(h<=0||d<=0)return!1;o.value={width:h,height:d}}else o.value={width:i.width,height:i.height};const r=window.devicePixelRatio||1;e.width=o.value.width*r,e.height=o.value.height*r,e.style.width=`${o.value.width}px`,e.style.height=`${o.value.height}px`;const l=e.getContext("2d",{alpha:!0});return l?(t.value=l,r!==1&&t.value.scale(r,r),!0):!1}catch{return!1}},Y=()=>{const e=f(n.minSize,n.maxSize),a=f(n.minDuration,n.maxDuration);return{id:Date.now()+Math.random(),x:f(2,98),size:e,animationDelay:0,animationDuration:a,colorIndex:Math.floor(f(0,S.length-1)),initialRadius:f(1,3),progress:C,startTime:0,active:!0,transformProgress:0,textOpacity:1}},W=(e,a)=>{e.startTime=a+C*e.animationDuration*1e3,e.progress=C,e.active=!0,e.transformProgress=0,e.textOpacity=1},L=(e,a)=>{e.x=f(2,98),e.colorIndex=Math.floor(f(0,S.length-1)),e.initialRadius=f(1,3),e.animationDuration=f(n.minDuration,n.maxDuration),e.startTime=a+C*e.animationDuration*1e3,e.progress=C,e.active=!0,e.transformProgress=0,e.textOpacity=1},_=()=>{const e=[];for(let a=0;a<n.cubeCount;a++){const i=Y();e.push(i)}R.value=e},G=(e,a,i,r)=>{if(!t.value)throw new Error("Canvas context not available");const l=S[r],s=t.value.createLinearGradient(e,a,e+i,a+i);return s.addColorStop(0,l.base),s.addColorStop(1,l.light),s},N=(e,a,i)=>{const r=a-i,l=window.innerHeight-i,s=r/l;if(s>n.transformStartPercent){e.transformProgress=0,e.textOpacity=1;return}if(s<n.transformStartPercent-n.transformDurationPercent){e.transformProgress=1,e.textOpacity=0;return}const h=n.transformStartPercent,d=n.transformStartPercent-n.transformDurationPercent;e.transformProgress=(s-h)/(d-h),e.transformProgress=Math.max(0,Math.min(1,e.transformProgress)),e.textOpacity=Math.max(0,1-e.transformProgress*1.5)},$=(e,a)=>{var x;if(!e.active)return;const i=(a-e.startTime)/1e3;e.progress=Math.min(1,i/e.animationDuration);const r=((x=c.value)==null?void 0:x.getBoundingClientRect().top)||0,l=r+o.value.height+e.size,s=r-e.size,h=l-(l-s)*e.progress,d=window.innerHeight*B;h<=d&&L(e,a)},U=(e,a,i,r)=>{if(!t.value||!n.text||e.textOpacity<=0)return;const l=e.size*n.fontSizeScale;t.value.font=`bold ${l}px Arial, sans-serif`,t.value.textAlign="center",t.value.textBaseline="middle",t.value.fillStyle=n.textColor,t.value.globalAlpha=r*.8*e.textOpacity,t.value.shadowColor="rgba(0, 0, 0, 0.3)",t.value.shadowBlur=2,t.value.shadowOffsetX=.5,t.value.shadowOffsetY=.5,t.value.fillText(n.text,a+e.size/2,i+e.size/2),t.value.shadowColor="transparent",t.value.shadowBlur=0,t.value.shadowOffsetX=0,t.value.shadowOffsetY=0},X=e=>{var q;if(!t.value||!e.active||o.value.height===0||e.progress<0)return;const a=e.x/100*o.value.width-e.size/2,i=((q=c.value)==null?void 0:q.getBoundingClientRect().top)||0,r=i+o.value.height+e.size,l=i-e.size,s=r-(r-l)*e.progress,d=window.innerHeight*B;if(N(e,s,d),s<=d)return;const x=s-i;if(x<-e.size)return;const M=r-d,E=s-d;if(M<=0||E<=0)return;const A=1-E/M;let m=0;if(A<.3?m=.5+.2*(A/.3):m=.7*(1-(A-.3)/.7),m=Math.max(0,Math.min(1,m)),m<.01)return;let u;if(e.transformProgress<1){const v=e.initialRadius,J=e.size/2;u=v+(J-v)*e.transformProgress}else u=e.size/2;let O=.7+.3*Math.max(0,E/M);const V=e.progress*2*Math.PI*2*(1-e.transformProgress*.5);t.value.save(),t.value.translate(a+e.size/2,x+e.size/2),t.value.scale(O,O),t.value.rotate(V),t.value.translate(-e.size/2,-e.size/2);const j=G(0,0,e.size,e.colorIndex);if(u<e.size/2-.5?(t.value.beginPath(),t.value.moveTo(u,0),t.value.lineTo(e.size-u,0),t.value.quadraticCurveTo(e.size,0,e.size,u),t.value.lineTo(e.size,e.size-u),t.value.quadraticCurveTo(e.size,e.size,e.size-u,e.size),t.value.lineTo(u,e.size),t.value.quadraticCurveTo(0,e.size,0,e.size-u),t.value.lineTo(0,u),t.value.quadraticCurveTo(0,0,u,0),t.value.closePath()):(t.value.beginPath(),t.value.arc(e.size/2,e.size/2,e.size/2,0,Math.PI*2),t.value.closePath()),t.value.fillStyle=j,t.value.globalAlpha=m,t.value.fill(),U(e,0,0,m),u<e.size/2){t.value.strokeStyle="rgba(255, 255, 255, 0.12)",t.value.lineWidth=.5,t.value.stroke(),t.value.beginPath();const v=Math.max(.5,u-.5);t.value.moveTo(v,.5),t.value.lineTo(e.size-v,.5),t.value.quadraticCurveTo(e.size-.5,.5,e.size-.5,v),t.value.lineTo(e.size-.5,e.size-v),t.value.quadraticCurveTo(e.size-.5,e.size-.5,e.size-v,e.size-.5),t.value.lineTo(v,e.size-.5),t.value.quadraticCurveTo(.5,e.size-.5,.5,e.size-v),t.value.lineTo(.5,v),t.value.quadraticCurveTo(.5,.5,v,.5),t.value.closePath(),t.value.strokeStyle="rgba(255, 255, 255, 0.2)",t.value.lineWidth=.3,t.value.stroke()}else t.value.beginPath(),t.value.arc(e.size/2,e.size/2,e.size/2-.5,0,Math.PI*2),t.value.strokeStyle="rgba(255, 255, 255, 0.15)",t.value.lineWidth=.3,t.value.stroke();t.value.restore()},D=e=>{if(!t.value||!c.value||o.value.width===0){p.value=requestAnimationFrame(D);return}if(P.value===0){P.value=e;const i=0;R.value.forEach(r=>{W(r,i)})}const a=e-P.value;t.value.clearRect(0,0,o.value.width,o.value.height),R.value.forEach(i=>{$(i,a),X(i)}),p.value=requestAnimationFrame(D)},z=()=>{!n.enabled||y.value||setTimeout(()=>{if(!H()){setTimeout(z,100);return}_(),P.value=0,y.value=!0,p.value=requestAnimationFrame(D)},100)},T=()=>{y.value=!1,p.value&&(cancelAnimationFrame(p.value),p.value=null),t.value&&o.value.width>0&&t.value.clearRect(0,0,o.value.width,o.value.height)};let w=null;const I=()=>{w&&clearTimeout(w),w=setTimeout(()=>{var a;if(!n.enabled||!((a=c.value)!=null&&a.parentElement))return;const e=c.value.parentElement;e.offsetWidth<=0||e.offsetHeight<=0||(T(),z())},150)};return Q(()=>{n.enabled&&z(),window.addEventListener("resize",I),document.addEventListener("visibilitychange",()=>{document.hidden?T():n.enabled&&setTimeout(()=>{z()},100)})}),Z(()=>{T(),w&&clearTimeout(w),window.removeEventListener("resize",I)}),k(()=>[n.cubeCount,n.text,n.textColor,n.fontSizeScale],()=>{T(),_(),z()}),k(()=>n.enabled,e=>{e?z():T()},{immediate:!0}),(e,a)=>e.enabled?(b(),ee("canvas",{key:0,ref_key:"canvasRef",ref:c,class:"cubes"},null,512)):te("",!0)}}),oe=ae(ne,[["__scopeId","data-v-7daee1ad"]]);export{oe as C};
