import{a}from"./vendor-axios-BimPEqV4.js";const i=(e,t)=>{localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t)},l=async(e,t,o)=>{let r=await s(),n={method:e,maxBodyLength:1/0,url:t,headers:{"Content-Type":"application/json","X-CSRFToken":r},withCredentials:!0,data:o};return await a.request(n)},u=async(e,t,o)=>{let r=await s(),n={method:e,maxBodyLength:1/0,url:t,headers:{"Content-Type":"multipart/form-data",Accept:"application/json","X-CSRFToken":r,Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Accept-Language":`${localStorage.getItem("user-locale")}`},withCredentials:!0,data:o};return await a.request(n)},s=async()=>{var e;try{if(!(await fetch("/api/csrf/",{method:"GET",credentials:"include"})).ok)throw new Error("Не удалось получить CSRF-токен");const o=(e=document.cookie.split("; ").find(r=>r.startsWith("csrftoken=")))==null?void 0:e.split("=")[1];if(!o)throw new Error("CSRF-токен не найден в cookie");return o}catch(t){return console.error("Ошибка при получении CSRF-токена:",t),null}};export{u as F,i as a,l as s};
