import{d as U,e as h,m as X,U as V,f as q,o as j,c as J,M as K}from"./vendor-@vue-Bz_wJ882.js";import{_ as Q}from"./LogoSVG-DSRBPisY.js";const c=.4,T=-.105,Z=U({__name:"Cubes",props:{cubeCount:{default:40},minSize:{default:20},maxSize:{default:40},minDuration:{default:20},maxDuration:{default:50},text:{default:"EM"},textColor:{default:"#FFFFFF"},fontSizeScale:{default:.5},enabled:{type:Boolean,default:!0}},setup(F){const n=F,P=[{base:"#1e90ff",light:"#63b4ff"},{base:"#4169e1",light:"#7a93ee"},{base:"#2b86c5",light:"#5ca5e3"},{base:"#1c3f8f",light:"#3a5bb8"},{base:"#00bfff",light:"#4ad1ff"},{base:"#4682b4",light:"#75a5d1"},{base:"#6495ed",light:"#8fb0f2"}],f=h(null),t=h(null),m=h(null),A=h([]),s=h({width:0,height:0}),x=h(0),E=h(!1),u=(e,a)=>Math.random()*(a-e)+e,B=()=>{if(!f.value)return!1;const e=f.value;try{const a=e.parentElement;if(!a)return!1;const i=a.getBoundingClientRect();if(i.width<=0||i.height<=0){const d=window.getComputedStyle(a),S=parseInt(d.width)||a.offsetWidth||a.clientWidth,z=parseInt(d.height)||a.offsetHeight||a.clientHeight;if(S<=0||z<=0)return!1;s.value={width:S,height:z}}else s.value={width:i.width,height:i.height};const o=window.devicePixelRatio||1;e.width=s.value.width*o,e.height=s.value.height*o,e.style.width=`${s.value.width}px`,e.style.height=`${s.value.height}px`;const v=e.getContext("2d",{alpha:!0});return v?(t.value=v,o!==1&&t.value.scale(o,o),!0):!1}catch{return!1}},k=()=>{const e=u(n.minSize,n.maxSize),a=u(n.minDuration,n.maxDuration);return{id:Date.now()+Math.random(),x:u(2,98),size:e,animationDelay:0,animationDuration:a,colorIndex:Math.floor(u(0,P.length-1)),initialRadius:u(1,3),progress:T,startTime:0,active:!0}},O=(e,a)=>{e.startTime=a+T*e.animationDuration*1e3,e.progress=T,e.active=!0},W=(e,a)=>{e.x=u(2,98),e.colorIndex=Math.floor(u(0,P.length-1)),e.initialRadius=u(1,3),e.animationDuration=u(n.minDuration,n.maxDuration),e.startTime=a+T*e.animationDuration*1e3,e.progress=T,e.active=!0},y=()=>{const e=[];for(let a=0;a<n.cubeCount;a++){const i=k();e.push(i)}A.value=e},Y=(e,a,i,o)=>{if(!t.value)throw new Error("Canvas context not available");const v=P[o],d=t.value.createLinearGradient(e,a,e+i,a+i);return d.addColorStop(0,v.base),d.addColorStop(1,v.light),d},H=(e,a)=>{if(!e.active)return;const i=(a-e.startTime)/1e3;e.progress=Math.min(1,i/e.animationDuration),e.progress>=c&&W(e,a)},L=(e,a,i,o)=>{if(!t.value||!n.text)return;const v=e.size*n.fontSizeScale;t.value.font=`bold ${v}px Arial, sans-serif`,t.value.textAlign="center",t.value.textBaseline="middle",t.value.fillStyle=n.textColor,t.value.globalAlpha=o*.8,t.value.fillText(n.text,a+e.size/2,i+e.size/2),t.value.shadowColor="rgba(0, 0, 0, 0.3)",t.value.shadowBlur=2,t.value.shadowOffsetX=.5,t.value.shadowOffsetY=.5,t.value.fillText(n.text,a+e.size/2,i+e.size/2),t.value.shadowColor="transparent",t.value.shadowBlur=0,t.value.shadowOffsetX=0,t.value.shadowOffsetY=0},G=e=>{if(!t.value||!e.active||s.value.height===0||e.progress<0)return;const a=e.x/100*s.value.width-e.size/2,i=window.innerHeight+100,o=s.value.height*(1-c),v=i-(i-o)*(e.progress/c),d=f.value;if(!d)return;const S=d.getBoundingClientRect(),z=v-S.top;let C=0;const R=c*.7;e.progress<R?C=.15+.25*(e.progress/R):C=.4-.4*((e.progress-R)/(c-R));let l=e.initialRadius;const I=c*.8;e.progress<I?l=e.initialRadius+(e.size/2-e.initialRadius)*(e.progress/I):l=e.size/2;let M=1-.3*(e.progress/c);const N=e.progress*2*Math.PI*2;if(C<.01||z<-e.size||z>s.value.height+e.size)return;t.value.save(),t.value.translate(a+e.size/2,z+e.size/2),t.value.scale(M,M),t.value.rotate(N),t.value.translate(-e.size/2,-e.size/2);const $=Y(0,0,e.size,e.colorIndex);if(l<e.size/2-.5?(t.value.beginPath(),t.value.moveTo(l,0),t.value.lineTo(e.size-l,0),t.value.quadraticCurveTo(e.size,0,e.size,l),t.value.lineTo(e.size,e.size-l),t.value.quadraticCurveTo(e.size,e.size,e.size-l,e.size),t.value.lineTo(l,e.size),t.value.quadraticCurveTo(0,e.size,0,e.size-l),t.value.lineTo(0,l),t.value.quadraticCurveTo(0,0,l,0),t.value.closePath()):(t.value.beginPath(),t.value.arc(e.size/2,e.size/2,e.size/2,0,Math.PI*2),t.value.closePath()),t.value.fillStyle=$,t.value.globalAlpha=C,t.value.fill(),L(e,0,0,C),t.value.strokeStyle="rgba(255, 255, 255, 0.12)",t.value.lineWidth=.5,t.value.stroke(),l<e.size/2){t.value.beginPath();const r=Math.max(.5,l-.5);t.value.moveTo(r,.5),t.value.lineTo(e.size-r,.5),t.value.quadraticCurveTo(e.size-.5,.5,e.size-.5,r),t.value.lineTo(e.size-.5,e.size-r),t.value.quadraticCurveTo(e.size-.5,e.size-.5,e.size-r,e.size-.5),t.value.lineTo(r,e.size-.5),t.value.quadraticCurveTo(.5,e.size-.5,.5,e.size-r),t.value.lineTo(.5,r),t.value.quadraticCurveTo(.5,.5,r,.5),t.value.closePath(),t.value.strokeStyle="rgba(255, 255, 255, 0.2)",t.value.lineWidth=.3,t.value.stroke()}t.value.restore()},_=e=>{if(!t.value||!f.value||s.value.width===0){m.value=requestAnimationFrame(_);return}if(x.value===0){x.value=e;const i=0;A.value.forEach(o=>{O(o,i)})}const a=e-x.value;t.value.clearRect(0,0,s.value.width,s.value.height),A.value.forEach(i=>{H(i,a),G(i)}),m.value=requestAnimationFrame(_)},g=()=>{!n.enabled||E.value||setTimeout(()=>{if(!B()){setTimeout(g,100);return}y(),x.value=0,E.value=!0,m.value=requestAnimationFrame(_)},100)},p=()=>{E.value=!1,m.value&&(cancelAnimationFrame(m.value),m.value=null),t.value&&s.value.width>0&&t.value.clearRect(0,0,s.value.width,s.value.height)};let w=null;const D=()=>{w&&clearTimeout(w),w=setTimeout(()=>{var a;if(!n.enabled||!((a=f.value)!=null&&a.parentElement))return;const e=f.value.parentElement;e.offsetWidth<=0||e.offsetHeight<=0||(p(),g())},150)};return X(()=>{n.enabled&&g(),window.addEventListener("resize",D),document.addEventListener("visibilitychange",()=>{document.hidden?p():n.enabled&&setTimeout(()=>{g()},100)})}),V(()=>{p(),w&&clearTimeout(w),window.removeEventListener("resize",D)}),q(()=>[n.cubeCount,n.text,n.textColor,n.fontSizeScale],()=>{p(),y(),g()}),q(()=>n.enabled,e=>{e?g():p()},{immediate:!0}),(e,a)=>e.enabled?(j(),J("canvas",{key:0,ref_key:"canvasRef",ref:f,class:"cubes"},null,512)):K("",!0)}}),te=Q(Z,[["__scopeId","data-v-db65ec27"]]);export{te as C};
