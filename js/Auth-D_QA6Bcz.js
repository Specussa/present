import{a as pt}from"./vendor-axios-BimPEqV4.js";import{u as mt}from"./vendor-vue-router-BMJZZRG0.js";import{R as vt,S as it}from"./vendor-@element-plus-Bv-RgaI4.js";import{d as nt,o as N,c as G,b as v,k as O,j as gt,S as wt,a as t,C as j,Q as l,O as n,u as h,M as S,I as f,L as J,H as at,P as yt,al as z}from"./vendor-@vue-Cg4sS8W0.js";import{_ as rt}from"./index-C-Ed7sKV.js";import{L as xt,a as bt,T as kt}from"./LogoSVG-2ta-NKj5.js";import{E as lt}from"./vendor-element-plus-DLLATbAB.js";import{u as St}from"./vendor-vue-i18n-D0pj9gOW.js";import"./vendor-geotiff-BjC_-_Sy.js";import"./vendor-xml-utils-BmThcpyG.js";import"./vendor-dayjs-D6RD0Zoz.js";import"./vendor-@petamoriken-D_Z9L4hp.js";import"./vendor-quick-lru-D3vInPgE.js";import"./vendor-pako-CPws4d4z.js";import"./vendor-lerc-B0C9zqkp.js";import"./vendor-zstddec-zw5PE4Vj.js";import"./vendor-web-worker-2oq5GE5I.js";import"./vendor-vue-tel-input-BZrepA_w.js";import"./vendor-@intlify-CQT3u4ju.js";import"./vendor-lodash-es-C-zDejYo.js";import"./vendor-@vueuse-D3zzmj5p.js";import"./vendor-@popperjs-D9SI2xQl.js";import"./vendor-@ctrl-r5W6hzzQ.js";import"./vendor-async-validator-DKvM95Vc.js";import"./vendor-memoize-one-BdPwpGay.js";import"./vendor-normalize-wheel-es-B6fDCfyv.js";import"./vendor-@floating-ui-DF51-gJp.js";const Ct="/present/assets/authbg-wCZxChGB.webp",Mt=(_,o)=>{localStorage.setItem("access_token",_),localStorage.setItem("refresh_token",o)},Tt=async(_,o,p)=>{let C=await Et(),x={method:_,maxBodyLength:1/0,url:o,headers:{"Content-Type":"application/json","X-CSRFToken":C},withCredentials:!0,data:p};return await pt.request(x)},Et=async()=>{var _;try{if(!(await fetch("/api/csrf/",{method:"GET",credentials:"include"})).ok)throw new Error("Не удалось получить CSRF-токен");const p=(_=document.cookie.split("; ").find(C=>C.startsWith("csrftoken=")))==null?void 0:_.split("=")[1];if(!p)throw new Error("CSRF-токен не найден в cookie");return p}catch(o){return console.error("Ошибка при получении CSRF-токена:",o),null}},tt=_=>{if(!_)return"";try{const o=Math.random().toString(36).substring(2,10),p=Math.floor(Math.random()*15)+1,C=_.split("").map(b=>{const D=b.charCodeAt(0);return String.fromCharCode(D^p)}).join("");return`${btoa(encodeURIComponent(C))}|${o}|${p}`}catch(o){return console.error("Encryption error:",o),""}},zt=_=>{if(!_||!_.includes("|"))return _;try{const o=_.split("|");if(o.length!==3)return _;const[p,C,x]=o,b=parseInt(x);return isNaN(b)?_:decodeURIComponent(atob(p)).split("").map(T=>{const g=T.charCodeAt(0);return String.fromCharCode(g^b)}).join("")}catch(o){return console.error("Decryption error:",o),_}},Dt={id:"lava",width:"100%",height:"100%"},Rt=nt({__name:"Lava",setup(_){function o(){var p=15,C=.5,x=.5,b="rgba(42, 35, 170, 0.1)",D="rgba(35, 35, 170, 0.67)",T,g={screen:{elem:null,callback:null,ctx:null,width:0,height:0,left:0,top:0,init:function(s,a){return this.elem=document.getElementById("lava"),this.callback=s||null,this.elem.tagName=="CANVAS"&&(this.ctx=this.elem.getContext("2d")),window.addEventListener("resize",(function(){this.resize()}).bind(this),!1),this.elem.onselectstart=function(){return!1},this.elem.ondrag=function(){return!1},a&&this.resize(),this},resize:function(){var s=this.elem;for(this.width=s.offsetWidth,this.height=s.offsetHeight,this.left=0,this.top=0;s!=null;s=s.offsetParent)this.left+=s.offsetLeft,this.top+=s.offsetTop;var a=this.elem;this.ctx&&(a.width=this.width,a.height=this.height),this.callback}}},R=function(s,a){this.x=s,this.y=a,this.magnitude=s*s+a*a,this.computed=0,this.force=0};R.prototype.add=function(s){return new R(this.x+s.x,this.y+s.y)};var K=function(s){this.vel=new R((Math.random()>.5?1:-1)*(C+.25*Math.random()),(Math.random()>.5?1:-1)*(x+Math.random())),this.pos=new R(.2*s.width+Math.random()*s.width*.6,.2*s.height+Math.random()*s.height*.6),this.size=s.wh/p+(1.4*Math.random()+.1)*(s.wh/p),this.width=s.width,this.height=s.height};K.prototype.move=function(){this.pos.x>=this.width-this.size?(this.vel.x>0&&(this.vel.x=-this.vel.x),this.pos.x=this.width-this.size):this.pos.x<=this.size&&(this.vel.x<0&&(this.vel.x=-this.vel.x),this.pos.x=this.size),this.pos.y>=this.height-this.size?(this.vel.y>0&&(this.vel.y=-this.vel.y),this.pos.y=this.height-this.size):this.pos.y<=this.size&&(this.vel.y<0&&(this.vel.y=-this.vel.y),this.pos.y=this.size),this.pos=this.pos.add(this.vel)};var $=function(s,a,c,m,M){this.step=5,this.width=s,this.height=a,this.wh=Math.min(s,a),this.sx=Math.floor(this.width/this.step),this.sy=Math.floor(this.height/this.step),this.paint=!1,this.metaFill=W(s,a,s,m,M),this.plx=[0,0,1,0,1,1,1,1,1,1,0,1,0,0,0,0],this.ply=[0,0,0,0,0,0,1,0,0,1,1,1,0,1,0,1],this.mscases=[0,3,0,3,1,3,0,3,2,2,0,2,1,1,0],this.ix=[1,0,-1,0,0,1,0,-1,-1,0,1,0,0,1,1,0,0,0,1,1],this.grid=[],this.balls=[],this.iter=0,this.sign=1;for(var r=0;r<(this.sx+2)*(this.sy+2);r++)this.grid[r]=new R(r%(this.sx+2)*this.step,Math.floor(r/(this.sx+2))*this.step);for(var w=0;w<c;w++)this.balls[w]=new K(this)};$.prototype.computeForce=function(s,a,c){var m,M=c||s+a*(this.sx+2);if(s===0||a===0||s===this.sx||a===this.sy)m=.6*this.sign;else{m=0;for(var r=this.grid[M],w=0,u;u=this.balls[w++];)m+=u.size*u.size/(-2*r.x*u.pos.x-2*r.y*u.pos.y+u.pos.magnitude+r.magnitude);m*=this.sign}return this.grid[M].force=m,m},$.prototype.marchingSquares=function(s){var a=s[0],c=s[1],m=s[2],M=a+c*(this.sx+2);if(this.grid[M].computed===this.iter)return!1;for(var r,w=0,u=0;u<4;u++){var Q=a+this.ix[u+12]+(c+this.ix[u+16])*(this.sx+2),L=this.grid[Q].force;(L>0&&this.sign<0||L<0&&this.sign>0||!L)&&(L=this.computeForce(a+this.ix[u+12],c+this.ix[u+16],Q)),Math.abs(L)>1&&(w+=Math.pow(2,u))}if(w===15)return[a,c-1,!1];w===5?r=m===2?3:1:w===10?r=m===3?0:2:(r=this.mscases[w],this.grid[M].computed=this.iter);var X=this.step/(Math.abs(Math.abs(this.grid[a+this.plx[4*r+2]+(c+this.ply[4*r+2])*(this.sx+2)].force)-1)/Math.abs(Math.abs(this.grid[a+this.plx[4*r+3]+(c+this.ply[4*r+3])*(this.sx+2)].force)-1)+1);return E.lineTo(this.grid[a+this.plx[4*r]+(c+this.ply[4*r])*(this.sx+2)].x+this.ix[r]*X,this.grid[a+this.plx[4*r+1]+(c+this.ply[4*r+1])*(this.sx+2)].y+this.ix[r+4]*X),this.paint=!0,[a+this.ix[r+4],c+this.ix[r+8],r]},$.prototype.renderMetaballs=function(){for(var s=0,a;a=this.balls[s++];)a.move();for(this.iter++,this.sign=-this.sign,this.paint=!1,E.fillStyle=this.metaFill,E.beginPath(),s=0;a=this.balls[s++];){var c=[Math.round(a.pos.x/this.step),Math.round(a.pos.y/this.step),!1];do c=this.marchingSquares(c);while(c);this.paint&&(E.fill(),E.closePath(),E.beginPath(),this.paint=!1)}};var W=function(s,a,c,m,M){var r=E.createRadialGradient(s/1,a/1,0,s/1,a/1,c);return r.addColorStop(0,m),r.addColorStop(1,M),r},I=function(){requestAnimationFrame(I),E.clearRect(0,0,P.width,P.height),T.renderMetaballs()},P=g.screen.init(null,!0),E=P.ctx;P.resize(),T=new $(P.width,P.height,4,b,D),I()}return setTimeout(function(){o()},1),(p,C)=>(N(),G("canvas",Dt))}}),$t=rt(Rt,[["__scopeId","data-v-0413e950"]]),It={class:"header_auth"},Pt={class:"container header_auth_container"},Ft={class:"header_auth_block"},At={class:"header_auth_flex"},Bt={class:"header_auth_logo"},Lt={class:"header_auth_logo_image"},Ut={class:"header_auth_logo_info"},Vt={class:"header_auth_logo_head"},Nt={class:"header_auth_logo_desc text_four"},Kt={class:"header_auth_right"},qt={class:"auth"},Ht={class:"lava__flex"},Ot={class:"lava"},jt={class:"container auth__container"},Gt={class:"auth__block"},Wt={class:"auth__left"},Qt={class:"auth__information"},Xt={class:"auth__heading"},Yt={class:"auth__description"},Zt={class:"auth__right"},Jt={class:"auth__info"},te={class:"auth__label"},ee={class:"auth__label_name"},se={key:0,class:"auth__error error"},oe={class:"auth__label"},ie={class:"auth__label_name"},ae={key:0,class:"auth__error error"},le={class:"auth__policy_flex"},ne={class:"auth__text"},re={class:"footer"},he={class:"container footer__container"},ce={class:"footer__block"},_e={class:"footer__info"},ue={class:"footer__description text_three"},de={class:"footer__rules_scroll popup__scroll"},fe={class:"footer__rules_block popup__block"},pe={class:"footer__rules_head popup__head"},me={class:"footer__rules_list"},ve={class:"footer__rules_item"},ge={class:"footer__rules_title"},we={class:"footer__rules_flex"},ye={class:"footer__rules_info"},xe={class:"footer__rules_desc text_four"},be={class:"footer__rules_flex"},ke={class:"footer__rules_info"},Se={class:"footer__rules_desc text_four"},Ce={class:"footer__rules_item"},Me={class:"footer__rules_title"},Te={class:"footer__rules_flex"},Ee={class:"footer__rules_info"},ze={class:"footer__rules_desc text_four"},De={class:"footer__rules_flex"},Re={class:"footer__rules_info"},$e={class:"footer__rules_desc text_four"},Ie={class:"footer__rules_item"},Pe={class:"footer__rules_title"},Fe={class:"footer__rules_flex"},Ae={class:"footer__rules_info"},Be={class:"footer__rules_link text_one"},Le={class:"footer__rules_desc text_four"},Ue={class:"footer__rules_flex"},Ve={class:"footer__rules_info"},Ne={key:0},Ke={class:"footer__rules_desc text_four"},qe=nt({__name:"Auth",setup(_){const{t:o}=St(),p=mt(),C=v(new Date().getFullYear()),x=v(!1),b=v(!1),D=v(""),T=v(""),g=v(""),R=v(""),K=v(!1),$=v(!1),W=v(""),I=v(new Date);let P;const E=O(()=>{const i=I.value.getHours(),e=I.value.getDay();return e>=1&&e<=5&&(i>=8&&i<12||i>=13&&i<17)}),s=O(()=>{const i=I.value.getHours(),e=I.value.getDay();return e>=1&&e<=5&&i>=12&&i<13}),a=()=>{const i=new Date,e=3*60,k=new Date(i.getTime()+(e+i.getTimezoneOffset())*6e4),d=k.getHours().toString().padStart(2,"0"),F=k.getMinutes().toString().padStart(2,"0"),U=k.getSeconds().toString().padStart(2,"0");W.value=`${d}:${F}:${U}`,I.value=k};gt(async()=>{a(),P=window.setInterval(a,1e3),dt()}),wt(()=>{clearInterval(P)});const c=i=>{const e=i.length-g.value.length;e>0?g.value+="x".repeat(e):e<0&&(g.value=g.value.slice(0,i.length)),R.value="*".repeat(i.length),T.value=tt(g.value)},m=i=>{i.key.length===1&&!i.ctrlKey&&!i.altKey&&!i.metaKey&&setTimeout(()=>{if(g.value.length>0){const e=g.value.slice(0,-1)+i.key;g.value=e,T.value=tt(e)}},10)},M=i=>{var k;i.preventDefault();const e=((k=i.clipboardData)==null?void 0:k.getData("text"))||"";g.value=e,R.value="*".repeat(e.length),T.value=tt(g.value)},r=i=>{const e=i.target;e.selectionStart===e.selectionEnd&&setTimeout(()=>{e.setSelectionRange(e.value.length,e.value.length)},0)},w=i=>{const e=i.target;["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(i.key)&&setTimeout(()=>{e.selectionStart===e.selectionEnd&&e.setSelectionRange(e.value.length,e.value.length)},0)},u=()=>{$.value=!$.value,K.value=!K.value,$.value?document.documentElement.classList.add("noscroll"):document.documentElement.classList.remove("noscroll")},Q=O(()=>!D.value.trim()||!T.value.trim()),L=()=>{window.scrollTo({top:0,behavior:"smooth"})},X=()=>{L()},et=v("00"),st=v("00"),Z=v(!1),ot=v(0),ht=i=>{Z.value=!0;var e=new Date;e.setSeconds(e.getSeconds()+i);var k;const d=(F,U,q,H)=>{var y=e-new Date,Y=y%1e3;y=Math.floor(y/1e3);var A=y%60;A<10&&(A="0"+A),y=Math.floor(y/60);var B=y%60;B<10&&(B="0"+B),y=Math.floor(y/60);var V=y%24;V<10&&(V="0"+V);var ft=Math.floor(y/24);if(F=+ft,U=+V,q=+B,H=+A,et.value=("0"+q).slice(-2),st.value=("0"+H).slice(-2),k=F*86400+U*3600+q*60+H,k<=0){Z.value=!1,x.value=!1,b.value=!1;return}window.clearTimeout(ot.value),ot.value=window.setTimeout(d,Y)};window.setTimeout(d,0)},ct=async()=>{x.value=!1,b.value=!1;const i=zt(T.value);await Tt("post","/api/v1/verify-code/",{login:D.value,password:i}).then(e=>(lt({message:_t.value,type:"success"}),Mt(e.data.access,e.data.refresh),p.push({name:"home"}),e)).catch(e=>{ht(5),lt({message:ut.value+" - "+e,type:"error"}),x.value=!0,b.value=!0})},_t=O(()=>`${o("elmessage.authSuccess")}`),ut=O(()=>`${o("elmessage.authError")}`),dt=async()=>{};return(i,e)=>{const k=z("User"),d=z("el-icon"),F=z("el-button"),U=z("el-input"),q=z("ArrowUpBold"),H=z("CloseBold"),y=z("ChatDotRound"),Y=z("Phone"),A=z("Message"),B=z("Clock");return N(),G(yt,null,[t("div",{class:j(["overlay_full",{active:K.value}]),onClick:u},null,2),t("header",It,[t("div",Pt,[t("div",Ft,[t("div",At,[t("div",Bt,[t("div",Lt,[l(xt)]),t("div",Ut,[t("p",Vt,[t("span",null,n(h(o)("header.em")),1),S("-"+n(h(o)("header.dispatcher")),1)]),t("p",Nt,n(h(o)("header.smt")),1)])]),t("div",Kt,[l(bt),l(kt)])])])])]),e[9]||(e[9]=t("section",{class:"top"},null,-1)),t("section",qt,[t("div",Ht,[t("div",Ot,[e[2]||(e[2]=t("div",{class:"lava__image"},[t("img",{src:Ct,alt:""})],-1)),l($t)]),t("div",jt,[t("div",Gt,[t("div",Wt,[t("div",Qt,[t("h3",Xt,[t("span",null,n(h(o)("header.em")),1),S("-"+n(h(o)("header.dispatcher")),1)]),t("h4",Yt,n(i.$t("auth.auth")),1)])]),t("div",Zt,[t("div",Jt,[t("div",te,[t("p",ee,[l(d,null,{default:f(()=>[l(k)]),_:1}),S(n(i.$t("auth.login")),1)]),t("div",{class:j(["auth__input",{error:x.value}])},[l(U,{modelValue:D.value,"onUpdate:modelValue":e[0]||(e[0]=V=>D.value=V),type:"text",size:"large",placeholder:i.$t("auth.loginEnter")},{prepend:f(()=>[l(F,{class:"auth__icon",icon:h(vt)},null,8,["icon"])]),_:1},8,["modelValue","placeholder"]),b.value===!0?(N(),G("small",se,n(i.$t("error.login")),1)):J("",!0)],2)]),t("div",oe,[t("p",ie,[l(d,null,{default:f(()=>[l(h(it))]),_:1}),S(n(h(o)("auth.pass")),1)]),t("div",{class:j(["auth__input",{error:x.value}])},[l(U,{"model-value":R.value,onInput:c,onKeydown:m,onPaste:M,onMouseup:r,onKeyup:w,size:"large",type:"password",placeholder:i.$t("auth.passEnter")},{prepend:f(()=>[l(F,{class:"auth__icon",icon:h(it)},null,8,["icon"])]),_:1},8,["model-value","placeholder"]),b.value?(N(),G("small",ae,n(h(o)("error.pass")),1)):J("",!0)],2)])]),t("div",le,[Z.value===!0?(N(),at(F,{key:0,class:"auth__timecode",type:"primary",disabled:""},{default:f(()=>[t("span",ne,n(i.$t("button.wait")),1),e[3]||(e[3]=S()),t("span",null,n(et.value)+":"+n(st.value),1)]),_:1})):(N(),at(F,{key:1,class:"auth__button",disabled:Q.value,type:"primary",onClick:e[1]||(e[1]=V=>ct())},{default:f(()=>[S(n(i.$t("button.enter")),1)]),_:1},8,["disabled"]))])])])])])]),t("footer",re,[t("div",he,[t("div",ce,[t("div",_e,[t("p",ue,n(h(o)("footer.copy"))+n(C.value)+"г.",1),t("div",{class:"footer__description_link text_three",onClick:u},n(h(o)("footer.contacts")),1),t("button",{class:"footer__up button",onClick:X},[t("span",null,[l(d,null,{default:f(()=>[l(q)]),_:1})]),S(" "+n(h(o)("footer.up")),1)])])])])]),t("div",{class:j(["footer__rules popup",{active:$.value}])},[t("div",de,[t("div",fe,[t("button",{class:"footer__rules_close popup__close",onClick:u},[l(d,null,{default:f(()=>[l(H)]),_:1})]),t("h3",pe,n(h(o)("footer.contacts")),1),t("ul",me,[t("li",ve,[t("h4",ge,[l(d,null,{default:f(()=>[l(y)]),_:1}),S(" "+n(h(o)("footer.support")),1)]),t("div",we,[l(d,null,{default:f(()=>[l(Y)]),_:1}),t("div",ye,[e[4]||(e[4]=t("a",{href:"tel:88007009802",class:"footer__rules_link text_one"},"8 800 700 98 02",-1)),t("span",xe,n(h(o)("footer.multichannel")),1)])]),t("div",be,[l(d,null,{default:f(()=>[l(Y)]),_:1}),t("div",ke,[e[5]||(e[5]=t("a",{href:"tel:+78412209000",class:"footer__rules_link text_one"},"+7 (8412) 209-000",-1)),t("span",Se,n(h(o)("footer.mainnumber")),1)])])]),t("li",Ce,[t("h4",Me,[l(d,null,{default:f(()=>[l(A)]),_:1}),S(" "+n(h(o)("footer.email")),1)]),t("div",Te,[l(d,null,{default:f(()=>[l(A)]),_:1}),t("div",Ee,[e[6]||(e[6]=t("a",{href:"mailto:info@elmeh.ru",class:"footer__rules_link text_one"},"info@elmeh.ru",-1)),t("span",ze,n(h(o)("footer.questions")),1)])]),t("div",De,[l(d,null,{default:f(()=>[l(A)]),_:1}),t("div",Re,[e[7]||(e[7]=t("a",{href:"mailto:smt@elmeh.ru",class:"footer__rules_link text_one"},"smt@elmeh.ru",-1)),t("span",$e,n(h(o)("footer.technical")),1)])])]),t("li",Ie,[t("h4",Pe,[l(d,null,{default:f(()=>[l(B)]),_:1}),S(" "+n(h(o)("footer.working")),1)]),t("div",Fe,[l(d,null,{default:f(()=>[l(B)]),_:1}),t("div",Ae,[t("span",Be,n(h(o)("footer.mon-fri")),1),t("span",Le,n(h(o)("footer.msk"))+" "+n(h(o)("footer.utc")),1)])]),t("div",Ue,[l(d,null,{default:f(()=>[l(B)]),_:1}),t("div",Ve,[t("span",{class:j(["footer__rules_date text_one",{error:!E.value||s.value}])},[S(n(W.value)+" - ",1),t("span",null,n(i.$d(I.value,"weekday")),1),e[8]||(e[8]=S()),s.value?(N(),G("span",Ne,"("+n(h(o)("footer.lunch"))+")",1)):J("",!0)],2),t("span",Ke,n(h(o)("footer.current"))+" "+n(h(o)("footer.utc")),1)])])])])])])],2)],64)}}}),vs=rt(qe,[["__scopeId","data-v-ccd05e15"]]);export{vs as default};
